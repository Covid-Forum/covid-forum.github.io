(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,a){e.exports=a.p+"static/media/linux.0b02e6c4.jpg"},107:function(e,t,a){e.exports=a.p+"static/media/smartphone.dfeecb23.jpg"},108:function(e,t,a){e.exports=a.p+"static/media/laptop_desktop.0f47f5ad.jpg"},109:function(e,t,a){e.exports=a.p+"static/media/programing.e1fa6b82.jpg"},153:function(e,t,a){},174:function(e,t,a){e.exports=a.p+"static/media/news_1.b5cb9e6c.jpg"},175:function(e,t,a){e.exports=a.p+"static/media/news_2.0d47457b.jpg"},176:function(e,t,a){e.exports=a.p+"static/media/news_3.d2754ca5.jpg"},177:function(e,t,a){e.exports=a.p+"static/media/news_4.8458a8d9.jpg"},178:function(e,t,a){e.exports=a.p+"static/media/news_5.5a6bce51.jpg"},179:function(e,t,a){e.exports=a.p+"static/media/news_6.82d9b7cd.jpg"},180:function(e,t,a){e.exports=a.p+"static/media/news_7.56de81c6.jpg"},181:function(e,t,a){e.exports=a.p+"static/media/news_8.fc125f5b.jpg"},182:function(e,t,a){e.exports=a.p+"static/media/news_9.dc1bb8e6.jpg"},183:function(e,t,a){e.exports=a.p+"static/media/news_10.f5f10626.jpg"},184:function(e,t,a){e.exports=a.p+"static/media/windows.b8dcd2fe.jpg"},185:function(e,t,a){e.exports=a.p+"static/media/macos.a30d51a0.jpg"},186:function(e,t,a){e.exports=a.p+"static/media/ios.a88eb22b.jpg"},187:function(e,t,a){e.exports=a.p+"static/media/android.0c77c6bb.jpg"},190:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAAIVBMVEX7+/v39/fz8/Pv7+/r6+vn5+fj4+Pf39/b29vX19fS0tL4AUFsAAAGE0lEQVR42u2dC1brSAxErf7o4/0veGCACZwHLzJxxiW77hIKqbpa6piFEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCHk+YhI+4TIQr5BWh+qZu7xgbub6uydmn3RaarHz7jp6BRsWaSredxlDdfRLi1YG+qxAZtXLTC5KbVJr7ZcjjY9foleq7ykazyCX6e8ZFi8QLkSdIsXKFdaqp3kOrd3NY098b6cFpkeO6Nn7cVu8QTmckJkxnOw8xVXs3gWPpZz0T2eiJ7qWJzxDlvxHqLxDQwRWbvan3MY13d2xQxxrFYRulSnx1d4KGJoFWGl1epxg52IpVVltZrHJ6gWmlZVE4RYHELJLK/xB1TrB2YchZcLED1+gCYPYu7vrMVM3uI4qtnWjAMpZls9DqWUbd1LWGzET4w4mEIDiOZxNHWuPRoQlFj49MCghMdbgFDA41EKq0JpCUxhFSitETjAlxZQYcGXFo5jFSgtkIxVImu1wAI6xs/AAnlUIxC3wv/AfoiEZe+v2AILmL1DWzxeFwL3IVJ6h+9DwC6E7UOMCWmRPsQ7C4GvPGiJFDqXQg0cwEcPmJYFej/EtCxQ08K0LFDTgkxZLzhg0kLaVMA7PNrc7w3Qp22o/g7p8Ii36BcwH9SgHoaQxyHqYQg5eIA9DClWHsTsgDhS/hfEkRayWHBBC3XmAClWp1jnqCy4CE+xKBbF+gsUi2LxNKRYf+GiYiFfd/Duhpw6cETDSel9OIPHgdsd7g25kU5w1aAFF7OWRWCPQ7zksCxzDUgAD0Pc4xDyZwOoKwtAf8d1eETLgr3w4F12cE0LML/jxlJIy0IdaWFaFubgATJlofYhaBdiTktRuxDxPAQ9CzH7ELcLAXMpZiLFHJcCDklxoxauveNZPLC9440eAAfKsCkevLCwXtOgFxZSacEXFpJr4RcWzoFYoLBwshZ2xsKK8dDhHeyGiPg1B9j4gDxuQPP4Eu6O0og13B2jEStELJQTscpJmGhEnoRI0bSSYb0iP9oWDQvJtqoZ1l/SFhMW0GirqlbLomt8hQchUICorNVNLWqFplZ1rd7UolZoZ6KdQKtlGcwMYL+90JNotSzNeB+E+X2dV5sz3GGwBTfQjS2YRyYTw7HF5fN0LfiBDI9d0ZOW1RtNYz/sZIfgE+XycdoO/ERXSrVJLo+HsMtI9UqbD8il/UpSvSK/LC+bpz4Bf6QN2xyrLldUN6SNdH25XVmpd6QPtXtC6ezX7L5vkNanmnnEGjfWCHfTObpcvqS+kaz1PuYHo/feKBMhv4OnVhYZdvS+U9RK/L2a+uGz3mYRYfBjwa4AW4SPNaVDX4y6AuynROMGrFx/TvWOaITuBWb0MhHmvjIrTAmHx43Diqt7gVF9M4TNetMKK+uBsK6S6QUeQzRD2O4Nr/AeYjjA3rhbhSWjaGRYfcgzpSrxgKTZ4a8SpFuNp0ndYwOu7Rm39iIvbsbRG782vcoTwRmb2Pt2K0PrvHzTNX6HjrbLirbKBx/ksSe1rqPJY0pV+jyGWDzIb1embajX+qlrUqudV6fShlqx182S0CqNmyZ2qPK2hY01IqqpZbEv7jpH763JV9nkfe2q5nGj1I/OxeIZrOHuZnrDzNzj0XK66/In+QXhB3XVOoVW/6ZT0NyOyEC8D8LSl2U55TdT9uf2m+qzfkRsX0wKhobDUB6EGAHiROb+Qae553E5++e4C9jW6QzrjUnD2kBnwspjwibMo2zCDXQ2YR4XNmGadbIJN9AZR/MYh6MbGIuc9f9h7o8L3T2Pctiwgc7paB5lbNhAZ2zIY8LYkGewsPKYsLDyDBZWHhcWVp7BwspjwsLKM1hYeVwY3vN03grzGMcN/0NpXbCwIpQD0g00DkjzTOaGPC7MDXk67T2P0t7zeOO1MM+kvecxYXrP0xmy8ii7MI8LuzBPZxfmmezCPC7swjydXZhncp6cx9iFTxkBjjWuzqBl5VEGhzwutKw8naOsPJOWlUdpWXlcaFl5OndgadZBy8qjXBjmMaG/p3Ghv+fp9Pc8g/k9j/IwzKOckuYxufi3QbbgjWIl+Xa0/A9yvmZNzZne5gAAAABJRU5ErkJggg=="},191:function(e,t,a){e.exports=a.p+"static/media/news-placeholder.099e9bae.jpg"},193:function(e,t,a){e.exports=a.p+"static/media/background.55789da2.jpg"},214:function(e,t,a){e.exports=a(359)},219:function(e,t,a){},224:function(e,t,a){},241:function(e,t,a){},265:function(e,t,a){},266:function(e,t,a){},358:function(e,t,a){},359:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),l=a.n(o),s=(a(219),a(24)),i=a(37),c=Object(i.a)(),m=a(3),p=a(4),d=a(6),u=a(5),h=a(11),f=a(22),g=a(14),b=a(412),E=a(413),v=a(404),w=a(364),x=a(414),O=a(507),C=a(360),y=a(173),j=a.n(y),k=a(392),N=a(394),S=a(396),I=a(397),P=a(399),D=a(402),L=a(398),W=a(400),B=a(401),T=a(403),F=function(){return sessionStorage.user?JSON.parse(sessionStorage.user):null},R=function(e){sessionStorage.user=JSON.stringify(e)},z=function(){sessionStorage.user&&sessionStorage.removeItem("user")},A=function(){return void 0!==sessionStorage.user},M=function(){return!!A()||(window.handlePopup("login"),!1)},U=function(){return A()&&"admin"===F().role},_=function(e){return!!A()&&(F()._id===e||U())},H="rgba(255,255,255,.8)",Y="#22A2B1",G={width:"100%",boxSizing:"border-box","@media (min-width: 768px)":{padding:"0 15px"},"@media (min-width: 1500px)":{padding:"0 15%"},"@media (max-width: 600px)":{padding:"0 8px"}},q={color:H,fontSize:"1.5rem",fontWeight:"700"},K=function(e){return{display:"-webkit-box",overflow:"hidden",textOverflow:"hidden",lineClamp:e,boxOrient:"vertical"}},Z={list:{border:"2px solid ".concat("#313947"),backgroundColor:"#313947",color:H,padding:0},listItem:{color:H},listPostItem:{color:H,marginRight:"-1.2em"}},Q=Object(C.a)(Z)((function(e){var t=function(e){return r.a.createElement(k.a,Object.assign({className:a.listItem,button:!0,component:"a"},e))},a=e.classes,n=function(){return!!e.popoverAnchor};return A()&&r.a.createElement(N.a,{id:n()?"simple-popover":void 0,open:n(),anchorEl:e.popoverAnchor,onClose:e.onClose,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(S.a,{component:"nav",className:a.list},U()&&r.a.createElement(t,{component:g.a,to:"/admin/dashboard"},r.a.createElement(I.a,{className:a.listItem},r.a.createElement(L.a,null)),r.a.createElement(P.a,{primary:"Dashboard"})),r.a.createElement(t,{component:g.a,to:"/profile"},r.a.createElement(I.a,{className:a.listItem},r.a.createElement(W.a,null)),r.a.createElement(P.a,{primary:"My profile"})),r.a.createElement(t,{component:g.a,to:"/wall"},r.a.createElement(I.a,{className:a.listItem},r.a.createElement(B.a,null)),r.a.createElement(P.a,{primary:"My wall"})),r.a.createElement(D.a,null),r.a.createElement(t,{onClick:e.onLogout},r.a.createElement(I.a,{className:a.listItem},r.a.createElement(T.a,null)),r.a.createElement(P.a,{primary:"Logout"}))))})),X=a(196),J=a(406),V=a(407),$=a(365),ee=(a(224),a(405)),te=a(105),ae=a.n(te),ne="http://localhost:9000";"localhost"!==window.location.hostname&&(ne="https://covid-forum-rest-server.herokuapp.com");var re=ae.a.create({baseURL:ne,withCredentials:!0}),oe=a(62),le=a.n(oe),se=function(e){return le()(e).fromNow()},ie=function(e){return le()(e).format("MMMM D, YYYY")},ce=function(e){return le()(e||new Date).format("DD/MM/YYYY")},me=function(e){return le()(e||new Date).format("DD/MM/YYYY hh:mm a")},pe=function(e){return parseInt(e).toLocaleString("en-EN")},de=function(e){return e.replace(/<.*?>(-->)?/g,"")},ue=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleLogin=function(e){e.preventDefault();var t=n.state,a=t.email,r=t.password;re.post("/users/login",{email:a,password:r}).then((function(e){R(Object(h.a)(Object(h.a)({displayName:e.data.user.display_name},e.data.user),{},{loginMethod:"email"})),n.props.handlePopup(null)})).catch((function(e){switch(e.response.status){case 401:return n.setState({error:"Email or password is not valid !"});case 403:var t=e.response.data.ban_expired_at;return n.setState({error:"You've been banned until ".concat(me(t))})}}))},n.resetError=function(){n.setState({error:""})},n.state={email:"",password:"",error:""},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("div",{className:"login-title"},"SIGN ",r.a.createElement("span",{className:"in"},"IN")),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleLogin},r.a.createElement("input",{className:"login-input",type:"email",placeholder:"Email",required:!0,onInput:this.resetError,onChange:function(t){e.setState({email:t.target.value})}}),r.a.createElement("input",{className:"login-input",type:"password",placeholder:"Password",required:!0,onInput:this.resetError,onChange:function(t){e.setState({password:t.target.value})}}),r.a.createElement("div",{className:"login-error"},this.state.error),r.a.createElement("input",{type:"checkbox"})," ",r.a.createElement("label",{className:"login-lbl"},"Remember Me"),r.a.createElement("button",{type:"button",className:"login-link",onClick:function(t){t.preventDefault(),e.props.handlePopup("register")}},"Register an account ?"),r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0},r.a.createElement(w.a,{className:"button",type:"submit",variant:"contained"},"SIGN IN")),r.a.createElement(v.a,{item:!0},r.a.createElement(w.a,{href:"".concat(ne,"/auth/facebook"),variant:"contained",color:"primary",startIcon:r.a.createElement(ee.a,null)},"Continue with Facebook"))))))}}]),a}(n.Component),he=(a(241),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleRegister=function(e){if(e.preventDefault(),n.isPasswordMatched()){var t=n.state,a=t.email,r=t.password,o=t.display_name,l=t.gender,s=new FormData;s.append("avatar",n.fileRef.current.files[0]),s.append("email",a),s.append("password",r),s.append("display_name",o),s.append("gender",l),re.post("/users/register",s,{headers:{"content-type":"multipart/form-data"}}).then((function(e){console.log(e.data),e.data.err||n.props.handlePopup("login"),n.setState({error:e.data.err})})).catch((function(e){console.log(e)}))}},n.isPasswordMatched=function(){var e=n.state;return e.password===e.repass},n.state={email:"",display_name:"",password:"",repass:"",gender:"male",address:"",error:null},n.fileRef=r.a.createRef(),n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.state.error;return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"title"},"SIGN",r.a.createElement("span",{className:"in"}," UP")),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleRegister,encType:"multipart/form-data"},r.a.createElement("input",{className:"input",type:"email",placeholder:"Email",required:!0,onChange:function(t){e.setState({email:t.target.value})}}),t&&t.email?r.a.createElement("div",{className:"error"},"Email is already used"):"",r.a.createElement("input",{className:"input",type:"text",placeholder:"Display name",minLength:"3",maxLength:"20",required:!0,onChange:function(t){e.setState({display_name:t.target.value})}}),t&&t.display_name?r.a.createElement("div",{className:"error"},"This name is existed"):"",r.a.createElement("input",{className:"input",type:"password",placeholder:"Password",minLength:"4",required:!0,onChange:function(t){e.setState({password:t.target.value})}}),r.a.createElement("input",{className:"input",type:"password",minLength:"4",required:!0,placeholder:"Confirm Password",onChange:function(t){e.setState({repass:t.target.value})}}),this.isPasswordMatched()?"":r.a.createElement("div",{className:"reg-error"},"Password does not match"),r.a.createElement("label",{className:"single-lbl"},"Gender"),r.a.createElement("input",{className:"radio-button",type:"radio",value:"male",name:"gender",checked:"male"===this.state.gender,onChange:function(t){e.setState({gender:t.target.value})}}),r.a.createElement("label",{className:"lbl"},"Male"),r.a.createElement("input",{className:"radio-button",type:"radio",value:"female",name:"gender",checked:"female"===this.state.gender,onChange:function(t){e.setState({gender:t.target.value})}}),r.a.createElement("label",{className:"lbl"},"Female"),r.a.createElement("label",{className:"single-lbl"},"Choose your avatar"),r.a.createElement("input",{type:"file",className:"input file",name:"avatar",accept:"image/*",ref:this.fileRef,onChange:this.handleUploadAvatar}),r.a.createElement("input",{className:"input",type:"text",placeholder:"Your address",onChange:function(t){e.setState({address:t.target.value})}}),r.a.createElement("button",{type:"button",className:"link",onClick:function(t){t.preventDefault(),e.props.handlePopup("login")}},"Sign in now!"),r.a.createElement("button",{className:"button sign-up",type:"submit"},"SIGN UP"))))}}]),a}(n.Component)),fe=Object(X.a)({root:{marginTop:"-5%",background:"rgba(0,0,0,.7)"},dialogContent:{"@media (max-width: 600px)":{padding:0}},paper:{background:"transparent",boxShadow:"none"}}),ge=r.a.forwardRef((function(e,t){return r.a.createElement($.a,Object.assign({direction:"down",ref:t},e))})),be=function(e){var t=e.type,a=fe();return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{open:null!==t,scroll:"body",onClose:function(){return e.handlePopup(null)},className:a.root,TransitionComponent:ge,BackdropProps:{classes:{root:a.root}},PaperProps:{classes:{root:a.paper}}},r.a.createElement(V.a,{className:a.dialogContent},"login"==t?r.a.createElement(ue,{handlePopup:e.handlePopup}):"register"==t?r.a.createElement(he,{handlePopup:e.handlePopup}):null)))},Ee={navMenu:{position:"fixed"},topbar:{height:"auto",lineHeight:"3rem"},appBar:{display:"flex",background:"#292E38",padding:"1rem 0","@media (min-width: 768px)":{padding:"0 15px"},"@media (min-width: 1400px)":{padding:"0 15%"}},brandHighlight:{color:"#DD163B"},btn:{"& span":{width:"100%",height:"100%","& a":{width:"100%",height:"100%",display:"block",padding:".2rem .5rem",textAlign:"center"}},"@media (min-width: 768px)":{},"@media (min-width: 1400px)":{}},link:{color:H,textDecoration:"none"},accountBtn:{color:H},displayName:{color:H,textTransform:"none"},avatar:{marginRight:"0.5em"},navLink:{display:"flex",alignItems:"center",justifyContent:"center"},"@media (max-width: 600px)":{appBar:{padding:"0 10px"},navLogo:{order:1,display:"flex",alignItems:"center",paddingLeft:"16px"},navLink:{maxHeight:"2rem",order:3,display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"nowrap"},link:{fontSize:"0.8rem",width:"100%",height:"100%",display:"block"},navUser:{order:2}},mContainer:{width:"50vw",height:"100%",background:"#292E38",color:H},mlink:{width:"100%",display:"block",textDecoration:"none",padding:0,"&:active":{background:"transparent"}},mbutton:{width:"100%",height:"100%",textAlign:"center",padding:"2rem "}},ve=a(499),we=a(505),xe=a(410),Oe=a(198),Ce=a(411),ye=a(89),je=a(408),ke=a(409),Ne=a(46),Se={wrapper:{padding:"8px",marginTop:"8px","&:hover":{boxShadow:"0px 0px 3px 1px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"}},thumbnail:{borderRadius:"2px",border:"1px solid lightblue"},resultHeader:Object(h.a)(Object(h.a)({},K(2)),{},{fontSize:"0.8rem",fontWeight:"500"}),resultInfo:Object(h.a)(Object(h.a)({},K(1)),{},{fontSize:"0.6rem"})},Ie=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.result;return r.a.createElement(ye.a,{component:g.a,to:"/news/".concat(a.id)},r.a.createElement(je.a,{className:t.wrapper,title:a.header},r.a.createElement(v.a,{container:!0,spacing:1},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(ke.a,{component:"img",className:t.thumbnail,image:a.thumbnail})),r.a.createElement(v.a,{item:!0,xs:8},r.a.createElement(Ne.a,{className:t.resultHeader},a.header),r.a.createElement(Ne.a,{className:t.resultInfo},a.user.display_name," posted in ",a.room.name)))))}}]),a}(n.Component),Pe=Object(C.a)(Se)(Ie),De=Object(C.a)({root:{overflow:"auto",maxHeight:"400px"}})(ve.a),Le=Object(C.a)({tooltip:{backgroundColor:"rgba(255,255,255,0.9)",color:"rgba(0, 0, 0, 0.87)"},arrow:{color:"rgba(255,255,255,0.9)"}})(we.a),We=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleSearch=function(e){var t=e.target.value;n.setState({keyword:t}),re.post("/news/search",{keyword:t}).then((function(e){n.setState({results:e.data.news})})).catch((function(e){return console.log(e)}))},n.state={results:[],keyword:""},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state.results;return r.a.createElement(Le,{open:this.props.isOpen,onClose:this.props.handleClose,disableHoverListener:!0,disableFocusListener:!0,disableTouchListener:!0,arrow:!0,interactive:!0,placement:"bottom",title:r.a.createElement(v.a,null,r.a.createElement(v.a,null,r.a.createElement(ve.a,null,r.a.createElement(xe.a,{size:"small"},r.a.createElement(Ce.a,null)),r.a.createElement(Oe.a,{onChange:this.handleSearch,value:this.state.keyword,placeholder:"Search...",autoFocus:!0})),r.a.createElement(D.a,null)),r.a.createElement(v.a,null,r.a.createElement(De,null,e.map((function(e){return r.a.createElement(Pe,{key:e.id,result:e})})))))},this.props.children)}}]),a}(n.Component),Be=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).fetchUser=function(){re.get("/auth/check").then((function(e){if(e.data.isAuthenticated){var t=e.data.user,a=t.display_name,r=t.avatar;R(Object(h.a)({displayName:a},e.data.user)),n.setState({displayName:a,avatar:r}),n.props.isLogin(!0)}else z()})).catch((function(e){return console.log(e)}))},n.handleClickUserBtn=function(e){A()?n.setState({popoverAnchor:e.currentTarget}):n.handlePopup("login")},n.handleCloseUserPanel=function(){n.setState({popoverAnchor:null})},n.handleLogout=function(){re.post("/users/logout").then((function(){z(),n.setState({displayName:"",avatar:""}),n.props.isLogin(!1)}));var e=c.location.pathname.startsWith("/profile");(U()||e)&&c.push("/")},n.handlePopup=function(e){n.setState({popup:e})},n.toggleSearch=function(){n.setState({showSearchBox:!n.state.showSearchBox})},n.scrollToBottom=function(){window.scrollTo(0,document.documentElement.scrollHeight)},n.toggleMenu=function(e){n.setState({mobileMenuOpen:e})},n.state={popoverAnchor:null,displayName:"",avatar:"",popup:null,showSearchBox:!1,mobileMenuOpen:!0},window.handlePopup=n.handlePopup.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"componentDidUpdate",value:function(){var e=F();e&&e.displayName!==this.state.displayName&&this.fetchUser()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.showSearchBox;return r.a.createElement(r.a.Fragment,null,null!==this.state.popup?r.a.createElement(be,{handlePopup:this.handlePopup,type:this.state.popup}):null,r.a.createElement(b.a,{position:"relative",className:t.topbar},r.a.createElement(E.a,{className:t.appBar},r.a.createElement(v.a,{container:!0,justify:"space-between"},r.a.createElement(v.a,{className:t.navLogo,item:!0,sm:2,xs:4},r.a.createElement(g.b,{to:"/",className:t.link},"Covid ",r.a.createElement("span",{className:t.brandHighlight},"Forum"))),r.a.createElement(v.a,{className:t.navLink,container:!0,sm:6,xs:12,justify:"center"},r.a.createElement(w.a,{className:t.btn},r.a.createElement(g.b,{className:t.link,to:"/"},"Home")),r.a.createElement(w.a,{className:t.btn},r.a.createElement(g.b,{className:t.link,to:"/news"},"News")),r.a.createElement(w.a,{className:t.btn},r.a.createElement(g.b,{className:t.link,to:"/discussion"},"Discussion")),r.a.createElement(w.a,{className:t.btn,onClick:this.scrollToBottom},r.a.createElement("a",{className:t.link},"Contact"))),r.a.createElement(v.a,{className:t.navUser,container:!0,sm:4,justify:"flex-end",wrap:"nowrap",xs:8},r.a.createElement(w.a,null,r.a.createElement(x.a,{onClickAway:function(){return e.setState({showSearchBox:!1})}},r.a.createElement(We,{isOpen:a},r.a.createElement(j.a,{className:t.accountBtn,onClick:this.toggleSearch})))),r.a.createElement(w.a,{onClick:this.handleClickUserBtn},r.a.createElement(O.a,{className:t.avatar,src:this.state.avatar}),r.a.createElement("span",{className:t.displayName},this.state.displayName)),r.a.createElement(Q,{popoverAnchor:this.state.popoverAnchor,onClose:this.handleCloseUserPanel,onLogout:this.handleLogout}))))))}}]),a}(n.Component),Te=Object(C.a)(Ee)(Be),Fe={container:Object(h.a)(Object(h.a)({},G),{},{background:"#313947"}),title:Object(h.a)(Object(h.a)({},q),{},{color:H})},Re=a(49),ze=a.n(Re),Ae=a(174),Me=a.n(Ae),Ue=a(175),_e=a.n(Ue),He=a(176),Ye=a.n(He),Ge=a(177),qe=a.n(Ge),Ke=a(178),Ze=a.n(Ke),Qe={img:{display:"block",maxHeight:"420px",overflow:"hidden",objectFit:"cover",objectPosition:"center",width:"100%"},caption:{color:H,fontFamily:"Roboto",maxWidth:"100%"},itemHeader:Object(h.a)(Object(h.a)({},K(2)),{},{fontSize:"1rem"}),itemContent:Object(h.a)(Object(h.a)({},K(3)),{},{fontSize:"0.9rem"})},Xe=a(31),Je=a.n(Xe);Me.a,_e.a,Ye.a,qe.a,Ze.a;function Ve(e){var t=e.classes,a=e.item;return r.a.createElement(ye.a,{component:g.a,to:"/news/".concat(a._id)},r.a.createElement("div",null,r.a.createElement("img",{className:Je()("slick-image",t.img),src:a.thumbnail}),r.a.createElement("div",{className:Je()("slick-caption",t.caption)},r.a.createElement("h4",{className:t.itemHeader},a.header),r.a.createElement("p",{className:t.itemContent,dangerouslySetInnerHTML:{__html:de(a.content)}}))))}var $e=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={news:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;re.get("/news/random?size=5").then((function(t){e.setState({news:t.data.news})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.props.classes,t={dots:!1,arrows:!1,infinite:!0,speed:500,autoplay:!0,slidesToShow:1,slidesToScroll:1};return r.a.createElement("div",null,r.a.createElement(ze.a,t,this.state.news.map((function(t,a){return r.a.createElement(Ve,{key:a,item:t,classes:e})}))))}}]),a}(n.Component),et=Object(C.a)(Qe)($e),tt=a(502),at={imgWrapper:{display:"flex",alignItems:"center"},img:{overflow:"hidden",objectFit:"cover",objectPosition:"center",height:"7rem",width:"100%",margin:"1rem 0"},caption:{color:H,fontFamily:"Roboto",margin:"0",textAlign:"left",fontSize:"1rem"},title:Object(h.a)({fontWeight:"bold",margin:"1rem 0 0 0"},K(2)),bodyText:Object(h.a)({fontWeight:"normal",fontSize:".8rem",margin:"0"},K(3)),authorWrapper:{display:"flex",alignItems:"center"},author:{fontWeight:"900",color:Y,margin:"0.4rem 0",fontSize:"0.8rem",textDecoration:"none","&:hover":{textDecoration:"underline"}},views:{fontSize:"0.8rem",fontWeight:"500",color:"#8F8F8F",margin:0,"&:before":{content:'"\u2022"',fontSize:"0.7rem",margin:"0 0.4em"}}},nt=a(179),rt=a.n(nt),ot=a(180),lt=a.n(ot),st=a(181),it=a.n(st),ct=a(182),mt=a.n(ct),pt=a(183),dt=a.n(pt),ut=a(415),ht={btn:{textTransform:"none",color:H,fontSize:"1.4rem"},loader:{color:"#f57c00",marginRight:"8px"}},ft=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(w.a,{className:e.btn,variant:"text",size:"large",startIcon:r.a.createElement(ut.a,{className:e.loader,thickness:5,size:"2rem",disableShrink:!0})},"Loading...")}}]),a}(n.Component),gt=Object(C.a)(ht)(ft);rt.a,lt.a,it.a,mt.a,dt.a;function bt(e){var t=e.classes,a=e.item;return r.a.createElement(ye.a,{component:g.a,to:"/news/".concat(a.id)},r.a.createElement(v.a,{container:!0,justify:"space-between",spacing:1},r.a.createElement(v.a,{item:!0,sm:3,xs:4,className:t.imgWrapper},r.a.createElement("img",{className:Je()("slick-image",t.img),src:a.thumbnail,alt:""})),r.a.createElement(v.a,{item:!0,sm:9,xs:8,className:t.caption},r.a.createElement("h4",{className:t.title},a.header),r.a.createElement("p",{className:t.bodyText,dangerouslySetInnerHTML:{__html:de(a.content)}}),r.a.createElement(ve.a,{className:t.authorWrapper},r.a.createElement(g.a,{to:"/wall/".concat(a.user.id),className:t.author},a.user?a.user.display_name:"John"),r.a.createElement("p",{className:t.views},pe(a.views)," views")))),r.a.createElement(tt.a,{mdUp:!0},r.a.createElement(D.a,null)))}var Et=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={news:[],isLoading:!0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;re.get("/news/trending").then((function(t){e.setState({news:t.data.news,isLoading:!1})}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.isLoading,n=t.news,o={dots:!1,infinite:!0,speed:500,autoplay:!0,slidesToShow:4,slidesToScroll:1,vertical:!0,arrows:!1};return a?r.a.createElement(gt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(ze.a,o,n.map((function(t){return r.a.createElement(bt,{key:t.id,item:t,classes:e})}))))}}]),a}(n.Component),vt=Object(C.a)(at)(Et),wt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{container:!0,className:e.container,justify:"space-between"},r.a.createElement(v.a,{item:!0,sm:6,xs:12},r.a.createElement("h3",{className:e.title},"News"),r.a.createElement(et,null)),r.a.createElement(v.a,{item:!0,sm:5,xs:12},r.a.createElement("h3",{className:e.title},"Trending"),r.a.createElement(vt,null))))}}]),a}(n.Component),xt=Object(C.a)(Fe)(wt),Ot={background:{background:"#292E38"},container:Object(h.a)({},G),title:Object(h.a)({},q),titleDark:Object(h.a)(Object(h.a)({},q),{},{color:"#292E38",margin:"1rem"}),img:{display:"block",height:"auto",maxHeight:"5rem",width:"7rem",overflow:"hidden",objectFit:"cover",objectPosition:"center",borderRadius:"1rem"},newsImg:{display:"block",height:"auto",maxHeight:"9rem",width:"12rem",overflow:"hidden",objectFit:"cover",objectPosition:"center"},cardBg:{background:"rgba(255,255,255,.9)",margin:"1rem",marginBottom:"3rem",position:"relative",overflow:"visible","@media (max-width: 600px)":{margin:"8px 0"}},linkText:{color:H,textDecoration:"none",display:"block",textAlign:"left",marginLeft:"1rem"},btn:{width:"100%",display:"flex",justifyContent:"flex-start","& a":{width:"100%",height:"100%",display:"block"}},navLink:{display:"block",width:"100%",height:"100%"},newsItem:{display:"block",width:"100%",margin:"1rem 0"},newsItemTitle:{color:"#292E38",textDecoration:"none",textAlign:"left",textTransform:"none",margin:0},newsTitle:{fontSize:"1rem",margin:"0"},newsBodyText:{color:"#313947",fontSize:".8rem",margin:0},newsAuthorText:{color:Y,fontWeight:"black",margin:".5rem"},readMoreBtn:{position:"absolute",bottom:0,left:"50%",transform:"translate(-50%, 50%)",padding:"0.6em 2em",whiteSpace:"nowrap"}},Ct=a(184),yt=a.n(Ct),jt=a(185),kt=a.n(jt),Nt=a(186),St=a.n(Nt),It=a(187),Pt=a.n(It),Dt=a(73),Lt=a.n(Dt),Wt=a(74),Bt=a.n(Wt),Tt=a(75),Ft=a.n(Tt),Rt=a(76),zt=a.n(Rt),At=a(106),Mt=a.n(At),Ut=a(107),_t=a.n(Ut),Ht=a(108),Yt=a.n(Ht),Gt=a(109),qt=a.n(Gt),Kt=(Lt.a,Bt.a,Mt.a,Ft.a,zt.a,_t.a,Yt.a,qt.a,function(e){var t=e.classes,a=e.room,n=e.isNews;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{className:t.btn,style:{paddingLeft:0}},r.a.createElement(g.a,{to:"/room/".concat(a.name,"/").concat(n?"news":""),replace:!0,style:{textDecoration:"none",textTransform:"none"}},r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,sm:4},r.a.createElement("img",{className:t.img,src:a.image,alt:""})),r.a.createElement(v.a,{item:!0,sm:8},r.a.createElement("h4",{className:t.linkText},a.name))))))}),Zt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).fetchRooms=function(){re.get("/rooms").then((function(e){n.setState({rooms:e.data.rooms})})).catch((function(e){return console.log(e)}))},n.state={isNews:!1,rooms:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchRooms(),c.location.pathname.endsWith("/news")&&this.setState({isNews:!0})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.isNews;return r.a.createElement(ve.a,null,r.a.createElement("h3",{className:e.title},"Our Community"),this.state.rooms.map((function(a){return r.a.createElement(Kt,{key:a.id,room:a,classes:e,isNews:t})})))}}]),a}(n.Component),Qt=Object(C.a)(Ot)(Zt),Xt=a(88),Jt=a(188),Vt=a.n(Jt),$t=Ot.newsItem,ea=Ot.newsTitle,ta=Ot.newsBodyText,aa=Object(h.a)(Object(h.a)({},Ot),{},{newsItem:Object(h.a)(Object(h.a)({},$t),{},{margin:0,padding:"1em 8px",boxSizing:"border-box","&:hover img:first-child":{boxShadow:"0 0 2px 2px rgba(0, 140, 186, 0.2)"}}),imgWrapper:{display:"flex",alignItems:"center"},contentWrapper:{padding:"0 8px"},newsImg:{width:"100%"},newsTitle:Object(h.a)(Object(h.a)(Object(h.a)({},ea),K(2)),{},{color:function(e){return"light"===e.theme?"#292E38":H},"&:hover":{color:Y}}),newsBodyText:Object(h.a)(Object(h.a)(Object(h.a)({},ta),K(2)),{},{color:function(e){return"light"===e.theme?"#292E38":"#8F8F8F"}}),newsRoomName:{color:"orange",fontSize:"0.8rem",fontWeight:"500"},newsAuthorText:{fontSize:"0.8rem",color:Y,fontWeight:"600",margin:0,textDecoration:"none","&:hover":{textDecoration:"underline"}},newsInfoText:{fontSize:"0.8rem",color:function(e){return"light"===e.theme?"#8F8F8F":H},fontWeight:"700","&:before":{content:'"\u2022"',margin:"0 0.4em",fontSize:"0.6rem"}},roomWrapper:{paddingTop:"24px",backgroundColor:"#313947",color:"inherit"},cardBg:{padding:"1.2rem",position:"relative",marginBottom:"16px",backgroundColor:function(e){return"light"===e.theme?"#EAEAEB":"#292E38"},color:function(e){return"light"===e.theme?"#292E38":H},"& hr:last-child":{display:"none"},"@media (max-width: 600px)":{padding:"8px"}},titleWrapper:{display:"flex",justifyContent:"space-between"},cardTitle:{color:"inherit",fontSize:"1.4rem",fontWeight:"700",marginTop:0,marginBottom:"0.2em",marginLeft:"8px",paddingLeft:"8px",borderLeft:"4px solid ".concat("#2D88FF"),"@media (max-width: 350px)":{fontSize:"1rem",padding:"0.4rem"}},composeBtn:{position:"absolute",top:"0.5em",right:0,fontSize:"1.1rem",color:"#f57c00",fontWeight:"600",marginTop:"0.2em",marginRight:"0.8em"},newsAvatarWrapper:{display:"flex",alignItems:"center",marginTop:"0.2em",color:H},avatarSm:{boxSizing:"border-box",width:"1.5em",height:"1.5em",marginRight:"6px",border:"1px solid lightblue",backgroundColor:"#00a152"},noMoreWrapper:{margin:"0 8px"},noMoreButton:{color:"#00a152"}}),na=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.news;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{className:t.newsItem},r.a.createElement(g.a,{to:"/news/".concat(a?a.id:""),className:t.newsItemTitle},r.a.createElement(v.a,{container:!0,spacing:1},r.a.createElement(v.a,{item:!0,sm:4,lg:3,xs:12,className:t.imgWrapper},r.a.createElement("img",{className:t.newsImg,src:a?a.thumbnail:""})),r.a.createElement(v.a,{item:!0,sm:8,lg:9,xs:12},r.a.createElement("h4",{className:t.newsTitle},a?a.header:""),r.a.createElement("p",{className:t.newsBodyText,dangerouslySetInnerHTML:{__html:a?de(a.content):""}}),r.a.createElement(Ne.a,{className:t.newsRoomName},"#",a.room.name),r.a.createElement(ve.a,{className:t.newsAvatarWrapper},r.a.createElement(O.a,{component:g.a,to:"/wall/".concat(a.user.id),className:t.avatarSm,src:a.user?a.user.avatar:"",alt:a.user?a.user.display_name:""}),r.a.createElement(g.a,{className:t.newsAuthorText,to:"/wall/".concat(a.user.id)},a.user?a.user.display_name:"Loading"),r.a.createElement(Ne.a,{className:t.newsInfoText,color:"inherit"},se(a?a.created_at:"long time ago")),r.a.createElement(Ne.a,{className:t.newsInfoText},pe(a?a.views:0)," views")))))),r.a.createElement(D.a,{style:{marginLeft:"8px"}}))}}]),a}(n.Component),ra=Object(C.a)(aa)(na),oa=a(416),la=Object(X.a)({btn:{backgroundColor:"#f57c00",textTransform:"none",borderRadius:"999px",color:H,padding:"0.3em 1.5em"}});var sa=function(){var e=la();return r.a.createElement(w.a,{component:g.a,to:"".concat(c.location.pathname,"/create"),variant:"extended",size:"small",startIcon:r.a.createElement(oa.a,null),className:e.btn},"Compose a news")},ia=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(m.a)(this,a),(n=t.call(this,e)).loadMorePage=function(e){var t=n.state.newsItems,a=n.props.match.params,r=a.name?"/news/room/".concat(a.name):"/news/recent";re.post(r,{page:e}).then((function(e){n.setState({newsItems:t.concat(e.data.news),isLoading:!1,hasNextPage:e.data.hasNextPage})})).catch((function(e){return console.log(e)}))};var r=n.props.match.params;return n.state={newsItems:[],isLoading:!0,roomName:r.name,hasNextPage:!1},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.loadMorePage(1),c.listen((function(){e.setState({newsItems:[],isLoading:!0},(function(){e.loadMorePage(1)}))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.isInfinite,o=void 0===n||n,l=this.state,s=l.newsItems,i=l.isLoading,c=l.roomName,m=l.hasNextPage;return r.a.createElement(Xt.a,{className:a.cardBg},r.a.createElement(v.a,{className:a.titleWrapper},r.a.createElement("h3",{className:a.cardTitle},"Recent News")),r.a.createElement("div",{className:a.composeBtn},c&&r.a.createElement(sa,null)),i?r.a.createElement(gt,null):r.a.createElement(Vt.a,{pageStart:1,loadMore:this.loadMorePage,hasMore:o&&m,loader:r.a.createElement(gt,null)},s.map((function(t){return r.a.createElement(ra,{key:t.id,news:t,theme:e.props.theme})})),!m&&r.a.createElement(v.a,{className:a.noMoreWrapper},r.a.createElement(w.a,{className:a.noMoreButton,variant:"outlined",size:"small",color:"inherit",fullWidth:!0},"No more to show"))))}}]),a}(n.Component),ca=Object(C.a)(aa)(Object(s.g)(ia)),ma=(yt.a,kt.a,St.a,Pt.a,function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.background},r.a.createElement(v.a,{container:!0,className:e.container},r.a.createElement(v.a,{item:!0,sm:3,xs:12},r.a.createElement(tt.a,{only:"xs"},r.a.createElement(Qt,null))),r.a.createElement(v.a,{item:!0,sm:9,xs:12},r.a.createElement(je.a,{className:e.cardBg},r.a.createElement(ca,{theme:"light",isInfinite:!1}),r.a.createElement(w.a,{component:g.a,to:"/news",className:e.readMoreBtn,variant:"contained",color:"primary",size:"large"},"Read More News")))))}}]),a}(n.Component)),pa=Object(C.a)(Ot)(ma),da={container:Object(h.a)(Object(h.a)({},G),{},{"@media (max-width: 600px)":{margin:0}}),background:{background:"#313947",paddingBottom:"16px"},cardBackground:{background:"#292E38"},title:Object(h.a)({},q),img:{display:"block",height:"auto",maxHeight:"15rem",width:"100%",overflow:"hidden",objectFit:"cover",objectPosition:"center center"},cardTitle:{display:"block",textAlign:"center",background:Y,height:"4rem",color:H,fontSize:"1.8rem",lineHeight:"4rem",padding:".5rem",width:"80%",margin:" auto",transform:"translateY(-50%)",borderRadius:"1.5rem",boxShadow:"0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)"},link:Object(h.a)(Object(h.a)({display:"block",color:H,textDecoration:"none",margin:".5rem 1rem",transition:"cubic-bezier(.17,.67,.83,.67)",cursor:"pointer"},K(2)),{},{"&:hover":{color:"#DD163B"}})},ua=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={topic:{}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.topicName;re.get("/posts/room/".concat(t,"/hot")).then((function(t){e.setState({topic:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state.topic;return r.a.createElement(v.a,{item:!0,sm:6},r.a.createElement(je.a,{className:e.cardBackground},r.a.createElement("div",{className:e.cardHeader},r.a.createElement("img",{className:e.img,src:t.room&&t.room.image}),r.a.createElement("p",{className:e.cardTitle},t.room&&t.room.name)),r.a.createElement("div",{className:e.content},t.posts?t.posts.map((function(t){return r.a.createElement(Ne.a,{component:g.a,to:"/posts/".concat(t.id),key:t.id,className:e.link,dangerouslySetInnerHTML:{__html:de(t.content)}})})):r.a.createElement(gt,null))))}}]),a}(n.Component),ha=Object(C.a)(da)(ua),fa=(Lt.a,Bt.a,Ft.a,zt.a,function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={topicsName:["Windows","macOS","iOS","Android"]},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.background},r.a.createElement(v.a,{container:!0,className:e.container,spacing:3,justify:"space-between"},r.a.createElement(v.a,{item:!0,sm:12},r.a.createElement("h3",{className:e.title},"Hot Topic")),this.state.topicsName.map((function(e){return r.a.createElement(ha,{topicName:e})}))))}}]),a}(n.Component)),ga=Object(C.a)(da)(fa),ba=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={isLogin:null},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{isLogin:function(t){return e.setState({isLogin:t})}}),r.a.createElement(xt,null),r.a.createElement(pa,null),r.a.createElement(ga,null))}}]),a}(n.Component),Ea={container:Object(h.a)({},G),background:{background:"#fff",padding:"5rem 0",minHeight:"100vh","@media (max-width: 600px)":{padding:"2rem 0"}}},va=Object(X.a)({background:{width:"100%",height:"100%",background:"none",border:"none",outline:"none",transition:"cubic-bezier(0.895, 0.03, 0.685, 0.22)","&:hover":{cursor:"pointer"}},card:{boxShadow:"none","&:hover":{boxShadow:"0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)"}},img:{width:"100%",height:"100%",maxHeight:"12rem",overflow:"hidden",objectFit:"cover",objectPosition:"center center"},title:{textAlign:"left",fontSize:"1rem",padding:0,paddingLeft:".5rem",margin:".3rem"},body:{textAlign:"left",fontSize:".8rem",padding:0,paddingLeft:".5rem",margin:".3rem",marginBottom:".5rem",color:"rgba(51,51,51,.8)"}});var wa=function(e){var t=va();return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return e.handleClick(e.title,e.id)},className:t.background},r.a.createElement(je.a,{className:t.card},r.a.createElement("img",{src:e.image,className:t.img}),r.a.createElement("h3",{className:t.title},e.title),r.a.createElement("p",{className:t.body},"New Post: ",e.newPost))))},xa=(Lt.a,Bt.a,Mt.a,Ft.a,zt.a,_t.a,Yt.a,qt.a,function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleClick=function(e){console.log(e),n.props.history.push("/room/".concat(e))},n.handleAuthChanged=function(e){n.setState({isLogin:e})},n.state={rooms:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;re.get("/rooms").then((function(t){e.setState({rooms:t.data.rooms})}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{isLogin:this.handleAuthChanged}),r.a.createElement("div",{className:t.background},r.a.createElement(v.a,{container:!0,className:t.container,spacing:2},this.state.rooms.length?this.state.rooms.map((function(t){return r.a.createElement(v.a,{sm:4,xs:6,item:!0,key:t.id},r.a.createElement(wa,{image:t.image,handleClick:e.handleClick,id:t.id,title:t.name,newPost:t.total_news}))})):r.a.createElement(gt,null))))}}]),a}(r.a.Component)),Oa=Object(C.a)(Ea)(xa),Ca=a(453),ya={container:Object(h.a)(Object(h.a)({},G),{},{backgroundColor:"#292E38",color:H,fontSize:"0.9rem","@media (max-width: 600px)":{padding:"0 8px"},"@media (min-width: 1440px)":{padding:"0 16px"}}),roomWrapper:{backgroundColor:"#313947",paddingTop:"24px"},text:{color:H},leftSliderWrapper:{position:"sticky",top:"1em",height:"calc(100vh - 1em)",overflowY:"auto","&::-webkit-scrollbar":{display:"none"},MsOverflowStyle:"none"},leftHeader:{color:H,fontWeight:500,fontSize:"1.2em"},leftSecondary:{fontSize:"0.8em",color:"#00a152"},listIcon:{},active:{background:"rgb(0,0,0,0.3)"},postWrapper:{marginBottom:"1em"},secondaryText:{color:"#8F8F8F",marginLeft:"0.4em",fontSize:"0.8rem",fontStyle:"italic"},timeText:{color:"#8F8F8F",fontSize:"0.75rem",marginLeft:"0.15em"},headerIcon:{marginLeft:"-1px",marginRight:"3px",fontSize:"1rem"},userName:{color:H,fontWeight:"bold",fontSize:"1rem",textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}},avatarLg:{height:"50px",width:"50px",backgroundColor:"#00a152"},cardHeader:{"@media (max-width: 600px)":{padding:"8px"}},cardContent:{"@media (max-width: 600px)":{padding:"8px"}},cardActions:{"@media (max-width: 600px)":{padding:"0 8px"}},postContent:{fontSize:"0.9rem",marginTop:"0.5em","& a":{color:H,fontWeight:"bold"},"& img":{maxWidth:"100%"}},btnLink:{textTransform:"none",fontSize:"0.9rem"},btnLike:{paddingLeft:0},bgPrimary:{backgroundColor:"#292E38",color:H},bgSecondary:{backgroundColor:"#313947",color:H},bgLight:{backgroundColor:"rgba(255,255,255,.9)"},bgFeed:{backgroundColor:"#1D1D1D"},avatarDot:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat("#292E38"),"&::after":{position:"absolute",content:'""',top:-1,left:-1,width:"100%",height:"100%",borderRadius:"50%",border:"1px solid #fff",animation:"$ripple 1.2s infinite ease-in-out"}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2)",opacity:0}},commentInput:{marginLeft:"8px",color:H,boxSizing:"border-box"},commentInputText:{color:H,fontSize:"1em"},commentInputIcon:{marginRight:"-0.5em"},commentContainer:{width:"100%",padding:"0.4em 15px",boxSizing:"border-box",backgroundColor:"#292E38",color:H,"&:last-child":{paddingBottom:"0.8em"},"@media (max-width: 600px)":{paddingLeft:"8px",paddingRight:"8px"}},comment:{position:"relative",backgroundColor:"#1D1D1D",padding:"0.5em 1em",marginLeft:"6px",borderRadius:"0 12px 12px 12px"},commentContent:{fontSize:"0.86em",margin:"0.4em 0"},moreIcon:{position:"absolute",right:0},commentOwnerIcon:{margin:"0 0.15em 0 -0.2em"},commentAdminIcon:{margin:"0 0.15em 0 -0.2em"},commentReportBtn:{position:"absolute",top:0,right:0,transform:" translateX(10%)"},blockedComment:{display:"flex",justifyContent:"center",alignItems:"center",padding:"1em 0",fontSize:"0.8rem",color:"#f74033db"},blockedIcon:{marginRight:"2px"},rightWrapper:{position:"sticky",top:"0.8em","@media (max-width: 600px)":{position:"static",marginBottom:"16px"}},btnNewPost:{textTransform:"none",marginBottom:"1em",width:"100%",backgroundColor:"#f57c00",borderRadius:"9999px",color:H},thumbnailBg:{backgroundColor:"#1D1D1D",height:"4.5em",borderBottom:"4px solid ".concat("#313947")},boxWrapper:{padding:0,height:"8em"},userBox:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",position:"relative",top:"-3.5em"},userBox_name:{fontWeight:"600",fontSize:"1.6rem"},userBox_text:{fontSize:"0.9rem"},userBox_link:{textTransform:"none",padding:"1em",color:"#f57c00"},avatarXl:{width:"5em",height:"5em",backgroundColor:"#00a152",border:"4px solid ".concat("#313947")}},ja=a(422),ka=a(423),Na=a(424),Sa=a(425),Ia=a(420),Pa=a(421),Da=a(417),La=a(418),Wa=a(259),Ba=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onLoad=n.onLoad.bind(Object(f.a)(n)),n.passData=n.passData.bind(Object(f.a)(n)),n.state={isScriptLoaded:e.isScriptLoaded,postContent:""},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.state.isScriptLoaded?this.onLoad():Wa(this.props.scriptUrl,this.onLoad)}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this.editorInstance;t&&t.getData()!==e.content&&t.setData(e.content),this.setState({postContent:this.props.postContent})}},{key:"componentWillUnmount",value:function(){this.unmounting=!0}},{key:"passData",value:function(e){var t=this;e.on("change",(function(e){t.props.getData(e.editor.getData())}))}},{key:"onLoad",value:function(){var e=this,t=this.props.height,a=window.CKEDITOR.replace("editor");if(this.passData(a),window.CKEDITOR.config.uiColor="#9AB8F3",window.CKEDITOR.config.height=t||"400px",!this.unmounting)if(this.setState({isScriptLoaded:!0}),a.on("instanceReady",(function(t){t.editor.setData(e.props.postContent||"")})),window.CKEDITOR)for(var n in this.props.events){var r=this.props.events[n];this.editorInstance.on(n,r)}else console.error("CKEditor not found")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("textarea",{name:"editor",id:"editor",rows:"10",cols:"80",required:!0}))}}]),a}(r.a.Component);Ba.defaultProps={content:"",config:{},isScriptLoaded:!1,scriptUrl:"https://cdn.ckeditor.com/4.6.2/standard/ckeditor.js",activeClass:"",events:{}};var Ta=Ba,Fa=a(419),Ra=function(e){return e?"@"+e.split("@")[0]:"@unknown"},za={paper:{background:"transparent"},bgDark:{backgroundColor:"#313947",color:H},title:{color:"inherit",paddingTop:"10px",paddingBottom:"10px"},actionWrapper:{paddingLeft:"24px",paddingRight:"24px"},postBtn:{backgroundColor:"#2D88FF",color:H,textTransform:"none",marginBottom:"0.1em","&:hover":{backgroundColor:"#006eff"}},avatarWrapper:{display:"flex",alignItems:"center",marginBottom:"8px",fontWeight:700,"& small":{color:"#8F8F8F",fontStyle:"italic",marginLeft:"4px",fontWeight:550}},avatar:{marginRight:"8px",backgroundColor:"#00a152",border:"2px solid ".concat("#2D88FF")},"@media (max-width: 600px)":{contentWrapper:{padding:"8px"},actionWrapper:{padding:"8px"},title:{padding:"8px"}}},Aa=r.a.forwardRef((function(e,t){return r.a.createElement($.a,Object.assign({direction:"up",ref:t},e))})),Ma=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).createPost=function(){var e=n.props.match.params;re.post("/posts",{roomName:e.name,content:n.state.content}).then((function(){window.fetchPosts(),n.props.onClose()})).catch((function(e){console.log({err:e}),alert("error")}))},n.getData=function(e){n.setState({content:e})},n.state={content:""},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=F();return r.a.createElement(J.a,{open:this.props.isOpen,onClose:this.props.onClose,scroll:"body",maxWidth:"md",TransitionComponent:Aa,PaperProps:{classes:{root:e.paper}}},r.a.createElement("div",{className:e.bgDark},r.a.createElement(Da.a,{className:e.title},"Create your post"),r.a.createElement(D.a,null),r.a.createElement(V.a,{className:e.contentWrapper},r.a.createElement(ve.a,{className:e.avatarWrapper},r.a.createElement(O.a,{className:e.avatar,src:t?t.avatar:""}),t?t.display_name:"Display name",r.a.createElement("small",null,t&&Ra(t.email))),r.a.createElement(Ta,{height:150,getData:this.getData})),r.a.createElement(D.a,null),r.a.createElement(La.a,{className:e.actionWrapper},r.a.createElement(w.a,{variant:"outlined",className:e.postBtn,startIcon:r.a.createElement(Fa.a,null),size:"large",fullWidth:!0,onClick:this.createPost},"Post now"))))}}]),a}(n.Component),Ua=Object(C.a)(za)(Object(s.g)(Ma)),_a=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).togglePopup=function(){return c.location.pathname.startsWith("/news")?c.push("/discussion"):A()?void n.setState({isOpenPopup:!n.state.isOpenPopup}):window.handlePopup("login")},n.checkLogin=function(e){A()||(e.preventDefault(),window.handlePopup("login"))},n.state={isOpenPopup:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state.isOpenPopup,a=F();return r.a.createElement(ve.a,{className:e.rightWrapper},r.a.createElement(w.a,{variant:"outlined",className:e.btnNewPost,startIcon:r.a.createElement(oa.a,null),onClick:this.togglePopup},"Create a new post"),r.a.createElement(Ua,{isOpen:t,onClose:this.togglePopup}),r.a.createElement(je.a,{className:e.bgPrimary},r.a.createElement(Ia.a,{className:e.thumbnailBg}),r.a.createElement(D.a,null),r.a.createElement(Ia.a,{className:e.boxWrapper},r.a.createElement(ve.a,{className:e.userBox},r.a.createElement(O.a,{src:a&&a.avatar,className:e.avatarXl}),r.a.createElement("div",{className:e.userBox_name},a?a.displayName:"Display Name"),r.a.createElement("div",null,a?a.email:"example@gmail.com"))),r.a.createElement(D.a,null),r.a.createElement(Ia.a,null,r.a.createElement(S.a,{style:{padding:0}},r.a.createElement(k.a,null,r.a.createElement(P.a,null,r.a.createElement(Ne.a,{className:e.userBox_text},"Joined date: ",a&&ce(a.created_at)))),r.a.createElement(k.a,null,r.a.createElement(P.a,null,r.a.createElement(Ne.a,{className:e.userBox_text},"Total posts: 10"))))),r.a.createElement(D.a,null),r.a.createElement(Pa.a,{style:{padding:"0"}},r.a.createElement(w.a,{component:g.a,to:"/profile",fullWidth:!0,color:"primary",onClick:this.checkLogin,className:e.userBox_link},"My profile"),r.a.createElement(D.a,{orientation:"vertical",flexItem:!0}),r.a.createElement(w.a,{component:g.a,to:"/wall",fullWidth:!0,color:"primary",onClick:this.checkLogin,className:e.userBox_link},"My wall"))))}}]),a}(n.Component),Ha=Object(C.a)(ya)(_a),Ya={background:"rgb(0,0,0,0.3)"},Ga=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(m.a)(this,a),(n=t.call(this,e)).fetchRoomInfo=function(){var e=n.props.match.params;re.get("/rooms/".concat(e.name)).then((function(e){n.setState({roomInfo:e.data.room})}))};var r=n.props.match.params;return n.state={roomName:r.name,roomInfo:{}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchRoomInfo()}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.match.params;t.roomName!==a.name&&(this.fetchRoomInfo(),this.setState({roomName:a.name}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.roomName,n=t.roomInfo;return r.a.createElement(ve.a,null,r.a.createElement(tt.a,{smUp:!0},A()&&r.a.createElement(Ha,null)),r.a.createElement(je.a,{variant:"outlined",className:e.bgPrimary},r.a.createElement(S.a,{style:{padding:0}},r.a.createElement(ja.a,{className:e.leftHeader},a," Community"),r.a.createElement(D.a,null),r.a.createElement(k.a,{button:!0,component:g.b,activeStyle:Ya,to:"/room/".concat(a,"/news"),exact:!0},r.a.createElement(ka.a,null,r.a.createElement(O.a,{className:e.listIcon},r.a.createElement(Na.a,{color:"action"}))),r.a.createElement(P.a,{primary:"News",secondary:r.a.createElement(Ne.a,{className:e.leftSecondary},"+",n?n.total_news:0," new posts")})),r.a.createElement(k.a,{button:!0,component:g.b,activeStyle:Ya,to:"/room/".concat(a),exact:!0},r.a.createElement(ka.a,null,r.a.createElement(O.a,{className:e.listIcon},r.a.createElement(Sa.a,{color:"action"}))),r.a.createElement(P.a,{primary:"Discussion",secondary:r.a.createElement(Ne.a,{className:e.leftSecondary},"+",n?n.total_posts:0," new posts")})))),r.a.createElement(tt.a,{only:"xs"},r.a.createElement(Qt,null)))}}]),a}(n.Component),qa=Object(C.a)(ya)(Object(s.g)(Ga)),Ka=a(451),Za=a(447),Qa=a(448),Xa=a(449),Ja=a(450),Va=a(452),$a=a(504),en=a(430),tn=a(431),an=a(432),nn=a(426),rn=a(427),on=a(428),ln=a(429),sn=Object(X.a)({btn:{textTransform:"none"},actionBox:{paddingTop:0,paddingBottom:4}}),cn=r.a.forwardRef((function(e,t){return r.a.createElement($.a,Object.assign({direction:"up",ref:t},e))})),mn=function(e){var t=sn();return r.a.createElement(J.a,{open:e.isOpen,onClose:e.handleClose,TransitionComponent:cn},r.a.createElement(V.a,null,e.message?e.message:"Are you seriously want to delete it?"),r.a.createElement(La.a,{className:t.actionBox},r.a.createElement(w.a,{className:t.btn,onClick:function(){e.handleClose("yes")}},"Yes"),r.a.createElement(w.a,{className:t.btn,onClick:function(){e.handleClose("no")}},"No, bring me back")))},pn={paper:{background:"transparent"},bgDark:{backgroundColor:"#313947",color:H},title:{color:"inherit",paddingTop:"10px",paddingBottom:"10px"},actionWrapper:{paddingLeft:"24px",paddingRight:"24px"},updateBtn:{backgroundColor:"#f57c00",color:H,textTransform:"none",marginBottom:"0.1em","&:hover":{backgroundColor:"#006eff"}},avatarWrapper:{display:"flex",alignItems:"center",marginBottom:"8px",fontWeight:700,"& small":{color:"#8F8F8F",fontStyle:"italic",marginLeft:"4px",fontWeight:550}},avatar:{marginRight:"8px",backgroundColor:"#00a152",border:"2px solid ".concat("#2D88FF")},"@media (max-width: 600px)":{contentWrapper:{padding:"8px"},actionWrapper:{padding:"8px"},title:{padding:"8px"}}},dn=r.a.forwardRef((function(e,t){return r.a.createElement($.a,Object.assign({direction:"up",ref:t},e))})),un=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).updatePost=function(){var e=n.props.postId;console.log("postId",e),re.put("/posts/".concat(e),{content:n.state.content}).then((function(){window.fetchPosts(),n.props.onClose()})).catch((function(e){console.log({err:e}),alert("update error")}))},n.getPostContent=function(){var e=n.props.postId;re.get("/posts/".concat(e)).then((function(e){var t=e.data.post.content;n.setState({postContent:t})})).catch((function(e){console.log(e)}))},n.getData=function(e){n.setState({content:e})},n.state={content:"",postContent:""},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.getPostContent()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.postId,n=F();return r.a.createElement(J.a,{open:this.props.isOpen,onClose:this.props.onClose,scroll:"body",maxWidth:"md",TransitionComponent:dn,PaperProps:{classes:{root:t.paper}}},r.a.createElement("div",{className:t.bgDark},r.a.createElement(Da.a,{className:t.title},"Update your post"),r.a.createElement(D.a,null),r.a.createElement(V.a,{className:t.contentWrapper},r.a.createElement(ve.a,{className:t.avatarWrapper},r.a.createElement(O.a,{className:t.avatar,src:n?n.avatar:""}),n?n.display_name:"Display name",r.a.createElement("small",null,n&&Ra(n.email))),r.a.createElement(Ta,{height:150,getData:this.getData,postId:a,postContent:this.state.postContent})),r.a.createElement(D.a,null),r.a.createElement(La.a,{className:t.actionWrapper},r.a.createElement(w.a,{variant:"outlined",className:t.updateBtn,startIcon:r.a.createElement(Fa.a,null),size:"large",fullWidth:!0,onClick:this.updatePost},"Update now"))))}}]),a}(n.Component),hn=Object(C.a)(pn)(Object(s.g)(un)),fn=function(e){return r.a.createElement(we.a,{title:"Admin only"},r.a.createElement(k.a,{component:"span",onClick:function(){re.post("/posts/block",{postId:e.postId}).then((function(t){console.log(t.data),e.handleClosePopover(),window.fetchPosts()})).catch((function(e){return console.log(e)}))},button:!0,disabled:!U()},r.a.createElement(I.a,{className:e.classes.listPostItem},r.a.createElement(nn.a,null)),r.a.createElement(P.a,null,"Block comments")))},gn=function(e){return r.a.createElement(we.a,{title:"Admin only"},r.a.createElement(k.a,{component:"span",onClick:function(){re.post("/posts/unblock",{postId:e.postId}).then((function(t){console.log(t.data),e.handleClosePopover(),window.fetchPosts()})).catch((function(e){return console.log(e)}))},button:!0,disabled:!U()},r.a.createElement(I.a,{className:e.classes.listPostItem},r.a.createElement(rn.a,null)),r.a.createElement(P.a,null,"Unblock comments")))},bn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleConfirmPopup=function(){n.setState({isOpenConfirm:!n.state.isOpenConfirm})},n.handleClickDelete=function(){A()?n.toggleConfirmPopup():window.handlePopup("login")},n.handleConfirmDelete=function(e){n.toggleConfirmPopup();var t=n.props.postId;console.log("postId",t),"yes"===e&&re.delete("/posts/".concat(t)).then((function(e){console.log(e),window.fetchPosts()})).catch((function(e){return console.log(e)}))},n.isOwner=function(){var e=n.props.userId;return F()&&F()._id===e},n.togglePopup=function(){if(!A())return window.handlePopup("login");n.setState({isOpenPopup:!n.state.isOpenPopup})},n.state={isOpenConfirm:!1,isOpenPopup:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.postId,n=e.userId,o=e.isBlocked,l=e.content,s=this.state.isOpenPopup;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{open:!!this.props.popoverAnchor,anchorEl:this.props.popoverAnchor,onClose:this.props.handleClosePopover,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(S.a,{className:t.list},r.a.createElement(k.a,{button:!0,onClick:this.togglePopup,disabled:!this.isOwner()},r.a.createElement(I.a,{className:t.listPostItem},r.a.createElement(on.a,null)),r.a.createElement(P.a,null,"Update")),r.a.createElement(hn,{isOpen:s,onClose:this.togglePopup,postId:a,content:l}),r.a.createElement(k.a,{button:!0,onClick:this.handleClickDelete,disabled:!_(n)},r.a.createElement(I.a,{className:t.listPostItem},r.a.createElement(ln.a,null)),r.a.createElement(P.a,null,"Delete")),o?r.a.createElement(gn,{classes:t,postId:a,handleClosePopover:this.props.handleClosePopover}):r.a.createElement(fn,{classes:t,postId:a,handleClosePopover:this.props.handleClosePopover}))),r.a.createElement(mn,{isOpen:this.state.isOpenConfirm,handleClose:this.handleConfirmDelete}))}}]),a}(n.Component),En=Object(C.a)(Z)(bn),vn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).togglePostOptions=function(e){n.setState({popoverAnchor:e.currentTarget})},n.handleClosePopover=function(){n.setState({popoverAnchor:null})},n.state={popoverAnchor:null},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.post;return r.a.createElement(en.a,{className:t.cardHeader,avatar:r.a.createElement(O.a,{component:g.a,to:"/wall/".concat(a.user.id),className:t.avatarLg,src:a?a.user.avatar:"",alt:a?a.user.display_name:""}),title:r.a.createElement(ve.a,{verticalAlign:"middle"},r.a.createElement(g.a,{to:"/wall/".concat(a.user.id),className:t.userName},a?a.user.display_name:"Display name"),r.a.createElement("span",{className:t.secondaryText},a?Ra(a.user.email):"@example")),subheader:r.a.createElement(ve.a,{display:"flex",alignItems:"center",className:t.text},r.a.createElement(tn.a,{className:t.headerIcon}),r.a.createElement(Ne.a,{component:"span",className:t.timeText},a?se(a.created_at):"unknown")),action:r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{className:t.text,onClick:this.togglePostOptions},r.a.createElement(an.a,null)),r.a.createElement(En,{popoverAnchor:this.state.popoverAnchor,handleClosePopover:this.handleClosePopover,postId:a.id,userId:a.user.id,isBlocked:a.comment_blocked}))})}}]),a}(n.Component),wn=Object(C.a)(ya)(vn),xn=a(503),On=a(433),Cn=a(366),yn=a(434),jn=a(435),kn=a(500),Nn={reportBg:{backgroundColor:"#292E38",color:H},textareaLabel:{marginTop:"0.2em",marginBottom:"0.5em"}},Sn=a(115),In=[{id:1,isChecked:!1,label:"Spam"},{id:2,isChecked:!1,label:"Hateful, violent or inappropriate content"},{id:3,isChecked:!1,label:"Software copyright infrigement"},{id:4,isChecked:!1,label:"Wrong community"},{id:5,isChecked:!1,label:"Rude words"},{id:6,isChecked:!1,label:"Breaking community rules"},{id:7,isChecked:!1,label:"Other"}],Pn=Object(C.a)({root:{color:Sn.a[500],"&:checked":{color:Sn.a[600]}}})((function(e){return r.a.createElement(xn.a,Object.assign({color:"default"},e))})),Dn=r.a.forwardRef((function(e,t){return r.a.createElement($.a,Object.assign({direction:"up",ref:t},e))})),Ln=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleCheckboxId=function(e){var t=n.state.items.map((function(t){return t.id===e&&(t.isChecked=!t.isChecked),t}));n.setState({items:t})},n.handleSendReport=function(){var e=n.state.items,t=n.getSelectedLabelsFrom(e);if(t.length<=0)return alert("Please choose at least one reasons");re.post("/reports",{type:n.props.type,reasons:t,content:n.state.content,postId:n.props.postId||null,newsId:n.props.newsId||null,commentId:n.props.commentId||null}).then((function(e){console.log("success",e.data),n.props.onClose()})).catch((function(e){return console.log(e)}))},n.getSelectedLabelsFrom=function(e){return e.filter((function(e){if(e.isChecked)return e})).map((function(e){return e.label}))},n.state={items:In,content:""},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(J.a,{open:this.props.isOpen,onClose:this.props.onClose,TransitionComponent:Dn,keepMounted:!0},r.a.createElement(V.a,null,r.a.createElement(On.a,{component:"fieldset"},r.a.createElement(Cn.a,{component:"legend"},"Choose reason(s)"),r.a.createElement(yn.a,null,this.state.items.map((function(t){return r.a.createElement(jn.a,{key:t.id,control:r.a.createElement(Pn,{checked:t.isChecked,onChange:function(){return e.handleCheckboxId(t.id)}}),label:t.label})})))),r.a.createElement(yn.a,null,r.a.createElement(Cn.a,{className:t.textareaLabel},"Additional infomation"),r.a.createElement(kn.a,{variant:"outlined",size:"small",placeholder:"Write something...",multiline:!0,value:this.state.content,onChange:function(t){return e.setState({content:t.target.value})}}))),r.a.createElement(La.a,null,r.a.createElement(w.a,{onClick:this.handleSendReport},"Send"),r.a.createElement(w.a,{onClick:this.props.onClose},"Cancel")))}}]),a}(n.Component),Wn=Object(C.a)(Nn)(Ln),Bn=a(26),Tn=a(441),Fn=a(439),Rn=a(440),zn=a(442),An=function(e){var t=e.classes;return r.a.createElement(we.a,{title:"Post owner",arrow:!0,interactive:!0,placement:"left-end"},r.a.createElement(Fn.a,{fontSize:"small",className:t.commentOwnerIcon}))},Mn=function(e){var t=e.classes;return r.a.createElement(we.a,{title:"Administrator",arrow:!0,interactive:!0,placement:"left-end"},r.a.createElement(Rn.a,{fontSize:"small",className:t.commentAdminIcon}))},Un=function(e){var t=Object(n.useState)(!1),a=Object(Bn.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)(!1),i=Object(Bn.a)(s,2),c=i[0],m=i[1],p=e.classes;return r.a.createElement(ve.a,{component:"span",className:p.moreIcon},r.a.createElement(we.a,{open:o,onClose:function(){return l(!1)},disableTouchListener:!0,disableHoverListener:!0,title:r.a.createElement(Tn.a,{variant:"text"},r.a.createElement(w.a,{className:p.btnLink,size:"small",color:"inherit",startIcon:r.a.createElement(on.a,null),onClick:function(){e.handleUpdateComment()},disabled:U()},"Update"),r.a.createElement(w.a,{className:p.btnLink,size:"small",color:"inherit",startIcon:r.a.createElement(ln.a,null),onClick:function(){m(!0)}},"Delete")),arrow:!0,interactive:!0},r.a.createElement(xe.a,{color:"inherit",size:"small",onClick:function(){return l(!o)}},r.a.createElement(an.a,null))),r.a.createElement(mn,{isOpen:c,handleClose:function(t){m(!1),"yes"===t&&e.handleDeleteComment()}}))},_n=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).isOwnComment=function(){var e=n.props.comment,t=F();return t&&e.user_id===t._id},n.toggleReportPopup=function(){n.setState({isOpenReport:!n.state.isOpenReport})},n.state={isOpenOption:!1,isOpenReport:!1,shownReportBtn:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props,n=a.comment,o=a.isFromOwner,l=a.isFromAdmin,s=a.postId;return r.a.createElement(v.a,{container:!0,className:t.commentContainer},r.a.createElement(v.a,{container:!0,sm:1,xs:2,justify:"center"},r.a.createElement(O.a,{component:g.a,to:"/wall/".concat(n.user_id),src:n&&n.user.avatar,alt:n&&n.user.display_name})),r.a.createElement(v.a,{item:!0,sm:11,xs:10},r.a.createElement(ve.a,{className:t.comment,onMouseEnter:function(){return e.setState({shownReportBtn:!0})},onMouseLeave:function(){return e.setState({shownReportBtn:!1})}},r.a.createElement(Ne.a,null,r.a.createElement(g.a,{to:"/wall/".concat(n.user_id),className:t.userName},n?n.user.display_name:"Display name"),r.a.createElement("small",{className:t.secondaryText},n?Ra(n.user.email):"@example"),_(n.user_id)?r.a.createElement(Un,{classes:t,handleUpdateComment:function(){return e.props.onUpdateComment(n)},handleDeleteComment:function(){return e.props.onDeleteComment(n.id)}}):this.state.shownReportBtn&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{color:"inherit",className:t.commentReportBtn,onClick:this.toggleReportPopup},r.a.createElement(zn.a,{fontSize:"small"})),r.a.createElement(Wn,{isOpen:this.state.isOpenReport,onClose:this.toggleReportPopup,commentId:n.id,postId:s,type:"comment"})),r.a.createElement(ve.a,{display:"flex",alignItems:"center",className:t.timeText},l&&r.a.createElement(Mn,{classes:t}),o&&r.a.createElement(An,{classes:t}),r.a.createElement(ve.a,null,n?se(n.created_at):"long time ago")),r.a.createElement(Ne.a,{className:t.commentContent},n&&n.content)))))}}]),a}(n.Component),Hn=Object(C.a)(ya)(_n),Yn=a(443),Gn=a(444),qn=a(445),Kn=a(446),Zn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).cancelUpdateMode=function(){n.props.cancelUpdateMode(),n.setState({isUpdateCommentMode:!1,commentContent:""})},n.handleSendComment=function(e){if(e.preventDefault(),!A())return window.handlePopup("login");n.state.isUpdateCommentMode?n.updateCommentAPI():n.addNewCommentAPI()},n.addNewCommentAPI=function(){var e=n.state.commentContent;console.log("New",e,n.props),re.post("/comments",{postID:n.props.postId,content:e,type:n.props.type||"post"}).then((function(e){n.props.refreshComments(e.data.comments),n.setState({commentContent:""})})).catch((function(e){return console.log(e)}))},n.updateCommentAPI=function(){var e=n.props.needUpdateComment.id;re.put("/comments/".concat(e),{content:n.state.commentContent,type:n.props.type||"post"}).then((function(e){n.props.refreshComments(e.data.comments),n.cancelUpdateMode()})).catch((function(e){return console.log(e)}))},n.state={commentContent:"",isUpdateCommentMode:!1},n.commentInputRef=r.a.createRef(),n}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.needUpdateComment;e.needUpdateComment!==t&&t&&(this.commentInputRef.current.focus(),this.setState({isUpdateCommentMode:!0,commentContent:t.content}))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.commentContent,n=F();return r.a.createElement(v.a,{container:!0,className:t.container,alignItems:"center"},r.a.createElement(v.a,{item:!0,sm:1,xs:2,container:!0,justify:"center"},r.a.createElement(Yn.a,{overlap:"circle",variant:"dot",color:"primary",anchorOrigin:{vertical:"bottom",horizontal:"right"},classes:{badge:t.avatarDot}},r.a.createElement(O.a,{src:n&&n.avatar,alt:n&&n.display_name}))),r.a.createElement(v.a,{item:!0,sm:11,xs:10,container:!0,alignItems:"center"},r.a.createElement(On.a,{component:"form",fullWidth:!0,onSubmit:this.handleSendComment},r.a.createElement(kn.a,{className:t.commentInput,inputRef:this.commentInputRef,variant:"outlined",label:"Enter your comment...",size:"small",value:a,required:!0,onChange:function(t){return e.setState({commentContent:t.target.value})},InputProps:{endAdornment:r.a.createElement(Gn.a,{position:"end"},r.a.createElement(xe.a,{type:"submit",color:"primary",className:t.commentInputIcon},r.a.createElement(qn.a,null)),this.state.isUpdateCommentMode&&r.a.createElement(xe.a,{color:"secondary",className:t.commentInputIcon,onClick:this.cancelUpdateMode},r.a.createElement(Kn.a,null))),className:t.commentInputText},InputLabelProps:{required:!1}}))))}}]),a}(n.Component),Qn=Object(C.a)(ya)(Zn),Xn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(m.a)(this,a),(n=t.call(this,e)).checkLiked=function(e){var t=F();return!(!e||!t)&&e.likes.some((function(e){return e.user_id===t._id}))},n.toggleLike=function(){if(!A())return window.handlePopup("login");re.post("/likes",{postID:n.state.post.id}).then((function(e){n.setState({likesNum:e.data.likes})})).catch((function(e){return console.log(e)})),n.setState({liked:!n.state.liked})},n.handleRefreshComments=function(e){var t=n.state.post;t.comments=e,n.setState({post:t})},n.handleUpdateComment=function(e){n.setState({needUpdateComment:e})},n.handleDeleteComment=function(e){re.delete("/comments/".concat(e)).then((function(e){n.handleRefreshComments(e.data.comments)})).catch((function(e){return console.log(e)}))},n.toggleReportPopup=function(){n.setState({isOpenReport:!n.state.isOpenReport})},n.toggleShadow=function(){n.setState({isShadow:!n.state.isShadow})};var r=n.props.post;return n.state={isExpanded:!0,liked:!1,likesNum:r.likes.length,commentsNum:r.comments.length,isOpenReport:!1,needUpdateComment:null,isShadow:!1,post:r,isLogin:!1},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({})}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.post.comments;t.commentsNum!==a.length&&this.setState({commentsNum:a.length}),A()||!0!==this.state.liked||this.setState({liked:!1,isLogin:!1}),A()&&A()!==this.state.isLogin&&this.setState({isLogin:!0,liked:this.checkLiked(this.state.post)})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.post,o=a.liked,l=a.isShadow;return r.a.createElement(ve.a,{className:t.postWrapper},r.a.createElement(je.a,{className:t.bgPrimary,raised:l,onMouseEnter:this.toggleShadow,onMouseLeave:this.toggleShadow},r.a.createElement(wn,{post:n}),r.a.createElement(D.a,null),r.a.createElement(Ia.a,{className:t.cardContent},r.a.createElement(Ne.a,{className:t.postContent,dangerouslySetInnerHTML:{__html:n.content}})),r.a.createElement(D.a,null),r.a.createElement(Pa.a,{className:t.cardActions},r.a.createElement(v.a,{container:!0,className:t.container},r.a.createElement(v.a,{item:!0,container:!0,justify:"flex-start",xs:3},r.a.createElement(w.a,{className:"".concat(t.btnLink," ").concat(t.btnLike),color:o?"primary":"inherit",onClick:this.toggleLike,startIcon:r.a.createElement(Za.a,null)},this.state.likesNum,r.a.createElement(tt.a,{only:"xs"}," Likes"))),r.a.createElement(v.a,{item:!0,container:!0,justify:"center",xs:4},r.a.createElement(w.a,{className:t.btnLink,color:"inherit",startIcon:r.a.createElement(Qa.a,null),onClick:function(){return e.setState({isExpanded:!e.state.isExpanded})}},this.state.commentsNum,r.a.createElement(tt.a,{only:"xs"}," Comments"))),r.a.createElement(v.a,{item:!0,container:!0,justify:"center",xs:4},r.a.createElement($a.a,{url:"https://covid-forum.tech"},r.a.createElement(w.a,{color:"inherit",className:t.btnLink,startIcon:r.a.createElement(Xa.a,null)},r.a.createElement(tt.a,{only:"xs"},"Share")))),r.a.createElement(v.a,{item:!0,container:!0,justify:"flex-end",xs:1},r.a.createElement(xe.a,{color:"inherit",className:t.btnLink,onClick:this.toggleReportPopup,edge:"end"},r.a.createElement(we.a,{title:"Report this post",arrow:!0,placement:"top"},r.a.createElement(Ja.a,null))),r.a.createElement(Wn,{isOpen:this.state.isOpenReport,onClose:this.toggleReportPopup,postId:n.id,type:"post"})))),r.a.createElement(Ka.a,{in:this.state.isExpanded,timeout:"auto",unmountOnExit:!0},r.a.createElement(D.a,null),n.comment_blocked?r.a.createElement(Ne.a,{className:t.blockedComment},r.a.createElement(Va.a,{className:t.blockedIcon}),"Comment blocked by Admin"):r.a.createElement(ve.a,{py:1,className:t.bgPrimary},r.a.createElement(Qn,{postId:n.id,refreshComments:this.handleRefreshComments,needUpdateComment:this.state.needUpdateComment,cancelUpdateMode:function(){return e.setState({needUpdateComment:null})}})),r.a.createElement(D.a,null),n&&n.comments.map((function(t){return r.a.createElement(Hn,{key:t.id,comment:t,postId:n.id,isFromOwner:n.user_id===t.user_id,isFromAdmin:"admin"===t.user.role,onUpdateComment:e.handleUpdateComment,onDeleteComment:e.handleDeleteComment})})))))}}]),a}(n.Component),Jn=Object(C.a)(ya)(Xn),Vn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).fetchPosts=function(){var e=c.location.pathname;re.get("/posts"+e).then((function(e){n.setState({posts:[]}),n.setState({posts:e.data.posts,isLoading:!1})})).catch((function(e){return console.log(e)}))},n.state={posts:[],isLoading:!0},window.fetchPosts=n.fetchPosts.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.fetchPosts(),c.listen((function(){e.setState({isLoading:!0}),e.fetchPosts()}))}},{key:"render",value:function(){var e=this.state,t=e.posts;return e.isLoading?r.a.createElement(gt,null):r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(Jn,{key:e.id,post:e})})))}}]),a}(n.Component),$n=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(Ha,null)}}]),a}(n.Component),er=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleAuthChanged=function(e){n.setState({isLogin:e})},n.state={isLogin:null},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{isLogin:this.handleAuthChanged}),r.a.createElement(ve.a,{className:e.roomWrapper},r.a.createElement(Ca.a,null,r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,sm:4,md:3,xs:12},r.a.createElement(qa,null)),r.a.createElement(v.a,{item:!0,sm:8,md:6,xs:12},r.a.createElement(Vn,null)),r.a.createElement(v.a,{item:!0,md:3},r.a.createElement(tt.a,{smDown:!0},r.a.createElement($n,null)))))))}}]),a}(n.Component),tr=Object(C.a)(ya)(er),ar=(a(152),a(29)),nr=a.n(ar),rr=a(45),or=a(25),lr={wrap:Object(or.a)({border:"1px solid #333",padding:"5rem 0",fontFamily:"Lato, sans-serif",background:" #313947",position:"relative"},"border","none"),container:Object(h.a)(Object(h.a)({},G),{},{"@media (max-width: 600px)":{textAlign:"center"}}),avatar:{display:"flex",width:"100%",justifyContent:"flex-end","@media (max-width: 600px)":{justifyContent:"center"}},avatarImg:{borderRadius:"50%",width:"15rem",height:"15rem",objectFit:"cover"},contentWrapper:{paddingLeft:"40px","@media (max-width: 600px)":{padding:0}},displayName:{fontSize:"2.5rem",color:"rgba(255,255,255,.8)",fontWeight:"700",padding:0,marginBottom:".5rem"},job:{fontSize:"1.1rem",color:"rgba(255,255,255,.8)",padding:0},status:{fontSize:"1.2rem",color:"#00B0FF"},editBtn:{float:"right",color:"#fff",position:"absolute",bottom:".5rem",right:".5rem"}},sr=a(190),ir=a.n(sr),cr=a(454),mr=a(8),pr=a(436),dr=a(77),ur=a.n(dr),hr=function(e){dr.store.addNotification({title:(null===e||void 0===e?void 0:e.title)?e.title:"Notification",message:(null===e||void 0===e?void 0:e.message)?e.message:"Notification message!",type:(null===e||void 0===e?void 0:e.type)?e.type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:(null===e||void 0===e?void 0:e.duration)?e.duration:3e3,onScreen:!0}})},fr=Object(cr.a)({root:{marginTop:"-5%",background:"rgba(0,0,0,.7)"},paper:{background:"transparent",boxShadow:"none"},background:{width:"25vw",background:"#fff",display:"block",minWidth:"30rem"},container:{padding:"1rem",boxSizing:"border-box",position:"relative"},title:{margin:"1rem 0",width:"100%"},breakLine:{borderTop:"1px solid rgba(51,51,51,.2)"},textField:{display:"flex",width:"100%",margin:"2rem 0 1rem 0"},body1:{textAlign:"left",marginTop:"2rem",color:"rgba(51,51,51,.8)"},input:{color:"rgba(51,51,51,.9)"},avatar:{display:"flex",width:"100%",height:"100%",margin:"1rem 1rem",boxSizing:"border-box",overflow:"hidden",flexDirection:"row",alignItems:"center"},avatarImg:{objectFit:"cover",width:"100px",height:"100px",borderRadius:"50%"},fileInput:{alignItems:"center",marginLeft:"2rem"},actionButton:{display:"flex",justifyContent:"flex-end",width:"100%",marginTop:"2rem",marginBottom:".5rem"}}),gr=Object(mr.a)({root:{margin:"0 .5rem",display:"flex",padding:".5rem 1rem",transition:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",textTransform:"capitalize"}})(w.a),br=Object(mr.a)({root:{margin:"0 .5rem",display:"flex",padding:".5rem 1rem",transition:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",background:"#1E88E5",color:"#fff",textTransform:"capitalize","&:hover":{background:"#2196F3"}}})(w.a),Er=Object(mr.a)({root:{"& label.Mui-focused":{color:"rgba(51,51,51,.6)"},"& .MuiInput-underline:after":{borderBottomColor:"rgba(51,51,51,.6)"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(51,51,51,.6)"},"&:hover fieldset":{borderColor:"rgba(51,51,51,.6)"},"&.Mui-focused fieldset":{borderColor:"rgba(51,51,51,.6)"}}}})(kn.a),vr=r.a.forwardRef((function(e,t){return r.a.createElement($.a,Object.assign({direction:"down",ref:t},e))})),wr=function(e){var t=r.a.useState(null),a=Object(Bn.a)(t,2),o=a[0],l=a[1],s=r.a.useState({}),i=Object(Bn.a)(s,2),c=i[0],m=i[1],p=e.isOpen,d=fr();Object(n.useEffect)((function(){l(e.data)}),[e.data]);var u=function(e,t){l(Object(h.a)(Object(h.a)({},o),{},Object(or.a)({},t,e))),m(Object(h.a)(Object(h.a)({},c),{},Object(or.a)({},t,e)))},f=function(){var t=Object(rr.a)(nr.a.mark((function t(){var a,n;return nr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(hr({type:"warning",title:"Keep calm...",message:"Your data is being processed... Please wait!"}),a=!1,!c.status){t.next=6;break}return t.next=6,re.put("/users/status",{status:c.status}).then((function(e){"ok"==e.data.status&&(a=!0)})).catch((function(){return a=!1}));case 6:if(!c.avatar){t.next=11;break}return(n=new FormData).append("avatar",c.avatar),t.next=11,re.put("/users/avatar",n).then((function(e){e.data.user&&(a=!0)})).catch((function(){return a=!1}));case 11:if(!c.job){t.next=14;break}return t.next=14,re.put("/profile",{job:c.job}).then((function(e){"ok"==e.data.status&&(a=!0)})).catch((function(){return a=!1}));case 14:a?(e.handleUpdate(c),setTimeout((function(){e.handlePopup(!1)}),5e3),e.handleNotification("success")):(setTimeout((function(){e.handleUpdate(c)}),3e3),e.handleNotification("error"),e.handlePopup(!0));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{open:p,scroll:"body",onClose:function(){return e.handlePopup()},className:d.root,TransitionComponent:vr,BackdropProps:{classes:{root:d.root}},PaperProps:{classes:{root:d.paper}}},r.a.createElement(V.a,null,r.a.createElement(je.a,{className:d.background},r.a.createElement(Ia.a,{className:d.container},r.a.createElement(Ne.a,{variant:"h6",display:"block",align:"center",className:d.title},"Edit profile"),r.a.createElement("hr",{className:d.breakLine}),r.a.createElement(Er,{id:"standard-basic",label:"Display Name",className:d.textField,value:o?o.displayName:"",InputProps:{className:d.input},disabled:!0}),r.a.createElement(Ne.a,{variant:"body1",display:"block",align:"center",className:d.body1},"Change your profile picture"),r.a.createElement("div",{className:d.avatar},r.a.createElement("img",{ref:function(e){return e},className:d.avatarImg,src:o?o.avatar:null}),r.a.createElement(pr.a,{type:"file",disableUnderline:!0,className:d.fileInput,onChange:function(e){return function(e){m(Object(h.a)(Object(h.a)({},c),{},{avatar:e.target.files[0]}))}(e)}})),r.a.createElement("div",{className:d.centerInput}),r.a.createElement(Er,{id:"standard-basic",label:"Your job",className:d.textField,value:o?o.job:"",onChange:function(e){return u(e.target.value,"job")},InputProps:{className:d.input}}),r.a.createElement(Er,{id:"standard-basic",label:"Status",className:d.textField,value:o?o.status:"",onChange:function(e){return u(e.target.value,"status")},InputProps:{className:d.input}}),r.a.createElement("div",{className:d.actionButton},r.a.createElement(br,{onClick:f},"Save"),r.a.createElement(gr,{onClick:function(){e.handlePopup(!1)}},"Cancel")))))))},xr=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handlePopup=function(){n.setState({isOpenPopup:!n.state.isOpenPopup})},n.handleUpdate=function(){var e=Object(rr.a)(nr.a.mark((function e(t){return nr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({data:Object(h.a)(Object(h.a)({},n.state.data),t),isOpenPopup:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleNotification=function(e){"success"?window.location.reload():hr({type:"danger",title:"Update faild",message:"All your data has been update failed! Try again."})},n.state={data:null,isOpenPopup:!1},n}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.isOpenPopup,n=t.data;return r.a.createElement(r.a.Fragment,null,"edit"==this.props.permission?r.a.createElement(wr,{isOpen:a,handlePopup:this.handlePopup,handleUpdate:this.handleUpdate,data:n||null,handleNotification:this.handleNotification}):null,r.a.createElement("div",{className:e.wrap},r.a.createElement(v.a,{container:!0,className:e.container},r.a.createElement(v.a,{item:!0,xs:12,sm:4},r.a.createElement("div",{className:e.avatar},r.a.createElement("img",{src:(null===n||void 0===n?void 0:n.avatar)?n.avatar:ir.a,className:e.avatarImg}))),r.a.createElement(v.a,{item:!0,xs:12,sm:8,className:e.contentWrapper},r.a.createElement("div",null,r.a.createElement("p",{className:e.displayName},n?n.displayName:"Loading..."),r.a.createElement("p",{className:e.job},n?n.job:null),r.a.createElement("p",{className:e.status},n?n.status:"Please wait")))),"edit"==this.props.permission?r.a.createElement(w.a,{className:e.editBtn,onClick:this.handlePopup},r.a.createElement(on.a,null)):null))}}]),a}(n.Component),Or=Object(C.a)(lr)(xr),Cr=a(112),yr=a(501),jr=a(455),kr={container:Object(h.a)(Object(h.a)({},G),{},{background:"#292E38",paddingBottom:"0"}),title:{color:"#fff",margin:"2rem 0"},noPostsButton:{color:"orange",borderColor:"orange",marginBottom:"32px",textTransform:"none","&:hover":{color:"#f57c00"}}},Nr={container:Object(h.a)(Object(h.a)({},G),{},{backgroundColor:"#313947",color:H,fontSize:"0.9rem","@media (max-width: 600px)":{padding:"0 8px"},"@media (min-width: 1440px)":{padding:"0 16px"}}),roomWrapper:{backgroundColor:"#313947",paddingTop:"24px"},text:{color:H},leftSliderWrapper:{position:"sticky",top:"1em",height:"calc(100vh - 1em)",overflowY:"auto","&::-webkit-scrollbar":{display:"none"},MsOverflowStyle:"none"},leftHeader:{color:H,fontWeight:500,fontSize:"1.2em"},leftSecondary:{fontSize:"0.8em",color:"#00a152"},listIcon:{},active:{background:"rgb(0,0,0,0.3)"},postWrapper:{marginBottom:"1em"},secondaryText:{color:"#8F8F8F",marginLeft:"0.4em",fontSize:"0.8rem",fontStyle:"italic"},timeText:{color:"#8F8F8F",fontSize:"0.75rem",marginLeft:"0.15em"},headerIcon:{marginLeft:"-1px",marginRight:"3px",fontSize:"1rem"},userName:{fontWeight:"bold",fontSize:"1rem"},avatarLg:{height:"50px",width:"50px",backgroundColor:"#00a152"},cardHeader:{"@media (max-width: 600px)":{padding:"8px"}},cardContent:{"@media (max-width: 600px)":{padding:"8px"}},cardActions:{"@media (max-width: 600px)":{padding:"0 8px"}},postContent:{fontSize:"0.9rem",marginTop:"0.5em","& a":{color:H,fontWeight:"bold"},"& img":{maxWidth:"100%"}},btnLink:{textTransform:"none",fontSize:"0.9rem"},bgPrimary:{backgroundColor:"#292E38",color:H},bgSecondary:{backgroundColor:"#313947",color:H},bgLight:{backgroundColor:"rgba(255,255,255,.9)"},bgFeed:{backgroundColor:"#1D1D1D"},avatarDot:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat("#292E38"),"&::after":{position:"absolute",content:'""',top:-1,left:-1,width:"100%",height:"100%",borderRadius:"50%",border:"1px solid #fff",animation:"$ripple 1.2s infinite ease-in-out"}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2)",opacity:0}},commentInput:{marginLeft:"8px",color:H,boxSizing:"border-box"},commentInputText:{color:"rgba(255,255,255,.9)",fontSize:"1em"},commentInputIcon:{marginRight:"-0.5em"},commentContainer:{width:"100%",padding:"0.4em 15px",boxSizing:"border-box",backgroundColor:"#313947",color:"rgba(255,255,255,.8)","&:last-child":{paddingBottom:"0.8em"},"@media (max-width: 600px)":{paddingLeft:"8px",paddingRight:"8px"}},comment:{position:"relative",backgroundColor:"#1D1D1D",padding:"0.5em 1em",marginLeft:"6px",borderRadius:"0 12px 12px 12px"},commentContent:{fontSize:"0.86em",margin:"0.4em 0"},moreIcon:{position:"absolute",right:0},commentOwnerIcon:{margin:"0 0.15em 0 -0.15em"},commentAdminIcon:{margin:"0 0.15em 0 -0.1em"},commentReportBtn:{position:"absolute",top:0,right:0,transform:" translateX(10%)"},blockedComment:{display:"flex",justifyContent:"center",alignItems:"center",padding:"1em 0",fontSize:"0.8rem",color:"#f74033db"},blockedIcon:{marginRight:"2px"},rightWrapper:{position:"sticky",top:"0.8em","@media (max-width: 600px)":{position:"static",marginBottom:"16px"}},btnNewPost:{textTransform:"none",marginBottom:"1em",width:"100%",backgroundColor:"#f57c00",borderRadius:"9999px",color:H},thumbnailBg:{backgroundColor:"#1D1D1D",height:"4.5em",borderBottom:"4px solid ".concat("#313947")},boxWrapper:{padding:0,height:"8em"},userBox:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",position:"relative",top:"-3.5em"},userBox_name:{fontWeight:"600",fontSize:"1.6rem"},userBox_text:{fontSize:"0.9rem"},userBox_link:{textTransform:"none",padding:"1em",color:"#f57c00"},avatarXl:{width:"5em",height:"5em",backgroundColor:"#00a152",border:"4px solid ".concat("#313947")}},Sr=function(e){return r.a.createElement(we.a,{title:"Admin only"},r.a.createElement(k.a,{component:"span",onClick:function(){re.post("/posts/block",{postId:e.postId}).then((function(t){e.handleClosePopover(),window.fetchPosts()})).catch((function(e){return console.log(e)}))},button:!0,disabled:!U()},r.a.createElement(I.a,{className:e.classes.listPostItem},r.a.createElement(nn.a,null)),r.a.createElement(P.a,null,"Block comments")))},Ir=function(e){return r.a.createElement(we.a,{title:"Admin only"},r.a.createElement(k.a,{component:"span",onClick:function(){re.post("/posts/unblock",{postId:e.postId}).then((function(t){e.handleClosePopover(),window.fetchPosts()})).catch((function(e){return console.log(e)}))},button:!0,disabled:!U()},r.a.createElement(I.a,{className:e.classes.listPostItem},r.a.createElement(rn.a,null)),r.a.createElement(P.a,null,"Unblock comments")))},Pr=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleConfirmPopup=function(){n.setState({isOpenConfirm:!n.state.isOpenConfirm})},n.handleClickDelete=function(){A()?n.toggleConfirmPopup():window.handlePopup("login")},n.handleConfirmDelete=function(e){n.toggleConfirmPopup();var t=n.props.postId;"yes"===e&&re.delete("/posts/".concat(t)).then((function(e){window.fetchPosts()})).catch((function(e){return console.log(e)}))},n.togglePopup=function(){if(!A())return window.handlePopup("login");n.setState({isOpenPopup:!n.state.isOpenPopup})},n.isOwner=function(){var e=n.props.userId;return F()&&F()._id===e},n.state={isOpenConfirm:!1,isOpenPopup:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.postId,n=e.userId,o=e.isBlocked;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{open:!!this.props.popoverAnchor,anchorEl:this.props.popoverAnchor,onClose:this.props.handleClosePopover,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(S.a,{className:t.list},r.a.createElement(k.a,{button:!0,onClick:this.togglePopup,disabled:!_(n)},r.a.createElement(I.a,{className:t.listPostItem},r.a.createElement(on.a,null)),r.a.createElement(P.a,null,"Update")),r.a.createElement(hn,{isOpen:this.state.isOpenPopup,onClose:this.togglePopup,postId:a}),r.a.createElement(k.a,{button:!0,onClick:this.handleClickDelete,disabled:!_(n)},r.a.createElement(I.a,{className:t.listPostItem},r.a.createElement(ln.a,null)),r.a.createElement(P.a,null,"Delete")),o?r.a.createElement(Ir,{classes:t,postId:a,handleClosePopover:this.props.handleClosePopover}):r.a.createElement(Sr,{classes:t,postId:a,handleClosePopover:this.props.handleClosePopover}))),r.a.createElement(mn,{isOpen:this.state.isOpenConfirm,handleClose:this.handleConfirmDelete}))}}]),a}(n.Component),Dr=Object(C.a)(Z)(Pr),Lr=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).togglePostOptions=function(e){n.setState({popoverAnchor:e.currentTarget})},n.handleClosePopover=function(){n.setState({popoverAnchor:null})},n.state={popoverAnchor:null},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.post;return r.a.createElement(en.a,{className:t.cardHeader,avatar:r.a.createElement(O.a,{className:t.avatarLg,src:a?a.user.avatar:"",alt:a?a.user.display_name:""}),title:r.a.createElement(ve.a,{verticalAlign:"middle"},r.a.createElement("strong",{className:t.userName},a?a.user.display_name:"Display name"),r.a.createElement("span",{className:t.secondaryText},a?Ra(a.user.email):"@example")),subheader:r.a.createElement(ve.a,{display:"flex",alignItems:"center",className:t.text},r.a.createElement(tn.a,{className:t.headerIcon}),r.a.createElement(Ne.a,{component:"span",className:t.timeText},a?se(a.created_at):"unknown")),action:r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{className:t.text,onClick:this.togglePostOptions},r.a.createElement(an.a,null)),r.a.createElement(Dr,{popoverAnchor:this.state.popoverAnchor,handleClosePopover:this.handleClosePopover,postId:a.id,userId:a.user.id,isBlocked:a.comment_blocked}))})}}]),a}(n.Component),Wr=Object(C.a)(ya)(Lr),Br=function(e){var t=e.classes;return r.a.createElement(we.a,{title:"Post owner",arrow:!0,interactive:!0,placement:"left-end"},r.a.createElement(Fn.a,{fontSize:"small",className:t.commentOwnerIcon}))},Tr=function(e){var t=e.classes;return r.a.createElement(we.a,{title:"Administrator",arrow:!0,interactive:!0,placement:"left-end"},r.a.createElement(Rn.a,{fontSize:"small",className:t.commentAdminIcon}))},Fr=function(e){var t=Object(n.useState)(!1),a=Object(Bn.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)(!1),i=Object(Bn.a)(s,2),c=i[0],m=i[1],p=e.classes;return r.a.createElement(ve.a,{component:"span",className:p.moreIcon},r.a.createElement(we.a,{open:o,onClose:function(){return l(!1)},disableTouchListener:!0,disableHoverListener:!0,title:r.a.createElement(Tn.a,{variant:"text"},r.a.createElement(w.a,{className:p.btnLink,size:"small",color:"inherit",startIcon:r.a.createElement(on.a,null),onClick:function(){e.handleUpdateComment()},disabled:U()},"Update"),r.a.createElement(w.a,{className:p.btnLink,size:"small",color:"inherit",startIcon:r.a.createElement(ln.a,null),onClick:function(){m(!0)}},"Delete")),arrow:!0,interactive:!0},r.a.createElement(xe.a,{color:"inherit",size:"small",onClick:function(){return l(!o)}},r.a.createElement(an.a,null))),r.a.createElement(mn,{isOpen:c,handleClose:function(t){m(!1),"yes"===t&&e.handleDeleteComment()}}))},Rr=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).isOwnComment=function(){var e=n.props.comment,t=F();return t&&e.user_id===t._id},n.toggleReportPopup=function(){n.setState({isOpenReport:!n.state.isOpenReport})},n.state={isOpenOption:!1,isOpenReport:!1,shownReportBtn:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props,n=a.comment,o=a.isFromOwner,l=a.isFromAdmin,s=a.postId;return r.a.createElement(v.a,{container:!0,className:t.commentContainer},r.a.createElement(v.a,{container:!0,sm:1,xs:2,justify:"center"},r.a.createElement(O.a,{component:g.a,to:"/wall/".concat(n.user_id),src:n&&n.user.avatar,alt:n&&n.user.display_name})),r.a.createElement(v.a,{item:!0,sm:11,xs:10},r.a.createElement(ve.a,{className:t.comment,onMouseEnter:function(){return e.setState({shownReportBtn:!0})},onMouseLeave:function(){return e.setState({shownReportBtn:!1})}},r.a.createElement(Ne.a,null,r.a.createElement("strong",{className:t.userName},n?n.user.display_name:"Display name"),r.a.createElement("small",{className:t.secondaryText},n?Ra(n.user.email):"@example"),_(n.user_id)?r.a.createElement(Fr,{classes:t,handleUpdateComment:function(){return e.props.onUpdateComment(n)},handleDeleteComment:function(){return e.props.onDeleteComment(n.id)}}):this.state.shownReportBtn&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{color:"inherit",className:t.commentReportBtn,onClick:this.toggleReportPopup},r.a.createElement(zn.a,{fontSize:"small"})),r.a.createElement(Wn,{isOpen:this.state.isOpenReport,onClose:this.toggleReportPopup,commentId:n.id,postId:s,type:"comment"})),r.a.createElement(ve.a,{display:"flex",alignItems:"center",className:t.timeText},o&&r.a.createElement(Br,{classes:t}),l&&r.a.createElement(Tr,{classes:t}),r.a.createElement(ve.a,null,n?se(n.created_at):"long time ago")),r.a.createElement(Ne.a,{className:t.commentContent},n&&n.content)))))}}]),a}(n.Component),zr=Object(C.a)(Nr)(Rr),Ar=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).cancelUpdateMode=function(){n.props.cancelUpdateMode(),n.setState({isUpdateCommentMode:!1,commentContent:""})},n.handleSendComment=function(e){if(e.preventDefault(),!A())return window.handlePopup("login");n.state.isUpdateCommentMode?n.updateCommentAPI():n.addNewCommentAPI()},n.addNewCommentAPI=function(){var e=n.state.commentContent;console.log("New",e,n.props),re.post("/comments",{postID:n.props.postId,content:e,type:n.props.type||"post"}).then((function(e){n.props.refreshComments(e.data.comments),n.setState({commentContent:""})})).catch((function(e){return console.log(e)}))},n.updateCommentAPI=function(){var e=n.props.needUpdateComment.id;re.put("/comments/".concat(e),{content:n.state.commentContent,type:n.props.type||"post"}).then((function(e){n.props.refreshComments(e.data.comments),n.cancelUpdateMode()})).catch((function(e){return console.log(e)}))},n.state={commentContent:"",isUpdateCommentMode:!1},n.commentInputRef=r.a.createRef(),n}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.needUpdateComment;e.needUpdateComment!==t&&t&&(this.commentInputRef.current.focus(),this.setState({isUpdateCommentMode:!0,commentContent:t.content}))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.commentContent,n=F();return r.a.createElement(v.a,{container:!0,className:t.container,alignItems:"center"},r.a.createElement(v.a,{item:!0,sm:1,xs:2,container:!0,justify:"center"},r.a.createElement(Yn.a,{overlap:"circle",variant:"dot",color:"primary",anchorOrigin:{vertical:"bottom",horizontal:"right"},classes:{badge:t.avatarDot}},r.a.createElement(O.a,{src:n&&n.avatar,alt:n&&n.display_name}))),r.a.createElement(v.a,{item:!0,sm:11,xs:10,container:!0,alignItems:"center"},r.a.createElement(On.a,{component:"form",fullWidth:!0,onSubmit:this.handleSendComment},r.a.createElement(kn.a,{className:t.commentInput,inputRef:this.commentInputRef,variant:"outlined",label:"Enter your comment...",size:"small",value:a,required:!0,onChange:function(t){return e.setState({commentContent:t.target.value})},InputProps:{endAdornment:r.a.createElement(Gn.a,{position:"end"},r.a.createElement(xe.a,{type:"submit",color:"primary",className:t.commentInputIcon},r.a.createElement(qn.a,null)),this.state.isUpdateCommentMode&&r.a.createElement(xe.a,{color:"secondary",className:t.commentInputIcon,onClick:this.cancelUpdateMode},r.a.createElement(Kn.a,null))),className:t.commentInputText},InputLabelProps:{required:!1}}))))}}]),a}(n.Component),Mr=Object(C.a)(Nr)(Ar),Ur=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(m.a)(this,a),(n=t.call(this,e)).checkLiked=function(e){var t=F();return!(!e||!t)&&e.likes.some((function(e){return e.user_id===t._id}))},n.toggleLike=function(){if(!A())return window.handlePopup("login");re.post("/likes",{postID:n.state.post.id}).then((function(e){n.setState({likesNum:e.data.likes})})).catch((function(e){return console.log(e)})),n.setState({liked:!n.state.liked})},n.handleRefreshComments=function(e){var t=n.state.post;t.comments=e,n.setState({post:t})},n.handleUpdateComment=function(e){n.setState({needUpdateComment:e})},n.handleDeleteComment=function(e){re.delete("/comments/".concat(e)).then((function(e){n.handleRefreshComments(e.data.comments)})).catch((function(e){return console.log(e)}))},n.toggleReportPopup=function(){n.setState({isOpenReport:!n.state.isOpenReport})},n.toggleShadow=function(){n.setState({isShadow:!n.state.isShadow})};var r=n.props.post;return n.state={isExpanded:!0,liked:!1,likesNum:r.likes.length,commentsNum:r.comments.length,isOpenReport:!1,needUpdateComment:null,isShadow:!1,post:n.props.post,isLogin:!0,comment:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({})}},{key:"componentDidUpdate",value:function(e,t){if(this.state.post){var a=this.state.post.comments;t.commentsNum!==(null===a||void 0===a?void 0:a.length)&&this.setState({commentsNum:null===a||void 0===a?void 0:a.length}),A()||!0!==this.state.liked||this.setState({liked:!1,isLogin:!1}),A()&&A()!==this.state.isLogin&&this.setState({isLogin:!0,liked:this.checkLiked(this.state.post)})}}},{key:"render",value:function(){var e,t=this,a=this.props.classes,n=this.state,o=n.post,l=n.liked,s=n.isShadow;return r.a.createElement(r.a.Fragment,null,this.state.post?r.a.createElement(ve.a,{className:a.postWrapper},r.a.createElement(je.a,{className:a.bgSecondary,raised:s,onMouseEnter:this.toggleShadow,onMouseLeave:this.toggleShadow},r.a.createElement(Wr,{post:o}),r.a.createElement(D.a,null),r.a.createElement(Ia.a,{className:a.cardContent},r.a.createElement(Ne.a,{className:a.postContent,dangerouslySetInnerHTML:{__html:o.content}})),r.a.createElement(D.a,null),r.a.createElement(Pa.a,{className:a.cardActions},r.a.createElement(v.a,{container:!0,className:a.container},r.a.createElement(v.a,{item:!0,container:!0,justify:"flex-start",xs:3},r.a.createElement(w.a,{className:a.btnLink,color:l?"primary":"inherit",onClick:this.toggleLike,startIcon:r.a.createElement(Za.a,null)},this.state.likesNum,r.a.createElement(tt.a,{only:"xs"}," Likes"))),r.a.createElement(v.a,{item:!0,container:!0,justify:"center",xs:4},r.a.createElement(w.a,{className:a.btnLink,color:"inherit",startIcon:r.a.createElement(Qa.a,null),onClick:function(){return t.setState({isExpanded:!t.state.isExpanded})}},this.state.commentsNum,r.a.createElement(tt.a,{only:"xs"}," Comments"))),r.a.createElement(v.a,{item:!0,container:!0,justify:"center",xs:4},r.a.createElement($a.a,{url:"https://covid-forum.tech"},r.a.createElement(w.a,{color:"inherit",className:a.btnLink,startIcon:r.a.createElement(Xa.a,null)},r.a.createElement(tt.a,{only:"xs"},"Share")))),r.a.createElement(v.a,{item:!0,container:!0,justify:"flex-end",xs:1},r.a.createElement(xe.a,{color:"inherit",className:a.btnLink,onClick:this.toggleReportPopup},r.a.createElement(we.a,{title:"Report this post",arrow:!0,placement:"top"},r.a.createElement(Ja.a,null))),r.a.createElement(Wn,{isOpen:this.state.isOpenReport,onClose:this.toggleReportPopup,postId:o.id,type:"post"})))),r.a.createElement(Ka.a,{in:this.state.isExpanded,timeout:"auto",unmountOnExit:!0},r.a.createElement(D.a,null),o.comment_blocked?r.a.createElement(Ne.a,{className:a.blockedComment},r.a.createElement(Va.a,{className:a.blockedIcon}),"Comment blocked by Admin"):r.a.createElement(ve.a,{py:1,className:a.bgSecondary},r.a.createElement(Mr,{postId:o.id,refreshComments:this.handleRefreshComments,needUpdateComment:this.state.needUpdateComment,cancelUpdateMode:function(){return t.setState({needUpdateComment:null})}})),r.a.createElement(D.a,null),o&&(null===o||void 0===o||null===(e=o.comments)||void 0===e?void 0:e.map((function(e){return r.a.createElement(zr,{key:e.id,comment:e,postId:o.id,isFromOwner:o.user_id===e.user_id,isFromAdmin:"admin"===e.user.role,onUpdateComment:t.handleUpdateComment,onDeleteComment:t.handleDeleteComment})})))))):null)}}]),a}(n.Component),_r=Object(C.a)(Nr)(Ur),Hr={background:{backgroundColor:"#292E38",width:"100%",height:"100%",padding:0,margin:0}},Yr=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.background},"kajslfka")}}]),a}(n.Component);Object(mr.a)(Hr)(Yr),Object(mr.a)((function(e){return{root:{color:"#fff",background:"#313947",borderBottom:"none",padding:"0 15% ",width:"70%",transition:"cubic-bezier(.17,.67,.87,.48)"},indicator:{backgroundColor:"#292E38"}}}))(yr.a),Object(mr.a)((function(e){return{root:{color:"#fff",textTransform:"none",minWidth:"300px",borderBottom:"none",transition:"cubic-bezier(.17,.67,.87,.48)","&:hover":{background:"#3a4352"},"&$selected":{color:"#fff",background:"#292E38",borderBottom:"none"},"&:focus":{color:"#fff"}},selected:{}}}))((function(e){return r.a.createElement(jr.a,e)}));var Gr=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleTabChange=function(e,t){n.setState({tabsIndex:t})},n.state={permission:n.props.permission,tabsIndex:0,posts:null,isLoading:!0},n}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({posts:e.userPosts})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.posts,n=t.isLoading;return r.a.createElement("div",{className:e.container},r.a.createElement(D.a,null),r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{item:!0,sm:3}),r.a.createElement(v.a,{item:!0,sm:6},r.a.createElement("h3",{className:e.title},"Recent posts")),r.a.createElement(v.a,{item:!0,sm:3})),r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{item:!0,sm:3}),r.a.createElement(v.a,{item:!0,sm:6},n&&!a?r.a.createElement(gt,null):r.a.createElement(r.a.Fragment,null,a.length?a.map((function(e){return r.a.createElement(_r,{key:e.id,post:e})})):r.a.createElement(w.a,{variant:"outlined",className:e.noPostsButton},"There are no posts to show!"))),r.a.createElement(v.a,{item:!0,sm:3})))}}]),a}(n.Component),qr=Object(mr.a)(kr)(Gr),Kr=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).fetchProfile=function(){var e=window.location.pathname.split("/")[2];(!e||A()&&e==F()._id)&&n.setState({permission:"edit"}),!e&&A()&&(e=F()._id),n.setState({userId:e,data:null}),re.get("/profile/".concat(e)).then((function(e){var t,a=e.data.user;console.log(e),n.setState({data:{avatar:a.avatar,createOn:a.created_at,displayName:a.display_name,status:a.status,job:null===(t=e.data.user.profile)||void 0===t?void 0:t.overview.job,posts:a.posts}})})).catch((function(e){return c.push("/404",{errorCode:404})}))},n.state={isLogin:!!sessionStorage.user,permission:"view",userId:null},window.fetchPosts=n.fetchProfile.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.fetchProfile(),c.listen((function(t){t.pathname.startsWith("/wall")&&(e.setState({data:null}),e.fetchProfile())}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ur.a,null),r.a.createElement(Te,{isLogin:function(t){return e.setState({isLogin:t})}}),r.a.createElement(Or,{data:this.state.data?this.state.data:null,permission:this.state.permission}),r.a.createElement(qr,{permission:this.state.permission,userId:this.state.userId,userPosts:this.state.data?this.state.data.posts:null}))}}]),a}(n.Component),Zr=Kr,Qr=ya.avatarLg,Xr=ya.text,Jr=ya.secondaryText,Vr=ya.userName,$r=ya.timeText,eo=ya.headerIcon,to={text:Xr,secondaryText:Jr,userName:Vr,timeText:$r,headerIcon:eo,secondaryBg:{backgroundColor:"#313947"},avatarLg:Object(h.a)(Object(h.a)({},Qr),{},{border:"2px solid #2E83F2"}),pageWrapper:{backgroundColor:"#313947",padding:"2em 0"},gridWrapper:{"@media (max-width: 600px)":{padding:"8px",marginTop:"-16px"}},leftWrapper:{backgroundColor:"#292E38",color:H,padding:"1.2em",marginBottom:"0.6em","@media (max-width: 600px)":{padding:"8px"}},rightWrapper:{backgroundColor:"#292E38",color:H,paddingLeft:"1.2em",paddingBottom:"0.6em",marginBottom:"1em"},newsHeader:{fontSize:"1.8rem",fontWeight:"700","@media (max-width: 600px)":{fontSize:"1.4rem"}},subheaderWrapper:{display:"flex",flexWrap:"wrap"},newsSubheader:{color:H,display:"flex",whiteSpace:"nowrap",alignItems:"center",marginTop:"0.3em","&:not(:first-child):before":{content:'"\u2022"',fontSize:"0.7rem",margin:"0 0.6em"}},newsThumbnail:{width:"100%",marginBottom:"1em",border:"1px solid #696969",borderRadius:"2px","&:hover":{boxShadow:"0 0 2px 2px rgba(0, 140, 186, 0.5)"}},newsContent:{paddingTop:"1em","& a":{color:H,fontWeight:"450"},"& img, & iframe":{objectFit:"contain",maxWidth:"100%",padding:0,display:"block",margin:"0.6em auto",textAlign:"center"},"& img":{borderRadius:"4px"}},btnComments:{textTransform:"none"},btnCommentsToggle:{margin:"0 15px","@media (max-width: 600px)":{margin:"0 8px"}},commentBoxWrapper:{padding:"8px 0",marginTop:"6px"},"@media (max-width: 600px)":{cardHeader:{padding:"8px"},cardContent:{padding:"8px"}}},ao=to,no=a(464),ro=a(465),oo=a(191),lo=a.n(oo),so=a(506),io=a(457),co=a(456),mo=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleConfirm=function(){n.setState({openConfirm:!n.state.openConfirm})},n.handleCloseConfirm=function(e){if("yes"===e){var t=n.props.newsId;re.delete("/news/".concat(t)).then((function(e){console.log(e.data),c.goBack()})).catch((function(e){return console.log(e)}))}},n.handleBlockNews=function(){},n.state={openConfirm:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.newsId,n=e.userId;return r.a.createElement(N.a,{open:!!this.props.popoverAnchor,anchorEl:this.props.popoverAnchor,onClose:this.props.handleClosePopover,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(S.a,{className:t.list},r.a.createElement(k.a,{button:!0,component:g.a,to:"/news/".concat(a,"/update")},r.a.createElement(I.a,{className:t.listPostItem},r.a.createElement(on.a,null)),r.a.createElement(P.a,null,"Update")),r.a.createElement(k.a,{button:!0,onClick:this.toggleConfirm,disabled:!_(n)},r.a.createElement(I.a,{className:t.listPostItem},r.a.createElement(ln.a,null)),r.a.createElement(P.a,null,"Delete"),r.a.createElement(mn,{isOpen:this.state.openConfirm,handleClose:this.handleCloseConfirm}))))}}]),a}(n.Component),po=Object(C.a)(Z)(mo),uo={flexContainer:{display:"flex"},wrapper:{flexGrow:1,paddingBottom:"0 !important","@media (max-width: 600px)":{padding:"8px"}},action:{padding:0,overflow:"visible",width:"2em",marginTop:"8px"},separator:{color:H},link:{fontWeight:"500",cursor:"pointer",color:"#f57c00"},currentLink:{fontWeight:"700",color:"#f57c00"}},ho=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleNewsOption=function(e){n.setState({popoverAnchor:e.currentTarget})},n.handleClosePopover=function(){n.setState({popoverAnchor:null})},n.state={popoverAnchor:null},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.props,a=t.room,n=t.news;return r.a.createElement(v.a,{className:e.flexContainer},r.a.createElement(Ia.a,{className:e.wrapper},r.a.createElement(so.a,{separator:r.a.createElement(co.a,{className:e.separator})},r.a.createElement(io.a,{className:e.link,component:g.a,to:"/"},"Home"),r.a.createElement(io.a,{className:e.link,component:g.a,to:"/discussion"},"Discussion"),r.a.createElement(io.a,{className:e.currentLink,component:g.a,to:"/room/".concat(a.name,"/news")},"[",a&&a.name,"] News"))),_(n.user_id)&&r.a.createElement(Pa.a,{className:e.action},r.a.createElement(xe.a,{size:"small",color:"inherit",onClick:this.toggleNewsOption},r.a.createElement(an.a,null)),r.a.createElement(po,{popoverAnchor:this.state.popoverAnchor,handleClosePopover:this.handleClosePopover,newsId:n.id,userId:n.user_id})))}}]),a}(n.Component),fo=Object(C.a)(uo)(ho),go=a(458),bo=a(459),Eo=a(460),vo=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.props,a=t.news,n=t.commentsNum,o=t.viewsNum;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ia.a,{className:e.cardContent},r.a.createElement(Ne.a,{className:e.newsHeader},a?a.header:"Lorem ipsum, dolor sit amet consectetur adipisicing elit.")),r.a.createElement(D.a,null),r.a.createElement(en.a,{className:e.cardHeader,avatar:r.a.createElement(O.a,{className:e.avatarLg,src:a.user?a.user.avatar:"",alt:a.user?a.user.display_name:""}),title:r.a.createElement(ve.a,null,r.a.createElement("strong",{className:e.userName},a.user?a.user.display_name:"Display name"),r.a.createElement("span",{className:e.secondaryText},a.user?Ra(a.user.email):"@example")),subheader:r.a.createElement(ve.a,{className:e.subheaderWrapper},r.a.createElement(ve.a,{className:e.newsSubheader},r.a.createElement(go.a,{className:e.headerIcon,color:"inherit"}),r.a.createElement(Ne.a,{component:"span",className:e.timeText},a?ie(a.created_at):"unknown")),r.a.createElement(tt.a,{only:"xs"},r.a.createElement(ve.a,{className:e.newsSubheader},r.a.createElement(bo.a,{className:e.headerIcon,color:"inherit"}),r.a.createElement(Ne.a,{component:"span",className:e.timeText},n," comments"))),r.a.createElement(ve.a,{className:e.newsSubheader},r.a.createElement(Eo.a,{className:e.headerIcon,color:"inherit"}),r.a.createElement(Ne.a,{component:"span",className:e.timeText},o," views")))}))}}]),a}(n.Component),wo=Object(C.a)(ao)(vo),xo=a(461),Oo=a(462),Co=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleReportPopup=function(){n.setState({isOpenReport:!n.state.isOpenReport})},n.state={isOpenReport:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.likesNum;return r.a.createElement(Pa.a,{className:t.wrapper},r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{container:!0,sm:!0,xs:9,justify:"flex-start",spacing:1},r.a.createElement(v.a,{item:!0},r.a.createElement(w.a,{className:t.btnLike,color:"primary",variant:"contained",startIcon:r.a.createElement(xo.a,{className:t.blueText}),onClick:this.props.toggleLike},a," Likes")),r.a.createElement(v.a,{item:!0},r.a.createElement($a.a,{url:"https://covid-forum.tech"},r.a.createElement(w.a,{className:t.btnShare,color:"inherit",variant:"outlined",startIcon:r.a.createElement(ee.a,null)},"Share this post")))),r.a.createElement(v.a,{container:!0,sm:!0,xs:3,justify:"flex-end"},r.a.createElement(w.a,{className:t.btnReport,color:"secondary",variant:"outlined",startIcon:r.a.createElement(Oo.a,null),onClick:this.toggleReportPopup},"Report"),r.a.createElement(Wn,{isOpen:this.state.isOpenReport,onClose:this.toggleReportPopup,newsId:this.props.newsId,type:"news"}))))}}]),a}(n.Component),yo=Object(C.a)({wrapper:{padding:"0 1rem","@media (max-width: 600px)":{padding:"0 8px"}},btnLike:{textTransform:"none"},btnShare:{textTransform:"none",color:"#A2F6FF",whiteSpace:"nowrap"},btnReport:{textTransform:"none","@media (max-width: 424px)":{margin:"16px -4px",fontSize:"0.8rem"}}})(Co),jo=a(463),ko={slideWrapper:{margin:"0 4px"},slideBg:{},sectionHeader:{fontSize:"1.3rem",fontWeight:"500",borderLeft:"4px solid ".concat("#2D88FF"),paddingLeft:"10px",margin:"0 0 12px 4px"},textWrapper:{padding:"6px 8px 0",minHeight:"3.9rem"},slideTitle:{fontSize:"0.9rem",fontWeight:"500",textAlign:"left",display:"-webkit-box",overflow:"hidden",textOverflow:"hidden",lineClamp:"3",boxOrient:"vertical"},authorWrapper:{paddingTop:"4px",paddingBottom:"5px"},avatarSm:{width:"1.2em",height:"1.2em",border:"1px solid ".concat("#2D88FF")},displayName:{fontWeight:"600",color:"#1464D2",fontSize:"0.7rem"},actionWrapper:{display:"flex",alignItems:"center",fontSize:"0.8rem",fontWeight:500,color:"#5f5f5f"},actionIcon:{marginRight:"3px"}},No=function(e){var t=e.classes,a=e.news;return r.a.createElement(ye.a,{className:t.slideWrapper,component:g.a,to:"/news/".concat(a._id)},r.a.createElement(je.a,{title:a.header,className:t.slideBg},r.a.createElement(jo.a,null,r.a.createElement(ke.a,{className:"slick-image",component:"img",image:a.thumbnail}),r.a.createElement(D.a,null),r.a.createElement(Ia.a,{className:t.textWrapper},r.a.createElement(Ne.a,{className:t.slideTitle},a.header)),r.a.createElement(Pa.a,{className:t.authorWrapper},r.a.createElement(O.a,{src:a.user.avatar,className:t.avatarSm}),r.a.createElement("small",null,"by"," ",r.a.createElement("span",{className:t.displayName},a.user.display_name))),r.a.createElement(D.a,null),r.a.createElement(Pa.a,null,r.a.createElement(v.a,{container:!0,justify:"space-between"},r.a.createElement(v.a,{item:!0,className:t.actionWrapper},r.a.createElement(go.a,{fontSize:"small",className:t.actionIcon}),ce(a.created_at)),r.a.createElement(v.a,{item:!0,className:t.actionWrapper},r.a.createElement(Eo.a,{fontSize:"small",className:t.actionIcon}),pe(a.views)))))))},So=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={list:[],isLoading:!0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;re.get("/news/random").then((function(t){e.setState({list:t.data.news,isLoading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.props.classes,t={slidesToShow:4,autoplay:!0,responsive:[{breakpoint:600,settings:{slidesToShow:2}}]};return this.state.isLoading?r.a.createElement(gt,null):r.a.createElement("div",null,r.a.createElement(Ne.a,{className:e.sectionHeader},"Other posts"),r.a.createElement(ze.a,t,this.state.list.map((function(t){return r.a.createElement(No,{key:t._id,news:t,classes:e})}))))}}]),a}(n.Component),Io=Object(C.a)(ko)(So),Po=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleToggleLike=function(){re.post("/likes",{postID:n.state.news.id,type:"news"}).then((function(e){n.setState({likesNum:e.data.likes})})).catch((function(e){return console.log(e)}))},n.handleUpdateComment=function(e){n.setState({needUpdateComment:e})},n.handleDeleteComment=function(e){re.delete("/comments/".concat(e,"?type=news")).then((function(e){n.handleRefreshComments(e.data.comments)})).catch((function(e){return console.log(e)}))},n.handleRefreshComments=function(e){var t=n.state.news;t.comments=e,n.setState({news:t})},n.toggleComments=function(){n.setState({isCommentsShown:!n.state.isCommentsShown})},n.state={news:{},needUpdateComment:null,isLoading:!0,isCommentsShown:!0,commentsNum:0,likesNum:0,viewsNum:0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.fetchNews(),c.listen((function(){e.setState({isLoading:!0}),e.fetchNews()}))}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.news.comments;a&&t.commentsNum!==a.length&&this.setState({commentsNum:a.length})}},{key:"fetchNews",value:function(){var e=this;window.scrollTo(0,0);var t=c.location.pathname;re.get(t).then((function(t){var a=t.data.news;e.setState({news:a,isLoading:!1,commentsNum:a.comments.length,likesNum:a.likes.length,viewsNum:a.views})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.news,o=a.isLoading,l=a.likesNum,s=a.commentsNum,i=a.viewsNum,c=this.state.isCommentsShown;return o?r.a.createElement(gt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(je.a,{className:t.secondaryBg},r.a.createElement(Xt.a,{elevation:3,className:t.leftWrapper},r.a.createElement(fo,{room:n.room,news:n}),r.a.createElement(wo,{news:n,commentsNum:s,viewsNum:i}),r.a.createElement(D.a,null),r.a.createElement(Ia.a,{className:t.cardContent},r.a.createElement(ke.a,{className:t.newsThumbnail,component:"img",image:n.thumbnail?n.thumbnail:lo.a}),r.a.createElement(D.a,null),r.a.createElement(Ne.a,{className:t.newsContent,dangerouslySetInnerHTML:{__html:n.content}})),r.a.createElement(yo,{likesNum:l,toggleLike:this.handleToggleLike,newsId:n.id}))),r.a.createElement(Xt.a,{elevation:2,className:t.leftWrapper},r.a.createElement(Io,null)),r.a.createElement(Xt.a,{elevation:2,className:t.leftWrapper},r.a.createElement(ve.a,{className:t.btnCommentsToggle},r.a.createElement(w.a,{color:"primary",className:t.btnComments,variant:"contained",fullWidth:!0,onClick:this.toggleComments,endIcon:c?r.a.createElement(no.a,null):r.a.createElement(ro.a,null)},s," Comments")),r.a.createElement(Ka.a,{in:c},r.a.createElement(ve.a,{className:t.commentBoxWrapper},r.a.createElement(Qn,{postId:n.id,type:"news",refreshComments:this.handleRefreshComments,needUpdateComment:this.state.needUpdateComment,cancelUpdateMode:function(){return e.setState({needUpdateComment:null})}})),r.a.createElement(D.a,{variant:"middle"}),n.comments&&n.comments.map((function(t){return r.a.createElement(Hn,{key:t.id,comment:t,isOwner:n.user_id===t.user_id,onUpdateComment:e.handleUpdateComment,onDeleteComment:e.handleDeleteComment})})))))}}]),a}(n.Component),Do=Object(C.a)(ao)(Po),Lo=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xt.a,{elevation:3,className:e.rightWrapper},r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{container:!0,item:!0},r.a.createElement(Qt,null)))),A()&&r.a.createElement(Ha,null))}}]),a}(n.Component),Wo=Object(C.a)(ao)(Lo),Bo=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleAuthChanged=function(e){n.setState({isLogin:e})},n.state={isLogin:null},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{isLogin:this.handleAuthChanged}),r.a.createElement(ve.a,{className:e.pageWrapper},r.a.createElement(Ca.a,{className:e.gridWrapper},r.a.createElement(v.a,{container:!0,spacing:4},r.a.createElement(v.a,{item:!0,md:9,xs:12},r.a.createElement(Do,null)),r.a.createElement(v.a,{item:!0,md:3},r.a.createElement(tt.a,{smDown:!0},r.a.createElement(Wo,null)))))))}}]),a}(n.Component),To=Object(C.a)(ao)(Bo),Fo=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(qa,null)}}]),a}(n.Component),Ro=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(ca,null)}}]),a}(n.Component),zo=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleAuthChanged=function(e){n.setState({isLogin:e})},n.state={isLogin:null},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{isLogin:this.handleAuthChanged}),r.a.createElement(ve.a,{className:e.roomWrapper},r.a.createElement(Ca.a,{className:e.contentWrapper},r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,sm:3,xs:12},r.a.createElement(Fo,null)),r.a.createElement(v.a,{item:!0,sm:9,xs:12},r.a.createElement(Ro,null))))))}}]),a}(n.Component),Ao=Object(C.a)(aa)(zo),Mo={pageWrapper:{backgroundColor:"#313947",padding:"2em 0",minHeight:"1000px"},bannerWrapper:{padding:"1.2rem",backgroundColor:"#292E38",color:H},trendingNewsWrapper:{padding:"1.2rem 0.2rem 0.2rem",position:"sticky",top:"0.6em",backgroundColor:"#292E38",color:H},bannerTitle:{marginLeft:"6px",marginBottom:"8px",paddingLeft:"8px",fontSize:"1.4rem",fontWeight:"700",borderLeft:"4px solid ".concat("#2D88FF")},cardTitle:{color:H,fontSize:"1.4rem",fontWeight:"700",marginTop:0,marginBottom:"0.2em",marginLeft:"8px",paddingLeft:"8px",borderLeft:"4px solid ".concat("#2D88FF")},"@media (max-width: 600px)":{bannerWrapper:{padding:"8px"}}},Uo={wrapper:{margin:"5px",border:"1px solid ".concat(Y),position:"relative"},contentWrapper:{textAlign:"left",background:"rgba(0,0,0,0.7)",width:"100%",padding:"4px 8px",position:"absolute",bottom:0},header:Object(h.a)(Object(h.a)({fontSize:"1rem",fontWeight:"600",color:H},K(2)),{},{"&:hover":{color:Y},"@media (max-width: 600px)":{fontSize:"0.9rem"}}),avatarSm:{width:"25px",height:"25px",border:"1px solid lightlbue",marginRight:"4px"},info:{fontSize:"0.8rem",margin:"2px 0",color:"#8F8F8F",fontWeight:"500",display:"flex",alignItems:"center",whiteSpace:"nowrap"},userLink:{marginRight:"2px",fontWeight:"700",color:"#f57c00",textDecoration:"none","&:hover":{textDecoration:"underline"}},bgDark:{backgroundColor:"#1D1D1D",color:H},imageWrapper:{overflow:"hidden"},image:{objectFit:"contain",transition:"all 0.3s linear",overflow:"hidden","&:hover":{transform:"scale(1.04)"}}},_o=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.props.news;return r.a.createElement(ye.a,{component:g.a,to:"/news/".concat(t._id)},r.a.createElement(je.a,{className:e.wrapper,title:t?t.header:"News title"},r.a.createElement(Xt.a,{className:e.bgDark},r.a.createElement(ve.a,{className:e.imageWrapper},r.a.createElement(ke.a,{className:e.image,component:"img",image:t?t.thumbnail:"https://placehold.it/400x200"})),r.a.createElement(jo.a,{className:e.contentWrapper},r.a.createElement(Ne.a,{className:e.header},t?t.header:"Loading"),r.a.createElement(Ne.a,{className:e.info},r.a.createElement(g.a,{to:"/wall/".concat(t.user.id),className:e.userLink},t.user.display_name),r.a.createElement(tt.a,{smDown:this.props.lastRow}," \u2022 ",ie(t.created_at)||"Unknown")," \u2022 ",pe(t.views)," views")))))}}]),a}(n.Component),Ho=Object(C.a)(Uo)(_o),Yo=function(e){var t={autoplay:!0,infinite:!0,dots:!1,arrows:!1,swipeToSlide:!0,rtl:e.rtl||!1,slidesToShow:e.slidesToShow,speed:e.speed||1e3,responsive:[{breakpoint:768,settings:{slidesToShow:e.slidesToShow-1}}]};return r.a.createElement(ze.a,Object.assign({},t,e),e.children)},Go=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={randomNews:[],isLoading:!0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;re.get("/news/random").then((function(t){e.setState({randomNews:t.data.news,isLoading:!1})}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.randomNews;return t.isLoading?r.a.createElement(gt,null):r.a.createElement(Xt.a,{className:e.bannerWrapper},r.a.createElement(Ne.a,{className:e.bannerTitle},"Random News"),r.a.createElement(Yo,{slidesToShow:2,autoplaySpeed:5e3},a&&a.map((function(e,t){if(t<4)return r.a.createElement(Ho,{key:e.id,news:e})}))),r.a.createElement(Yo,{slidesToShow:3,rtl:!0,autoplaySpeed:4e3},a&&a.map((function(e,t){if(t>=4)return r.a.createElement(Ho,{key:e.id,news:e,lastRow:!0})}))))}}]),a}(n.Component),qo=Object(C.a)(Mo)(Go),Ko=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(ca,null)}}]),a}(n.Component),Zo=Object(X.a)({wrapper:{margin:"0.5em 0.8em 0.6em",textAlign:"left","&:hover img:first-child":{boxShadow:"0 0 3px 4px rgba(0, 140, 186, 0.2)"}},imgWrapper:{display:"flex",alignItems:"center","& img":{maxWidth:"100%"}},header:Object(h.a)(Object(h.a)({fontSize:"0.9rem",lineHeight:1.2,fontWeight:"500"},K(2)),{},{marginBottom:"0.2em","&:hover":{color:"#f57c00"}}),content:Object(h.a)(Object(h.a)({color:"#8F8F8F"},K(4)),{},{fontSize:"0.8rem",fontWeight:"500",marginLeft:"4px",paddingTop:0}),actionWrapper:{display:"flex",marginTop:"0.2em",alignItems:"center",fontSize:"0.8rem",fontWeight:500,color:H},actionIcon:{marginRight:"3px",marginLeft:"-3px"},avatarSm:{width:"22px",height:"22px",border:"1px solid lightblue",marginRight:"4px"},username:{color:Y,fontWeight:"600",fontSize:"0.8rem",textDecoration:"none","&:hover":{textDecoration:"underline"}}}),Qo=function(e){var t=Zo();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{title:e.news.header,component:g.a,to:"/news/".concat(e.news.id)},r.a.createElement(v.a,{container:!0,className:t.wrapper},r.a.createElement(v.a,{item:!0,sm:12,xs:12},r.a.createElement(Ne.a,{className:t.header},e.news.header)),r.a.createElement(v.a,{item:!0,sm:5,xs:5,className:t.imgWrapper},r.a.createElement("img",{src:e.news.thumbnail,alt:"Thumbnail"})),r.a.createElement(v.a,{item:!0,sm:7,xs:7},r.a.createElement(Ne.a,{className:t.content,dangerouslySetInnerHTML:{__html:de(e.news.content)}})),r.a.createElement(v.a,{item:!0,sm:12},r.a.createElement(v.a,{container:!0,justify:"space-between"},r.a.createElement(v.a,{item:!0,className:t.actionWrapper},r.a.createElement(O.a,{component:g.a,to:"/wall/".concat(e.news.user.id),className:t.avatarSm,src:e.news.user.avatar||"",alt:e.news.user.display_name}),r.a.createElement(Ne.a,{component:g.a,to:"/wall/".concat(e.news.user.id),className:t.username},e.news.user.display_name)),r.a.createElement(v.a,{item:!0,className:t.actionWrapper},r.a.createElement(Eo.a,{fontSize:"small",className:t.actionIcon}),pe(e.news.views)))))),r.a.createElement(D.a,{variant:"middle"}))},Xo=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e={vertical:!0,arrows:!1,infinite:!0,autoplay:!0,speed:500,slidesToShow:4,slidesToScroll:1,verticalSwiping:!0,swipeToSlide:!0},t=this.props.news;return r.a.createElement(r.a.Fragment,null,0!==t.length&&r.a.createElement(ze.a,e,t.map((function(e){return r.a.createElement(Qo,{key:e.id,news:e})}))))}}]),a}(n.Component),Jo=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={trendingNews:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;re.get("/news/trending").then((function(t){e.setState({trendingNews:t.data.news})}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state.trendingNews;return r.a.createElement(Xt.a,{className:e.trendingNewsWrapper},r.a.createElement(Ne.a,{className:e.cardTitle},"Trending"),r.a.createElement(Xo,{news:t}))}}]),a}(n.Component),Vo=Object(C.a)(Mo)(Jo),$o=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleAuthChanged=function(t){e.setState({isLogin:t})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{isLogin:this.handleAuthChanged}),r.a.createElement(v.a,{className:e.pageWrapper},r.a.createElement(Ca.a,null,r.a.createElement(v.a,null,r.a.createElement(qo,null)),r.a.createElement(v.a,{container:!0,style:{marginTop:"1.2em"},spacing:2},r.a.createElement(v.a,{item:!0,sm:9,xs:12},r.a.createElement(Ko,null)),r.a.createElement(v.a,{item:!0,sm:3,xs:12},r.a.createElement(tt.a,{only:"xs"},r.a.createElement(Vo,null)))))))}}]),a}(n.Component),el=Object(C.a)(Mo)($o),tl=(a(153),a(265),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={file:null},n.onFormSubmit=n.onFormSubmit.bind(Object(f.a)(n)),n.onChange=n.onChange.bind(Object(f.a)(n)),n.fileUpload=n.fileUpload.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"onFormSubmit",value:function(e){e.preventDefault(),this.fileUpload(this.state.file).then((function(e){console.log(e.data)}))}},{key:"onChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"fileUpload",value:function(e){var t=new FormData;t.append("file",e);return Object(te.post)("http://example.com/file-upload",t,{headers:{"content-type":"multipart/form-data"}})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",{className:"label"},"Choose a thumbnail for topic:"),r.a.createElement("input",{className:"input-upload",type:"file",onChange:this.props.onFileChange}))}}]),a}(r.a.Component)),al=(a(266),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.isWaiting;return r.a.createElement("div",{className:"post-wrapper"},r.a.createElement("button",{type:"submit",className:"button",disabled:e},e?r.a.createElement(ut.a,{color:"primary",size:25}):"Post"),r.a.createElement("button",{type:"button",className:"button",onClick:this.props.handlePreview},"Preview"))}}]),a}(n.Component)),nl={popup:{background:"transparent",transform:" translateY(-2em)"},bgDark:{backgroundColor:"#292E38",color:H},content:{paddingBottom:"1em",wordWrap:"break-word","& a":{color:H,fontWeight:"bold"},"& img":{maxWidth:"100%"}}},rl=r.a.forwardRef((function(e,t){return r.a.createElement($.a,Object.assign({direction:"up",ref:t},e))})),ol=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(J.a,{open:this.props.isOpen,onClose:this.props.onClose,scroll:"body",TransitionComponent:rl,PaperProps:{classes:{root:e.popup}}},r.a.createElement("div",{className:e.bgDark},r.a.createElement(Da.a,null,this.props.header||"Empty"),r.a.createElement(D.a,null),r.a.createElement(V.a,{className:e.content,dangerouslySetInnerHTML:{__html:this.props.content||"Enter something..."}})))}}]),a}(n.Component),ll=Object(C.a)(nl)(ol),sl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleFileChange=function(e){if(n.setState({file:e.target.files[0]}),e.target.files.length){var t=new FileReader;t.onload=function(e){n.setState({thumbnail:e.target.result})},t.readAsDataURL(e.target.files[0])}},n.togglePreview=function(){n.setState({isOpenPreview:!n.state.isOpenPreview})},n.state={header:"",content:"",thumbnail:null,file:null,isWaiting:!1,isOpenPreview:!1},n.handleChangeField=n.handleChangeField.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),M()){var a=this.state,n=a.header,r=a.content,o=a.file;if(""===r)return alert("Content required");this.setState({isWaiting:!0});var l=this.props.match.params,s=new FormData;s.append("header",n),s.append("content",r),s.append("thumbnail",o),s.append("roomName",l.name),re.post("/news",s,{headers:{"content-type":"multipart/form-data"}}).then((function(){t.setState({isWaiting:!1}),t.props.history.goBack()})).catch((function(e){return console.log({err:e})}))}}},{key:"handleChangeField",value:function(e,t){this.setState(Object(or.a)({},e,t.target.value))}},{key:"render",value:function(){var e=this,t=this.state,a=t.header,n=t.content,o=t.thumbnail,l=t.isWaiting,s=t.isOpenPreview;return r.a.createElement("div",{className:"ck-wrapper"},r.a.createElement("h1",null,"Create Topic"),r.a.createElement("p",null,"News, events all over the world of technology."),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-wrapper",method:"POST"},r.a.createElement("input",{name:"header",placeholder:"Topic's header",className:"ck-input",onChange:function(t){return e.handleChangeField("header",t)},value:a,required:!0}),r.a.createElement("div",{className:"editor-area"},r.a.createElement(Ta,{onChange:function(t){return e.handleChangeField("content",t)},value:n,getData:function(t){return e.setState({content:t})}})),r.a.createElement(tl,{onFileChange:this.handleFileChange}),r.a.createElement("img",{src:o||"",alt:"Thumbnail preview",className:"thumbnail-preview"}),r.a.createElement(al,{isWaiting:l,handlePreview:this.togglePreview}),r.a.createElement(ll,{isOpen:s,onClose:this.togglePreview,header:a,content:n})))}}]),a}(n.Component),il=Object(s.g)(sl),cl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={isLogin:null},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"top-app"},r.a.createElement(Te,{isLogin:function(t){return e.setState({isLogin:t})}}),r.a.createElement(il,null))}}]),a}(n.Component),ml={popup:{background:"transparent",transform:" translateY(-2em)"},bgDark:{backgroundColor:"#292E38",color:H},content:{paddingBottom:"1em",wordWrap:"break-word","& a":{color:H,fontWeight:"bold"},"& img":{maxWidth:"100%"}}},pl=r.a.forwardRef((function(e,t){return r.a.createElement($.a,Object.assign({direction:"up",ref:t},e))})),dl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(J.a,{open:this.props.isOpen,onClose:this.props.onClose,scroll:"body",TransitionComponent:pl,PaperProps:{classes:{root:e.popup}}},r.a.createElement("div",{className:e.bgDark},r.a.createElement(Da.a,null,this.props.header||"Empty"),r.a.createElement(D.a,null),r.a.createElement(V.a,{className:e.content,dangerouslySetInnerHTML:{__html:this.props.content||"Enter something..."}})))}}]),a}(n.Component),ul=Object(C.a)(ml)(dl),hl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleFileChange=function(e){if(n.setState({file:e.target.files[0]}),e.target.files.length){var t=new FileReader;t.onload=function(e){n.setState({thumbnail:e.target.result})},t.readAsDataURL(e.target.files[0])}},n.togglePreview=function(){n.setState({isOpenPreview:!n.state.isOpenPreview})},n.state={header:"",content:"",file:null,isWaiting:!1,isOpenPreview:!1,newsContent:"",thumbnail:null},n.handleChangeField=n.handleChangeField.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;re.get("/news/".concat(t.id)).then((function(t){e.setState({newsContent:t.data.news.content,header:t.data.news.header,thumbnail:t.data.news.thumbnail})}))}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),M()){var a=this.state,n=a.header,r=a.content,o=a.file;if(""===r)return alert("Content required");this.setState({isWaiting:!0});var l=this.props.match.params,s=new FormData;s.append("header",n),s.append("content",r),s.append("thumbnail",o),s.append("roomName",l.name),re.put("/news/".concat(l.id),s).then((function(e){t.setState({isWaiting:!1}),t.props.history.goBack()})).catch((function(e){return console.log({err:e})}))}}},{key:"handleChangeField",value:function(e,t){this.setState(Object(or.a)({},e,t.target.value))}},{key:"render",value:function(){var e=this,t=this.state,a=t.header,n=t.content,o=t.thumbnail,l=t.isWaiting,s=t.isOpenPreview;return r.a.createElement("div",{className:"ck-wrapper"},r.a.createElement("h1",null,"Update Topic"),r.a.createElement("p",null,"News, events all over the world of technology."),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-wrapper",method:"POST"},r.a.createElement("input",{name:"header",placeholder:"Topic's header",className:"ck-input",onChange:function(t){return e.handleChangeField("header",t)},value:a,required:!0}),r.a.createElement("div",{className:"editor-area"},r.a.createElement(Ta,{onChange:function(t){return e.handleChangeField("content",t)},value:n,getData:function(t){return e.setState({content:t})},postContent:this.state.newsContent})),r.a.createElement(tl,{onFileChange:this.handleFileChange}),r.a.createElement("img",{src:o,alt:"Thumbnail",className:"thumbnail-preview"}),r.a.createElement(al,{isWaiting:l,handlePreview:this.togglePreview}),r.a.createElement(ul,{isOpen:s,onClose:this.togglePreview,header:a,content:n})))}}]),a}(n.Component),fl=Object(s.g)(hl),gl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={isLogin:null},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"top-app"},r.a.createElement(Te,{isLogin:function(t){return e.setState({isLogin:t})}}),r.a.createElement(fl,null))}}]),a}(n.Component),bl=a(476),El=a(466),vl=a(467),wl=a(468),xl={sidebarLink:{color:H,borderRadius:"5px",width:"90%",margin:"0.8em auto","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.3)"}},adminDisplayName:{color:H,fontSize:"1.2rem",fontWeight:"600"},divider:{marginTop:"8px"},title:{color:H,textAlign:"center",fontSize:"1.2rem",fontWeight:"500",padding:"0.6em 0"},iconLink:{color:"inherit",marginRight:"-0.6em"},activeLink:{backgroundColor:Y,"&:hover":{backgroundColor:Y}}},Ol=Object(cr.a)(xl),Cl=function(e){var t=Ol();return r.a.createElement(k.a,{component:g.b,to:e.to,activeClassName:t.activeLink,exact:!0,className:t.sidebarLink,button:!0},r.a.createElement(I.a,{className:t.iconLink},e.icon),r.a.createElement(P.a,null,e.text))},yl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=F();return r.a.createElement(ve.a,null,r.a.createElement(S.a,null,r.a.createElement(k.a,null,r.a.createElement(ka.a,null,r.a.createElement(O.a,{src:t?t.avatar:"",alt:"Admin icon"})),r.a.createElement(P.a,null,r.a.createElement(Ne.a,{className:e.adminDisplayName},t?t.display_name:"Loading"))),r.a.createElement(D.a,{className:e.divider}),r.a.createElement(Cl,{icon:r.a.createElement(El.a,null),text:"Dashboard",to:"/admin/dashboard"}),r.a.createElement(Cl,{icon:r.a.createElement(vl.a,null),text:"Rooms",to:"/admin/rooms-manager"}),r.a.createElement(Cl,{icon:r.a.createElement(wl.a,null),text:"Users",to:"/admin/users-manager"}),r.a.createElement(Cl,{icon:r.a.createElement(Ja.a,null),text:"Reports",to:"/admin/reports-manager"})))}}]),a}(n.Component),jl=Object(mr.a)(xl)(yl),kl=a(470),Nl=a(472),Sl=a(473),Il=a(474),Pl=a(471),Dl=a(114),Ll=a(113),Wl=a(469),Bl={wrapper:{background:"#27293D",color:H,width:"100%",margin:"1em"},dataWrapper:{textAlign:"right"},icon:{width:"45px",height:"45px",background:function(e){return"linear-gradient(45deg, ".concat(e.color[600]," 30%, ").concat(e.color[300]," 90%)")}},title:{color:"#8F8F8F",fontSize:"0.8rem",fontWeight:"500"},data:{fontSize:"1.6rem"},divider:{background:"#2B3553",width:"90%",margin:"0 auto"},detail:{padding:"0 8px",fontSize:"0.8rem",textAlign:"center"},detailIcon:{fontSize:"1rem",marginRight:"4px",transform:" translateY(0.2rem)"}},Tl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(v.a,{container:!0,item:!0,xs:12,sm:6,lg:3},r.a.createElement(je.a,{className:e.wrapper},r.a.createElement(en.a,{avatar:r.a.createElement(O.a,{className:e.icon},this.props.icon),action:r.a.createElement(ve.a,{className:e.dataWrapper},r.a.createElement(Ne.a,{className:e.title},this.props.title||"Lorem ipsum"),r.a.createElement(Ne.a,{className:e.data},this.props.data||0))}),r.a.createElement(D.a,{classes:{root:e.divider}}),r.a.createElement(Pa.a,null,r.a.createElement(Ne.a,{className:e.detail},r.a.createElement(Wl.a,{className:e.detailIcon}),this.props.description||"Loading"))))}}]),a}(n.Component),Fl=Object(C.a)(Bl)(Tl),Rl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={totalPosts:0,totalNews:0,totalUsers:0,totalReports:0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;re.get("/admin/dashboard").then((function(t){e.setState({totalPosts:t.data.total_posts,totalNews:t.data.total_news,totalUsers:t.data.total_users,totalReports:t.data.total_reports})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.totalPosts,a=e.totalNews,n=e.totalUsers,o=e.totalReports,l=this.props.classes;return r.a.createElement(v.a,{container:!0,justify:"space-around",className:l.statisticWrapper},r.a.createElement(Fl,{icon:r.a.createElement(kl.a,null),color:Pl.a,title:"Total Posts",data:t,description:"User's discussion"}),r.a.createElement(Fl,{icon:r.a.createElement(Nl.a,null),color:Dl.a,title:"Total News",data:a,description:"Updated news in every rooms"}),r.a.createElement(Fl,{icon:r.a.createElement(Sl.a,null),color:Sn.a,title:"Total Users",data:n,description:"Current active users"}),r.a.createElement(Fl,{icon:r.a.createElement(Il.a,null),color:Ll.a,title:"Total Reports",data:o,description:"Reports by users"}))}}]),a}(n.Component),zl=Object(C.a)({statisticWrapper:{display:"flex",marginTop:"8px"}})(Rl),Al=a(475),Ml={container:{display:"flex"},sidebar:{flexBasis:"260px",flexGrow:1,height:"100vh",background:"linear-gradient(".concat("#292E38",", #000 85%)"),position:"sticky",top:0,"@media (max-width: 600px)":{width:"180px"}},main:{backgroundColor:"#313947",flexGrow:"1"},expandButton:{background:"lightgrey",position:"fixed",top:"20%",left:0,borderRadius:"0 2px 2px 0"}},Ul=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleSidebar=function(){n.setState({openSidebar:!n.state.openSidebar})},n.closeSidebar=function(){n.setState({openSidebar:!1})},n.state={isLogin:null,openSidebar:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.openSidebar;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{isLogin:function(t){return e.setState({isLogin:t})}}),r.a.createElement(v.a,{container:!0,className:t.container},r.a.createElement(tt.a,{smUp:!0},r.a.createElement(Al.a,{className:t.expandButton,onClick:this.toggleSidebar}),r.a.createElement(bl.a,{open:a,anchor:"left",variant:"temporary"},r.a.createElement(v.a,{className:t.sidebar,item:!0,xs:!0},r.a.createElement(x.a,{onClickAway:this.closeSidebar},r.a.createElement(jl,null))))),r.a.createElement(tt.a,{only:"xs"},r.a.createElement(v.a,{className:t.sidebar,item:!0,sm:3,md:2},r.a.createElement(jl,null))),r.a.createElement(v.a,{className:t.main,item:!0,xs:12,sm:9,md:10},r.a.createElement(zl,null),this.props.children)))}}]),a}(n.Component),_l=Object(C.a)(Ml)(Ul),Hl=a(58),Yl={labels:[],datasets:[{label:"Posts per room",backgroundColor:"rgba(156,39,176,0.1)",borderColor:Pl.a[500],borderWidth:2,hoverBackgroundColor:"rgba(156,39,176,0.4)",hoverBorderColor:Pl.a[600],data:[0,0,0,0,0,0,0,0],barPercentage:.5,hoverBorderWidth:3}]},Gl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={data:Yl},n}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.data.labels!==this.props.roomsName&&(Yl.labels=this.props.roomsName,Yl.datasets[0].data=this.props.data,this.setState({data:Yl}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{component:"h5",style:{color:"#9a9a9a"}},"Total posts by room"),r.a.createElement(Hl.a,{data:Yl,options:{plugins:{datalabels:{display:"auto",color:"white",anchor:"end",align:"end",offset:"-1"}},scales:{xAxes:[{gridLines:{color:"rgba(156,39,176,1)",lineWidth:.1}}],yAxes:[{ticks:{beginAtZero:!0},gridLines:{color:"rgba(156,39,176,1)",lineWidth:.1}}]}}}))}}]),a}(n.Component),ql={labels:[],datasets:[{label:"News per room",backgroundColor:"rgba(33, 150, 243,0.1)",borderColor:Dl.a[500],borderWidth:2,hoverBackgroundColor:"rgba(33, 150, 243,0.2)",hoverBorderColor:Dl.a[600],data:[0,0,0,0,0,0,0,0],barPercentage:.5,hoverBorderWidth:3}]},Kl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={data:ql},n}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.data.labels!==this.props.roomsName&&(ql.labels=this.props.roomsName,ql.datasets[0].data=this.props.data,this.setState({data:ql}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{component:"h5",style:{color:"#9a9a9a"}},"Total news by room"),r.a.createElement(Hl.a,{data:ql,plugins:{datalabels:{display:!0,color:"white"}},options:{plugins:{datalabels:{display:"auto",color:"white",anchor:"end",align:"end",offset:"-1"}},scales:{xAxes:[{gridLines:{color:"rgba(76, 175, 80)",lineWidth:.1}}],yAxes:[{gridLines:{color:"rgba(76, 175, 80)",lineWidth:.1}}]}}}))}}]),a}(n.Component),Zl={labels:[],datasets:[{label:"number of news",fill:!0,lineTension:.2,backgroundColor:"rgba(75,192,192,0.2)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:2,pointHitRadius:10,data:[65,59,80,81,56,55,40]}]},Ql=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={data:Zl},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){Zl.labels=this.props.labels,Zl.datasets[0].data=this.props.data,this.setState({data:Zl})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{component:"h5",style:{color:"#9a9a9a"}},"Recent created news"),r.a.createElement(Hl.b,{data:this.state.data,options:{plugins:{datalabels:{display:"auto",color:"white",anchor:"end",align:"end",offset:"-1"}}}}))}}]),a}(n.Component),Xl={labels:["January","February","March","April","May","June","July"],datasets:[{label:"number of posts",fill:!0,lineTension:.2,backgroundColor:"rgba(75,192,192,0.2)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:2,pointHitRadius:10,data:[65,59,80,81,56,55,40]}]},Jl=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={data:Xl},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){Xl.labels=this.props.labels,Xl.datasets[0].data=this.props.data,this.setState({data:Xl})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{component:"h5",style:{color:"#9a9a9a"}},"Recent created posts"),r.a.createElement(Hl.b,{data:Xl,options:{plugins:{datalabels:{display:"auto",color:"white",anchor:"end",align:"end",offset:"-1"}}}}))}}]),a}(n.Component),Vl=(a(357),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getDataField=function(e,t){return e.map((function(e){return e[t]}))},n.state={rooms:[],roomsName:[],labels:[],data:{news:[],posts:[]}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;re.get("/rooms").then((function(t){e.setState({rooms:t.data.rooms,roomsName:e.getDataField(t.data.rooms,"name")})})).catch((function(e){return console.log(e)})),re.get("/admin/statistic").then((function(t){e.setState({data:t.data.statistics,labels:e.getDataField(t.data.statistics.posts,"date")})}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.rooms,n=t.roomsName,o=t.labels,l=t.data;return r.a.createElement(_l,null,r.a.createElement(Xt.a,{className:e.chartWrapper},r.a.createElement(Gl,{roomsName:n,data:this.getDataField(a,"total_posts")})),r.a.createElement(Xt.a,{className:e.chartWrapper},r.a.createElement(Kl,{roomsName:n,data:this.getDataField(a,"total_news")})),l.posts.length?r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{item:!0,xs:12,sm:6},r.a.createElement(Xt.a,{className:e.lineChartWrapper},r.a.createElement(Jl,{labels:o,data:this.getDataField(l.posts,"total")}))),r.a.createElement(v.a,{item:!0,xs:12,sm:6},r.a.createElement(Xt.a,{className:e.lineChartWrapper},r.a.createElement(Ql,{labels:o,data:this.getDataField(l.news,"total")})))):r.a.createElement(gt,null))}}]),a}(n.Component)),$l=Object(C.a)({chartWrapper:{background:"#27293D",margin:"0 16px",marginBottom:"32px",padding:"24px","@media (max-width: 600px)":{padding:"8px",marginTop:"16px"}},lineChartWrapper:{background:"#27293D",margin:"0 16px",marginBottom:"32px",padding:"16px","@media (max-width: 600px)":{padding:"8px",marginTop:"16px"}}})(Vl),es=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($l,null))}}]),a}(n.Component),ts=a(477),as=a(482),ns=a(483),rs=a(484),os=a(479),ls=a(485),ss=a(478),is=a(480),cs=Object(C.a)({root:{background:"#27293D",color:H,borderColor:"#3D3F51",whiteSpace:"nowrap",cursor:"default"}})(ts.a),ms=function(e){var t=Object(n.useState)(!1),a=Object(Bn.a)(t,2),o=a[0],l=a[1],s=function(){return l(!o)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(we.a,{title:"Active this room",arrow:!0,placement:"top"},r.a.createElement(xe.a,{size:"small",onClick:s},r.a.createElement(Eo.a,{style:{color:Sn.a[400]},fontSize:"small"}))),r.a.createElement(mn,{isOpen:o,handleClose:function(t){s(),"yes"===t&&re.post("/rooms/active",{roomId:e.roomId}).then((function(){window.fetchRooms()})).catch((function(e){return console.log(e)}))},message:"Are you sure to active this room?"}))},ps=function(e){var t=Object(n.useState)(!1),a=Object(Bn.a)(t,2),o=a[0],l=a[1],s=function(){return l(!o)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(we.a,{title:"Hide this room",arrow:!0,placement:"top"},r.a.createElement(xe.a,{size:"small",onClick:s},r.a.createElement(ss.a,{color:"error",fontSize:"small"}))),r.a.createElement(mn,{isOpen:o,handleClose:function(t){s(),"yes"===t&&re.post("/rooms/hide",{roomId:e.roomId}).then((function(){window.fetchRooms()})).catch((function(e){return console.log(e)}))},message:"Are you sure to hide this room?"}))},ds=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.room,n=e.index;return r.a.createElement(os.a,null,r.a.createElement(cs,null,n+1),r.a.createElement(cs,{className:t.imageCell},r.a.createElement("img",{src:a.image,alt:a.name,style:{maxWidth:"100%"}})),r.a.createElement(cs,{variant:"head"},a.name),r.a.createElement(cs,{align:"center"},a.total_posts),r.a.createElement(cs,{align:"center"},a.total_news),r.a.createElement(cs,{align:"center"},a.hidden?r.a.createElement(Ne.a,{className:t.hiddenText},"Hidden"):r.a.createElement(Ne.a,{className:t.activeText},"Active")),r.a.createElement(cs,null,me(a.created_at)),r.a.createElement(cs,{align:"center"},a.hidden?r.a.createElement(ms,{roomId:a.id}):r.a.createElement(ps,{roomId:a.id}),r.a.createElement(we.a,{title:"Visit this room",arrow:!0,placement:"top"},r.a.createElement(xe.a,{size:"small",component:g.a,to:"/room/".concat(a.name)},r.a.createElement(is.a,{className:t.navigateButton,fontSize:"small"})))))}}]),a}(n.Component),us={tableWrapper:{marginLeft:"16px",marginRight:"16px","@media (max-width: 600px)":{marginTop:"16px"}},table:{background:"#27293D",color:H,marginBottom:"2em"},titleWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",paddingLeft:"16px"},tableRow:{"&:hover":{backgroundColor:"red !important",border:"1px solid red",marginLeft:"2px",color:"green"}},tableTitle:{color:"#8F8F8F",fontSize:"14px",fontWeight:500},username:{color:H,fontWeight:500,display:"flex",alignItems:"center",textDecoration:"none","&:hover":{textDecoration:"underline"}},avatar:{boxSizing:"border-box",marginRight:"8px"},divider:{background:"#3D3F51"},viewIcon:{color:Dl.a[400]},iconButton:{padding:"8px"},searchInput:{flex:1,color:H},emptyRow:{color:"#f57c00",fontSize:"1rem",fontWeight:500,textAlign:"center",fontStyle:"italic",borderBottom:"none"},nowrap:{whiteSpace:"nowrap"},nameCell:{paddingRight:0,paddingLeft:0,fontWeight:"600"},nameLink:{color:H},reasonsCell:{maxWidth:"16em","@media (max-width: 600px)":{minWidth:"20em"}},contentCell:{maxWidth:"8em",maxHeight:"4rem","@media (max-width: 600px)":{minWidth:"10em"}},content:Object(h.a)(Object(h.a)({},K(3)),{},{fontSize:"0.9rem"}),imageCell:{maxWidth:"6em","& img":{borderRadius:"2px"}},activeText:{fontWeight:"500",color:"#00a152",fontSize:"14px"},hiddenText:{fontWeight:"500",color:"#ef5350",fontSize:"14px"},navigateButton:{color:"#42a5f5"},activeButton:{color:"#66bb6a"},addButton:{backgroundColor:"#f57c00",textTransform:"none",borderRadius:"999px",color:H,padding:"0.3em 1.5em",margin:"10px 16px"},noWrap:{whiteSpace:"nowrap"}},hs=a(481),fs=r.a.forwardRef((function(e,t){return r.a.createElement($.a,Object.assign({direction:"up",ref:t},e))})),gs=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleCreateRoom=function(){n.setState({uploading:!0});var e=n.state,t=e.roomName,a=e.description,r=e.thumbnail,o=new FormData;o.append("roomName",t),o.append("description",a),o.append("thumbnail",r),re.post("/rooms",o,{headers:{"content-type":"multipart/form-data"}}).then((function(){n.setState({uploading:!1}),n.props.onClose()})).catch((function(e){return console.log(e)}))},n.state={roomName:null,description:null,thumbnai:null,uploading:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(J.a,{open:this.props.open,onClose:this.props.onClose,TransitionComponent:fs,scroll:"body"},r.a.createElement(Da.a,null,"Create a new room"),r.a.createElement(D.a,null),r.a.createElement(V.a,{className:t.contentWrapper},r.a.createElement(v.a,null,r.a.createElement(kn.a,{className:t.input,label:"Room name",variant:"outlined",size:"small",InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({roomName:t.target.value})},required:!0})),r.a.createElement(v.a,null,r.a.createElement(kn.a,{className:t.input,label:"Description (optional)",variant:"outlined",size:"small",multiline:!0,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({description:t.target.value})}})),r.a.createElement(v.a,null,r.a.createElement(Ne.a,{className:t.label},"Thumbnail image"),r.a.createElement(Oe.a,{className:t.inputFile,type:"file",margin:"dense",onChange:function(t){e.setState({thumbnail:t.target.files[0]})}}))),r.a.createElement(D.a,null),r.a.createElement(La.a,null,r.a.createElement(w.a,{onClick:this.handleCreateRoom,disabled:this.state.uploading},this.state.uploading?r.a.createElement(ut.a,{size:20,color:"secondary"}):"OK"),r.a.createElement(w.a,{onClick:this.props.onClose},"Cancel")))}}]),a}(n.Component),bs=Object(C.a)({contentWrapper:{},input:{width:"100%",marginTop:"12px",marginBottom:"12px"},label:{fontSize:"0.8rem",fontWeight:"500"},inputFile:{fontSize:"0.8rem",marginBottom:"12px"}})(gs),Es=Object(C.a)({root:{background:"#27293D",color:H,borderColor:"#3D3F51",whiteSpace:"nowrap",cursor:"default"}})(ts.a),vs=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).fetchRooms=function(){re.get("/admin/rooms").then((function(e){n.setState({rooms:e.data.rooms})}))},n.togglePopup=function(){n.setState({openPopup:!n.state.openPopup})},n.state={rooms:[],openPopup:!1},window.fetchRooms=n.fetchRooms.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchRooms()}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.rooms,n=t.openPopup;return r.a.createElement(_l,null,r.a.createElement(ve.a,{className:e.tableWrapper},r.a.createElement(Xt.a,{className:e.table},r.a.createElement(w.a,{variant:"extended",size:"small",startIcon:r.a.createElement(hs.a,null),className:e.addButton,onClick:this.togglePopup},"Create a new room"),r.a.createElement(bs,{open:n,onClose:this.togglePopup}),r.a.createElement(D.a,null),r.a.createElement(as.a,null,r.a.createElement(ns.a,{size:"small"},r.a.createElement(rs.a,null,r.a.createElement(os.a,null,r.a.createElement(Es,null,"#"),r.a.createElement(Es,null,"Thumbnail"),r.a.createElement(Es,null,"Room name"),r.a.createElement(Es,{align:"center"},"Total Posts"),r.a.createElement(Es,{align:"center"},"Total News"),r.a.createElement(Es,{align:"center"},"Status"),r.a.createElement(Es,null,"Created at"),r.a.createElement(Es,{align:"center"},"Actions"))),r.a.createElement(ls.a,null,a.map((function(t,a){return r.a.createElement(ds,{key:t.id,index:a,classes:e,room:t})}))))))))}}]),a}(n.Component),ws=Object(C.a)(us)(vs),xs=a(486),Os=r.a.forwardRef((function(e,t){return r.a.createElement($.a,Object.assign({direction:"up",ref:t},e))})),Cs=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChangeDate=function(e){var t;n.setState({date:e.target.value,hasError:(t=e.target.value,le()(new Date).isAfter(t))})},n.handleBanUser=function(e){re.post("admin/ban/user",{userId:e,expiredDate:n.state.date}).then((function(){window.fetchUsers(),window.fetchBanned(),n.props.onClose()})).catch((function(e){return console.log(e)}))},n.state={date:null,hasError:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.classes,o=this.state.hasError;return r.a.createElement(J.a,{open:this.props.isOpen,onClose:this.props.onClose,TransitionComponent:Os,className:n.wrapper},r.a.createElement(je.a,null,r.a.createElement(en.a,{avatar:r.a.createElement(O.a,{src:a?a.avatar:""}),title:a?a.display_name:"Loading",subheader:Ra(a.email)}),r.a.createElement(D.a,null),r.a.createElement(Ia.a,null,r.a.createElement(kn.a,{type:"datetime-local",label:"Ban until",helperText:o?"Invalid date":"",error:o,defaultValue:le()().add(1,"days").format("YYYY-MM-DDTHH:mm:ss"),onChange:this.handleChangeDate,InputLabelProps:{shrink:!0}})),r.a.createElement(Pa.a,{className:n.btnWrapper},r.a.createElement(w.a,{variant:"outlined",color:"primary",disabled:o,onClick:function(){return e.handleBanUser(a._id)}},"OK"),r.a.createElement(w.a,{variant:"outlined",color:"secondary",onClick:this.props.onClose},"Cancel"))))}}]),a}(n.Component),ys=Object(C.a)({wrapper:{},btnWrapper:{display:"flex",justifyContent:"flex-end","& button":{textTransform:"none"}}})(Cs),js=Object(C.a)({root:{background:"#27293D",color:H,borderColor:"#3D3F51",whiteSpace:"nowrap",cursor:"default"}})(ts.a),ks=function(e){var t=e.classes,a=e.user,o=Object(n.useState)(!1),l=Object(Bn.a)(o,2),s=l[0],i=l[1],c=function(){i(!s)};return r.a.createElement(os.a,null,r.a.createElement(js,null,r.a.createElement(ve.a,{className:t.username,component:g.a,to:"/wall/".concat(a.id)},r.a.createElement(O.a,{className:t.avatar,src:a.avatar,alt:a.display_name}),a.display_name)),r.a.createElement(js,{padding:"none"},a.email||"unknown"),r.a.createElement(js,null,"fb"===a.login_method?"Facebook":"Email"),r.a.createElement(js,{padding:"none"},me(a.created_at)),r.a.createElement(js,{padding:"none",align:"center"},r.a.createElement(ve.a,null,r.a.createElement(we.a,{title:"Ban this account",placement:"top",arrow:!0},r.a.createElement(xe.a,{color:"inherit",size:"small",onClick:c},r.a.createElement(xs.a,{fontSize:"small",color:"error"}))),r.a.createElement(we.a,{title:"View profile",placement:"top",arrow:!0},r.a.createElement(xe.a,{color:"inherit",size:"small",component:g.a,to:"/wall/".concat(a._id)},r.a.createElement(is.a,{fontSize:"small",className:t.viewIcon}))))),r.a.createElement(ys,{isOpen:s,onClose:c,user:a}))},Ns=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).fetchUsers=function(){re.get("/admin/users").then((function(e){n.setState({users:e.data.users,originalArray:e.data.users})})).catch((function(e){return console.log(e)}))},n.handleSearch=function(e){var t=e.target.value;n.setState({users:n.filterByKeyword(t)})},n.filterByKeyword=function(e){return n.state.originalArray.filter((function(t){return t.display_name.includes(e)||t.email&&t.email.includes(e)}))},n.state={users:[],originalArray:[]},window.fetchUsers=n.fetchUsers.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchUsers()}},{key:"render",value:function(){var e=this,t=this.state.users,a=this.props.classes;return r.a.createElement(ve.a,{className:a.tableWrapper},r.a.createElement(Xt.a,{className:a.table},r.a.createElement(as.a,null,r.a.createElement(ve.a,{className:a.titleWrapper},r.a.createElement(Ne.a,{className:a.tableTitle},"Current active users"),r.a.createElement(ve.a,null,r.a.createElement(Oe.a,{className:a.searchInput,placeholder:"Search by name or email",onKeyUp:this.handleSearch}),r.a.createElement(xe.a,{color:"inherit",className:a.iconButton},r.a.createElement(Ce.a,null)))),r.a.createElement(D.a,{className:a.divider}),r.a.createElement(ns.a,{size:"small"},r.a.createElement(rs.a,null,r.a.createElement(os.a,null,r.a.createElement(js,null,"Name"),r.a.createElement(js,{padding:"none"},"Email"),r.a.createElement(js,null,"Method"),r.a.createElement(js,{padding:"none"},"Created at"),r.a.createElement(js,{padding:"none",align:"center"},"Action"))),r.a.createElement(ls.a,null,t.length?t.map((function(t,n){return r.a.createElement(ks,{key:t._id,classes:a,no:n,user:t,openPopup:e.togglePopup})})):r.a.createElement(os.a,null,r.a.createElement(js,{className:a.emptyRow,colSpan:5},"Empty data")))))))}}]),a}(n.Component),Ss=Object(C.a)(us)(Ns),Is=a(487),Ps=a(488),Ds={wrapper:{margin:"0 16px",position:"sticky",top:"1em"},darkBg:{background:"#27293D",color:H},title:{color:"#8F8F8F"},unlockIcon:{color:"#00a152"},avatar:{},empty:{color:"#f57c00",fontSize:"1rem",fontWeight:700,marginLeft:"16px",fontStyle:"italic"},userLink:{color:H,fontWeight:500,textDecoration:"none","&:hover":{textDecoration:"underline"}}},Ls=function(e){var t=e.classes,a=e.user,o=Object(n.useState)(!1),l=Object(Bn.a)(o,2),s=l[0],i=l[1],c=function(){return i(!s)},m=function(){re.post("/admin/unban/user",{userId:a._id}).then((function(){window.fetchUsers(),window.fetchBanned()})).catch((function(e){return console.log(e)}))};return r.a.createElement(k.a,{button:!0},r.a.createElement(ka.a,null,r.a.createElement(O.a,{src:a?a.avatar:"",className:t.avatar})),r.a.createElement(P.a,null,r.a.createElement(g.a,{to:"/wall/".concat(a.id),className:t.userLink},a?a.display_name:"Display name")),r.a.createElement(Is.a,null,r.a.createElement(xe.a,{edge:"end",onClick:c},r.a.createElement(we.a,{title:"Unlock this account",placement:"top",arrow:!0},r.a.createElement(Ps.a,{className:t.unlockIcon})))),r.a.createElement(mn,{isOpen:s,handleClose:function(e){c(),"yes"===e&&m()},message:"Are you sure to unban this user?"}))},Ws=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).fetchBanned=function(){re.get("/admin/users/banned").then((function(e){n.setState({bannedUser:e.data.users})})).catch((function(e){return console.log(e)}))},n.state={bannedUser:[]},window.fetchBanned=n.fetchBanned.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchBanned()}},{key:"render",value:function(){var e=this.props.classes,t=this.state.bannedUser;return r.a.createElement(ve.a,{className:e.wrapper},r.a.createElement(Xt.a,{className:e.darkBg},r.a.createElement(S.a,{dense:!0,subheader:r.a.createElement(ja.a,{className:e.title,disableSticky:!0},"Banned Users")},t.length?t.map((function(t){return r.a.createElement(Ls,{classes:e,key:t._id,user:t})})):r.a.createElement(Ne.a,{className:e.empty},"Empty list"))))}}]),a}(n.Component),Bs=Object(C.a)(Ds)(Ws),Ts=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(_l,null,r.a.createElement(v.a,{container:!0,className:e.wrapper},r.a.createElement(v.a,{item:!0,xs:12,md:8,lg:9,className:e.normalUsers},r.a.createElement(Ss,null)),r.a.createElement(v.a,{item:!0,xs:12,md:4,lg:3,className:e.bannedUsers},r.a.createElement(Bs,null))))}}]),a}(n.Component),Fs=Object(mr.a)({"@media (max-width: 960px)":{wrapper:{display:"flex"},normalUsers:{order:2,"@media (min-width: 600px)":{marginTop:"16px"}},bannedUsers:{order:1}}})(Ts),Rs=a(489),zs=Object(C.a)({root:{background:"#27293D",color:H,borderColor:"#3D3F51",cursor:"default"}})(ts.a),As=function(e){var t=e.report,a=e.classes;return r.a.createElement(os.a,null,r.a.createElement(zs,null,e.index+1),r.a.createElement(zs,{padding:"none",className:a.nameCell},t.user?r.a.createElement(g.a,{className:a.nameLink,to:"/wall/".concat(t.user_id)},t.user.display_name):"Anonymous"),r.a.createElement(zs,{className:a.reasonsCell,title:t.reasons.join(", ")},t.reasons.join(", ")),r.a.createElement(zs,{className:a.contentCell,title:t.content},r.a.createElement(Ne.a,{className:a.content},t.content)),r.a.createElement(zs,{padding:"none"},t.type),r.a.createElement(zs,{className:a.nowrap,padding:"none"},me(t.created_at)),r.a.createElement(zs,{align:"center",className:a.noWrap},r.a.createElement(we.a,{title:"Visit this"},r.a.createElement(xe.a,{size:"small",component:g.a,to:function(){switch(t.type){case"news":return"/news/".concat(t.news_id);case"post":case"comment":return"/posts/".concat(t.post_id);default:return"/"}}},r.a.createElement(Eo.a,{fontSize:"small",color:"primary"}))),r.a.createElement(we.a,{title:"Dismiss report"},r.a.createElement(xe.a,{size:"small",onClick:function(){return e.handleDelete(t.id)}},r.a.createElement(Rs.a,{fontSize:"small",color:"error"})))))},Ms=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).fetchReports=function(){re.get("/reports").then((function(e){n.setState({reports:e.data.reports})})).catch((function(e){return console.log(e)}))},n.handleDelete=function(e){re.delete("/reports/".concat(e)).then((function(){n.fetchReports()})).catch((function(e){return console.log(e)}))},n.state={reports:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchReports()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.reports;return r.a.createElement(_l,null,r.a.createElement(ve.a,{className:t.tableWrapper},r.a.createElement(Xt.a,{className:t.table},r.a.createElement(as.a,null,r.a.createElement(ns.a,{size:"small"},r.a.createElement(rs.a,null,r.a.createElement(os.a,null,r.a.createElement(zs,null,"#"),r.a.createElement(zs,{padding:"none"},"Reporter"),r.a.createElement(zs,null,"Reasons"),r.a.createElement(zs,null,"Content"),r.a.createElement(zs,{padding:"none"},"Type"),r.a.createElement(zs,{padding:"none"},"Time"),r.a.createElement(zs,{align:"center"},"Actions"))),r.a.createElement(ls.a,null,a.map((function(a,n){return r.a.createElement(As,{key:a.id,index:n,classes:t,report:a,handleDelete:e.handleDelete})}))))))))}}]),a}(n.Component),Us=Object(C.a)(us)(Ms),_s={roomWrapper:{backgroundColor:"#313947",paddingTop:"24px"}},Hs=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={post:null,isLogin:null},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;re.get("/posts/".concat(t.id)).then((function(t){console.log("res.data",t.data.post),e.setState({post:t.data.post})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.post;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{isLogin:function(t){return e.setState({isLogin:t})}}),r.a.createElement(ve.a,{className:t.roomWrapper},r.a.createElement(Ca.a,null,r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,sm:3},r.a.createElement(Qt,null)),r.a.createElement(v.a,{item:!0,sm:6},a?r.a.createElement(Jn,{post:a}):r.a.createElement(gt,null)),r.a.createElement(v.a,{item:!0,sm:3},r.a.createElement(Ha,null))))))}}]),a}(n.Component),Ys=Object(C.a)(_s)(Object(s.g)(Hs)),Gs={container:Object(h.a)(Object(h.a)({},G),{},{"@media (max-width: 600px)":{padding:0}})},qs=a(491),Ks=a(490),Zs=a(193),Qs=a.n(Zs),Xs={container:Object(h.a)(Object(h.a)({},G),{},{height:"20rem","@media (max-width: 600px)":{height:"18rem",padding:"0 4px"}}),img:{width:"100%",height:"100%",overflow:"hidden",objectFit:"cover",objectPosition:"center",borderBottomLeftRadius:"1rem",borderBottomRightRadius:"1rem",zIndex:"-1"},headerTitle:{marginTop:"-9.5rem",position:"relative",textAlign:"center"},avatar:{width:"10rem",height:"10rem",borderRadius:"50%",border:".3rem solid #fff",overflow:"hidden",objectFit:"cover",objectPosition:"center"},fileIcon:{transform:" translateY(0.1rem)"},editAvatarBtn:{position:"absolute",display:"block",bottom:"3.5rem",right:"1rem",background:"#E4E6EB",padding:".5rem",borderRadius:"50%",outline:"none",border:"none",transition:"cubic-bezier(0.95, 0.05, 0.795, 0.035)","&:hover":{cursor:"pointer",background:"#E4E6EE"}},avatarInputFile:{position:"absolute",top:0,left:0,width:"3rem",height:"3rem",outline:"none",opacity:0,overflow:"hidden","&:hover":{cursor:"pointer"}},displayName:{color:"rgba(51,51,51,.9)",fontSize:"1.8rem",textAlign:"center",margin:".5rem auto"},statusWrap:{display:"block",textAlign:"center",position:"relative",width:"100%"},status:{width:"100%",position:"absolute",textAlign:"center",color:"rgba(51,51,51,.8)"},hiddenEditButton:{float:"right",marginTop:"5px",height:"2rem",display:"block",opacity:0,visibility:"hidden"},activeEditButton:{float:"right",marginTop:"5px",height:"2rem",display:"block",opacity:1,visibility:"visible"},inputField:{display:"flex",flexWrap:"wrapped",justifyContent:"center",margin:".5rem 0"},textField:{marginBottom:"0",marginLeft:"1rem",width:"50%",display:"flex",textAlign:"center"},addNewButton:{width:"75%",border:"1px solid #1976D2",marginLeft:"1rem",color:"#1976D2",textTransform:"none",whiteSpace:"nowrap",textAlign:"center","@media (max-width: 600px)":{width:"100%",marginLeft:0}},hr:{height:"1px",width:"70%",display:"block",background:"rgba(51,51,51,.5)",margin:"2rem auto","@media (max-width: 600px)":{margin:"1.5rem auto",width:"90%"}}},Js=Object(C.a)({root:{margin:".5rem",padding:"0 .5rem",transition:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",textTransform:"capitalize",height:"2rem"}})(w.a),Vs=Object(C.a)({root:{margin:".5rem",height:"2rem",transition:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",background:"#1E88E5",color:"#fff",textTransform:"capitalize","&:hover":{background:"#2196F3"}}})(w.a),$s=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleShowEditStatusButton=function(e){n.setState({showEditButton:e})},n.handleFileInputChange=function(){var e=Object(rr.a)(nr.a.mark((function e(t){return nr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({file:t.target.files[0],isOpenConfirm:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleConfirm=function(e){var t=n.state.file;if("yes"==e){var a,r={title:"Error",type:"danger",message:"Your profile picture update failed. Try again!"},o=(a={title:"Success"},Object(or.a)(a,"title","success"),Object(or.a)(a,"message","Your profile picture was updated successfully!"),a);n.setState({isOpenConfirm:!1}),hr({title:"Processing!",type:"warning",message:"Your data being in process! Please wait...",duration:5e3});var l=new FormData;l.append("avatar",t),re.put("/users/avatar",l).then(function(){var e=Object(rr.a)(nr.a.mark((function e(t){return nr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.user.id){e.next=4;break}return e.next=3,hr(o);case 3:setTimeout((function(){window.location.reload()}),3e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){hr(r)}))}else n.setState({isOpenConfirm:!1})},n.handleEditStatus=function(){n.setState({editStatus:!0})},n.handleAddNew=function(){n.setState({editStatus:!0,status:{message:""}})},n.handleTextFieldChange=function(e){n.setState({status:{message:e.target.value}})},n.handleCancel=function(){n.setState({editStatus:!1,status:{message:n.props.status}})},n.handleUpdateStatus=function(){n.setState({editStatus:!1});var e=n.state.status.message;""==e.replace(/\s/g,"")&&(e=null);var t={title:"Error",type:"danger",message:"Your status update failed. Try again!"},a={title:"Success",message:"Your status was updated successfully!"};re.put("/users/status",{status:e}).then((function(e){e.data.user.id?hr(a):(hr(t),n.setState({editStatus:!0}))})).catch((function(){hr(t),n.setState({editStatus:!0})}))},n.state={isOpenConfirm:!1,status:{message:null},showEditButton:!1,editStatus:!1,file:null},n}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({status:{message:e.status}})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.isOpenConfirm,o=a.status;return r.a.createElement(r.a.Fragment,null,r.a.createElement(mn,{isOpen:n,handleClose:this.handleConfirm,message:"Are you seriously want to update it?"}),r.a.createElement(v.a,{className:t.container,container:!0},r.a.createElement("img",{className:t.img,src:Qs.a})),r.a.createElement(v.a,{container:!0,justify:"center"},r.a.createElement(v.a,{item:!0,className:t.headerTitle},r.a.createElement("img",{className:t.avatar,src:this.props.avatar}),r.a.createElement("div",{className:t.editAvatarBtn},r.a.createElement(Ks.a,{className:t.fileIcon}),r.a.createElement("input",{type:"file",name:"avatar",className:t.avatarInputFile,onChange:this.handleFileInputChange})),r.a.createElement("h3",{className:t.displayName},this.props.displayName))),r.a.createElement(v.a,{container:!0,justify:"space-around"},r.a.createElement(v.a,{item:!0,sm:6,alignContent:"center"},r.a.createElement("div",{className:t.statusWrap,onMouseOver:function(){return e.handleShowEditStatusButton(!0)},onMouseLeave:function(){return e.handleShowEditStatusButton(!1)}},null!=this.state.status.message?this.state.editStatus?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.inputField},r.a.createElement(kn.a,{className:t.textField,value:this.state.status.message?this.state.status.message:null,onChange:this.handleTextFieldChange})),r.a.createElement("div",{className:t.actionButton},r.a.createElement(Vs,{onClick:this.handleUpdateStatus},r.a.createElement(qs.a,null),"Save"),r.a.createElement(Js,{onClick:this.handleCancel},r.a.createElement(Kn.a,null),"Cancel"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:t.status},o.message),r.a.createElement(w.a,{className:this.state.showEditButton?t.activeEditButton:t.hiddenEditButton,onClick:this.handleEditStatus},r.a.createElement(on.a,null))):r.a.createElement(w.a,{onClick:this.handleAddNew,className:t.addNewButton},"+ Add new status")))),r.a.createElement("div",{className:t.hr}))}}]),a}(r.a.Component),ei=Object(C.a)(Xs)($s),ti=a(492),ai={icon:{display:"inline-flex",verticalAlign:"middle",paddingBottom:".4rem"},label:{fontSize:"1rem",fontWeight:"300",marginLeft:"1rem","@media (max-width: 600px)":{fontSize:"0.9rem",marginLeft:"0.5rem"}},value:{margin:"0 1rem",fontSize:".9rem",minWidth:"6rem",display:"inline-block",color:"#455A64",padding:".2rem 0",fontWeight:"bold"},hideButton:{visibility:"hidden",opacity:"0"},showButton:{visibility:"visible",opacity:"1"},inputField:{display:"flex",flexWrap:"wrapped",justifyContent:"space-between"},textField:{marginBottom:"0",marginLeft:"1rem",width:"100%",display:"flex"},buttonGroup:{display:"flex",justifyContent:"flex-start"},row:{display:"flex",flexWrap:"wrapped"},addNewButton:{width:"75%",border:"1px solid #1976D2",marginLeft:"1rem",color:"#1976D2",textTransform:"none",whiteSpace:"nowrap"},link:{textDecoration:"none",color:"#333",margin:"0 1rem",fontSize:"1rem",minWidth:"6rem",display:"inline-block"},button:{width:"75%",border:" 1px solid #1976D2",marginLeft:"1rem",marginBottom:"1rem",color:"#1976D2",textTransform:"none"}},ni=Object(C.a)({root:{width:"1rem",margin:"0 .5rem",transition:"cubic-bezier(0.895, 0.03, 0.685, 0.22)"}})(w.a),ri=Object(C.a)({root:{margin:"0 .2rem",transition:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",background:"#1E88E5",color:"#fff",textTransform:"capitalize","&:hover":{background:"#2196F3"}}})(w.a),oi=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleAddNew=function(){n.setState({data:"",status:!0})},n.handleStatus=function(e){n.setState({status:e})},n.handleShowEditButton=function(e){n.setState({showEditButton:e})},n.handleTextFieldChange=function(e){n.setState({data:e})},n.openDeleteConfirm=function(){n.setState({isOpenConfirm:!0})},n.handleCancel=function(){var e=n.state.data;""==e&&(e=null),n.setState({data:e,status:!1})},n.handleUpdate=Object(rr.a)(nr.a.mark((function e(){var t,a,r;return nr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.data){e.next=2;break}return e.abrupt("return");case 2:return t={type:"danger",title:"Error!",message:"Your data update failed"},a={type:"success",title:"Success!",message:"All your data has been successfully updated"},r=Object(or.a)({},n.props.id,n.state.data),e.next=7,re.put("/profile",r).then((function(e){"ok"==e.data.status&&(hr(a),n.setState({status:!1}))})).catch((function(e){return hr(t)}));case 7:case"end":return e.stop()}}),e)}))),n.handleConfirm=function(){var e=Object(rr.a)(nr.a.mark((function e(t){return nr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("yes"!=t){e.next=6;break}return e.next=3,n.setState({data:null,status:!1,isOpenConfirm:!1});case 3:n.handleUpdate(),e.next=7;break;case 6:n.setState({isOpenConfirm:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={data:e.value,status:!1,isOpenConfirm:!1,showEditButton:!1},n}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.value})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.icon,o=t.label,l=this.state,s=l.data,i=l.status,c=l.isOpenConfirm,m=l.showEditButton;return r.a.createElement(r.a.Fragment,null,r.a.createElement(mn,{isOpen:c,handleClose:this.handleConfirm}),r.a.createElement(v.a,{container:!0,spacing:2,className:a.row,onMouseOver:function(){return e.handleShowEditButton(!0)},onMouseLeave:function(){return e.handleShowEditButton(!1)}},r.a.createElement(v.a,{item:!0,xs:4,sm:3},r.a.createElement("span",{className:a.icon},n),r.a.createElement("span",{className:a.label},o)),r.a.createElement(v.a,{item:!0,xs:7,sm:6},null!=s?i?r.a.createElement("div",{className:a.inputField},r.a.createElement(kn.a,{className:a.textField,value:s||null,onChange:function(t){return e.handleTextFieldChange(t.target.value)}}),r.a.createElement(w.a,{onClick:this.openDeleteConfirm},r.a.createElement(ti.a,null))):r.a.createElement("span",{className:a.value},this.state.data):r.a.createElement(w.a,{onClick:this.handleAddNew,className:a.addNewButton},"+ Add new")),r.a.createElement(v.a,{item:!0,xs:1,sm:3},i?r.a.createElement("div",{className:a.buttonGroup},r.a.createElement(ri,{onClick:this.handleUpdate},r.a.createElement(qs.a,null),"Save"),r.a.createElement(ni,{onClick:this.handleCancel},r.a.createElement(Kn.a,null),"Cancel")):r.a.createElement("div",{className:a.buttonGroup},r.a.createElement(ni,{onClick:function(){return e.handleStatus(!0)},className:m?null:a.hideButton},r.a.createElement(on.a,null))))))}}]),a}(r.a.Component),li=Object(C.a)(ai)(oi),si=a(493),ii=a(494),ci=a(495),mi=a(496),pi=a(497),di=a(118),ui={icon:{display:"inline-flex",verticalAlign:"middle",paddingBottom:".4rem","@media (max-width: 600px)":{fontSize:"0.9rem !important"}},label:{fontSize:"1rem",fontWeight:"300",paddingLeft:".5rem",marginLeft:".5rem","@media (max-width: 600px)":{fontSize:"0.9rem",paddingLeft:0}},valueRow:{marginTop:".25rem"},value:{margin:"0 1rem 1rem 1rem",flexGrow:"1",width:"100%",fontSize:".9rem",minWidth:"6rem",display:"inline-block",fontWeight:"bold",color:"#455A64"},displayButton:{visibility:"hidden",opacity:"0"},textField:{marginBottom:"1rem",width:"80%"},buttonWrap:{paddingRight:"0"},buttonGroup:{display:"flex",justifyContent:"flex-end"},row:{display:"flex"},button:{width:"75%",border:"1px solid #1976D2",marginLeft:"1rem",color:"#1976D2",textTransform:"none",whiteSpace:"nowrap"}},hi=Object(C.a)({root:{margin:"0 .2rem",transition:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",textTransform:"capitalize"}})(w.a),fi=Object(C.a)({root:{margin:"0 .2rem",transition:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",background:"#1E88E5",color:"#fff",textTransform:"capitalize","&:hover":{background:"#2196F3"}}})(w.a),gi=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){var a=n.state.data;a[t]=e,n.setState({data:a})},n.handleStatus=function(e){n.state.data[0]&&n.setState({status:e})},n.handleShow=function(e){n.setState({show:e})},n.cancel=function(){n.setState({data:n.props.value,status:!1})},n.setDisplay=function(e,t){n.state.showDeleteButton[t]=e},n.addNewValue=function(){n.setState({status:!0});var e=new Array;n.state.data&&(e=Object(di.a)(n.state.data)),e.push(""),n.setState({data:e})},n.deleteValue=function(e){var t=Object(di.a)(n.state.data);t=t.filter((function(t,a){return a!=e})),n.setState({data:t})},n.handleUpdate=function(){if(n.state.data[0]){var e={type:"danger",title:"Error!",message:"Your data update failed!"},t={type:"success",title:"Success!",message:"All your data has been successfully updated!"},a=Object(or.a)({},n.props.id,n.state.data),r=Object(di.a)(n.state.data);r=r.filter((function(e,t){return""!=e.replace(/\s/g,"")})),re.put("/profile",a).then((function(e){"ok"==e.data.status&&hr(t)})).catch((function(t){return hr(e)}))}},n.state={status:!1,show:!1,showDeleteButton:[],data:null},n}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t,a=0==(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.length)?null:e.value;this.setState({data:a})}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onMouseOver:function(t){return e.handleShow(!0)},onMouseLeave:function(t){return e.handleShow(!1)}},r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,xs:4,sm:3},r.a.createElement("span",{className:t.icon},this.props.icon),r.a.createElement("span",{className:t.label},this.props.label)),r.a.createElement(v.a,{item:!0,xs:7,sm:6,className:t.valueRow},this.state.status?this.state.data?r.a.createElement("div",null,this.state.data.map((function(a,n){return r.a.createElement("div",{onMouseOver:function(t){return e.setDisplay(!0,n)},onMouseLeave:function(t){return e.setDisplay(!1,n)},key:n,className:t.row},r.a.createElement(kn.a,{className:t.textField,type:"text",value:a,index:n,onChange:function(t){return e.handleChange(t.target.value,n)}}),r.a.createElement(w.a,{className:e.state.showDeleteButton[n]?null:t.displayButton,onClick:function(t){return e.deleteValue(n)}},r.a.createElement(ti.a,null)))})),r.a.createElement(w.a,{className:t.button,onClick:this.addNewValue},"+ Add new")):null:this.state.data?this.state.data.map((function(e,a){return r.a.createElement("span",{className:t.value,key:a},e)})):r.a.createElement(w.a,{className:t.button,onClick:this.addNewValue},"+ Add new")),r.a.createElement(v.a,{item:!0,xs:1,sm:3},r.a.createElement(v.a,{container:!0,justify:"flex-start"},this.state.status?r.a.createElement("div",{className:t.buttonGroup},r.a.createElement(fi,{onClick:function(){e.handleUpdate(),e.handleStatus(!1)}},r.a.createElement(qs.a,null)," Save"),r.a.createElement(hi,{onClick:function(){e.cancel(),e.handleStatus(!1)}},r.a.createElement(Kn.a,null),"Cancel")):r.a.createElement(hi,{onClick:function(){return e.handleStatus(!0)},className:this.state.show?null:t.displayButton},r.a.createElement(on.a,null)))))))}}]),a}(n.Component),bi=Object(C.a)(ui)(gi),Ei={icon:{display:"inline-flex",verticalAlign:"middle",fontSize:"1.3rem",paddingTop:".12rem"}},vi=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={data:null},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;re.get("/profile").then((function(t){t.data.profile?e.setState({data:t.data.profile}):e.setState({data:null})}))}},{key:"render",value:function(){var e=this.state.data,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Overview"),r.a.createElement(bi,{label:"Education",value:e?e.overview.education:null,id:"educations",icon:r.a.createElement(si.a,null)}),r.a.createElement(li,{value:e?e.overview.hometown:null,label:"From",id:"hometown",icon:r.a.createElement(ii.a,null)}),r.a.createElement(li,{value:e?e.overview.live_at:null,label:"Live at",id:"liveAt",icon:r.a.createElement(ci.a,null)}),r.a.createElement(D.a,{style:{margin:"1rem 0"}}),r.a.createElement("h3",null,"Contact Info"),r.a.createElement(bi,{label:"Email",value:e?e.contact.email:null,id:"email",icon:r.a.createElement(mi.a,null)}),r.a.createElement(li,{value:e?e.contact.phone:null,label:"Phone",id:"phone",icon:r.a.createElement(pi.a,null)}),r.a.createElement(li,{value:e?e.socials.facebook:null,label:"Facebook",id:"facebook",icon:r.a.createElement("i",{"aria-hidden":"true",className:Je()("fab fa-facebook",t.icon)}),type:"link"}),r.a.createElement(li,{value:e?e.socials.github:null,label:"Github",id:"github",icon:r.a.createElement("i",{"aria-hidden":"true",className:Je()("fab fa-github",t.icon)}),type:"link"}),r.a.createElement(li,{value:e?e.socials.instagram:null,label:"Instagram",id:"instagram",icon:r.a.createElement("i",{"aria-hidden":"true",className:Je()("fab fa-instagram",t.icon)}),type:"link"}),r.a.createElement(li,{value:e?e.socials.twitter:null,label:"Twitter",id:"twitter",icon:r.a.createElement("i",{"aria-hidden":"true",className:Je()("fab fa-twitter",t.icon)}),type:"link"}))}}]),a}(n.Component),wi=Object(C.a)(Ei)(vi),xi=a(7),Oi=a(437),Ci=a(438),yi=a(116),ji=a.n(yi),ki=a(117),Ni=a.n(ki),Si=Object(cr.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"35ch"},input:{width:"25rem",display:"flex",margin:"1.5rem 0 0 1rem"},button:{display:"block",margin:"2rem 1rem",padding:".5rem 1rem",textTransform:"capitalize",color:"#ffffff",background:"#388E3C","&:hover":{background:"#43A047"}},row:{display:"block"},errorMessage:{display:"block",color:"#f00",fontSize:".8rem",margin:"0.5rem 0"}}}));function Ii(){var e=r.a.useState({oldPwd:null,newPwd:null,retype:null,oldPasswordMessage:null,newPasswordError:null,flag:!1}),t=Object(Bn.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),l=Object(Bn.a)(o,2),s=l[0],i=l[1],c=Si(),m=function(){i(!s)},p=function(e){e.preventDefault()},d=function(){var e=Object(rr.a)(nr.a.mark((function e(){var t;return nr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={email:F().email,password:a.oldPwd},re.post("/users/login",t).then((function(e){if(e.data.isAuthenticated)if(a.newPwd&&0!=a.newPwd.length)if((null===a||void 0===a?void 0:a.newPwd)!=(null===a||void 0===a?void 0:a.retype))n(Object(h.a)(Object(h.a)({},a),{},{newPasswordError:"Those password didn't match. Try again!",oldPasswordMessage:null}));else{var t={type:"danger",title:"Error!",message:"Your password update failed. Try again!"},r={type:"success",title:"Success!",message:"Your password was updated successfully!"};n(Object(h.a)(Object(h.a)({},a),{},{newPasswordError:null})),(new FormData).append("password",a.newPwd),re.put("/users/password",{password:a.newPwd}).then((function(e){1==e.data.success?hr(r):hr(t)})).catch((function(e){return hr(t)}))}else n(Object(h.a)(Object(h.a)({},a),{},{newPasswordError:"Enter a password!",oldPasswordMessage:null}));else n(Object(h.a)(Object(h.a)({},a),{},{oldPasswordMessage:"The password that you're entered is incorrect!"}))})).catch((function(e){n(Object(h.a)(Object(h.a)({},a),{},{oldPasswordMessage:"The password that you're entered is incorrect!"}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Change password"),r.a.createElement("div",{className:c.row},r.a.createElement(On.a,{className:Object(xi.a)(c.margin,c.textField),variant:"filled"},r.a.createElement(Ci.a,{htmlFor:"filled-adornment-password"},"Old password"),r.a.createElement(Oi.a,{id:"filled-adornment-password",type:s?"text":"password",value:a.oldPwd,onChange:function(e){return n(Object(h.a)(Object(h.a)({},a),{},{oldPwd:e.target.value}))},autoComplete:"new-password",error:!!a.oldPasswordMessage,endAdornment:r.a.createElement(Gn.a,{position:"end"},r.a.createElement(xe.a,{"aria-label":"toggle password visibility",onClick:m,onMouseDown:p,edge:"end"},s?r.a.createElement(ji.a,null):r.a.createElement(Ni.a,null)))}),r.a.createElement("p",{className:c.errorMessage},a.oldPasswordMessage))),r.a.createElement("div",{className:c.row},r.a.createElement(On.a,{className:Object(xi.a)(c.margin,c.textField),variant:"filled"},r.a.createElement(Ci.a,{htmlFor:"filled-adornment-password"},"New password"),r.a.createElement(Oi.a,{id:"filled-adornment-password",type:s?"text":"password",value:a.newPwd,onChange:function(e){return n(Object(h.a)(Object(h.a)({},a),{},{newPwd:e.target.value}))},autoComplete:"new-password",error:!!a.newPasswordError,endAdornment:r.a.createElement(Gn.a,{position:"end"},r.a.createElement(xe.a,{"aria-label":"toggle password visibility",onClick:m,onMouseDown:p,edge:"end"},s?r.a.createElement(ji.a,null):r.a.createElement(Ni.a,null)))}),r.a.createElement("p",{className:c.errorMessage},a.newPasswordError))),r.a.createElement("div",{className:c.row},r.a.createElement(On.a,{className:Object(xi.a)(c.margin,c.textField),variant:"filled"},r.a.createElement(Ci.a,{htmlFor:"filled-adornment-password"},"Re-type password"),r.a.createElement(Oi.a,{id:"filled-adornment-password",type:s?"text":"password",value:a.retype,onChange:function(e){return n(Object(h.a)(Object(h.a)({},a),{},{retype:e.target.value}))},autoComplete:"new-password",error:!!a.newPasswordError,endAdornment:r.a.createElement(Gn.a,{position:"end"},r.a.createElement(xe.a,{"aria-label":"toggle password visibility",onClick:m,onMouseDown:p,edge:"end"},s?r.a.createElement(ji.a,null):r.a.createElement(Ni.a,null)))}),r.a.createElement("p",{className:c.errorMessage},a.newPasswordError))),r.a.createElement(w.a,{className:c.button,onClick:d},"Update password"))}function Pi(e){var t=e.children,a=e.value,n=e.index,o=Object(Cr.a)(e,["children","value","index"]),l=Li();return r.a.createElement(Ne.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},o),a===n&&r.a.createElement(ve.a,{className:l.itemWrapper},t))}function Di(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}var Li=Object(cr.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:"transparent",textAlign:"left!important"},container:Object(h.a)({},G),appBar:{boxShadow:"none",backgroundColor:"transparent"},itemWrapper:{padding:"0 0 24px 24px","@media (max-width: 600px)":{padding:"0 0 16px 16px"}}}})),Wi=Object(mr.a)({root:{background:"transparent",borderRadius:3,border:0,color:"#333",height:48,padding:"0 30px",boxShadow:"none",textTransform:"none"},label:{textTransform:"capitalize",textAlign:"left"}})(jr.a);function Bi(e){var t=Li(),a=r.a.useState(0),n=Object(Bn.a)(a,2),o=n[0],l=n[1];return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{container:!0,className:t.gridWrapper},r.a.createElement(v.a,{item:!0,sm:2},r.a.createElement(b.a,{position:"static",color:"default",className:t.appBar},r.a.createElement(yr.a,{value:o,onChange:function(e,t){l(t)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",orientation:"vertical",className:{root:t.tabRoot,label:t.tabLabel}},r.a.createElement(Wi,Object.assign({label:"Overview"},Di(0))),r.a.createElement(Wi,Object.assign({label:"Security"},Di(1)))))),r.a.createElement(v.a,{item:!0,xs:12,sm:10},r.a.createElement(Pi,{value:o,index:0},r.a.createElement(wi,null)),r.a.createElement(Pi,{value:o,index:1},r.a.createElement(Ii,null)))))}var Ti,Fi=Object(X.a)({root:{marginTop:"-5%",background:"rgba(0,0,0,.7)"},paper:{background:"transparent",boxShadow:"none"}}),Ri=function(e){var t=e.type,a=Fi();return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{open:!0,onClose:function(){return e.handlePopup(null)},className:a.root,scroll:"body",BackdropProps:{classes:{root:a.root}},PaperProps:{classes:{root:a.paper}}},r.a.createElement(V.a,null,"login"==t?r.a.createElement(ue,{handlePopup:e.handlePopup}):"register"==t?r.a.createElement(he,{handlePopup:e.handlePopup}):null)))},zi=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handlePopup=function(e){n.setState({popup:e})},n.state={popup:null,avatar:"",status:null,displayName:null,isLogin:!!sessionStorage.user,userInfo:null},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.isLogin?re.get("/profile/".concat(F()._id)).then((function(t){e.setState({avatar:t.data.user.avatar,status:t.data.user.status,displayName:t.data.user.display_name})})):window.location.href="/"}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(ur.a,null),null!==this.state.popup?r.a.createElement(Ri,{handlePopup:this.handlePopup,type:this.state.popup}):null,r.a.createElement(Te,{brand:"Covid",brandHighlight:"Forum",handlePopup:this.handlePopup,isLogin:function(t){return e.setState({isLogin:t})}}),r.a.createElement(ei,{avatar:this.state.avatar?this.state.avatar:null,status:this.state.status?this.state.status:null,displayName:this.state.displayName?this.state.displayName:null}),r.a.createElement(v.a,{container:!0,className:t.container},r.a.createElement(Bi,{userInfo:this.state.userInfo})))}}]),a}(n.Component),Ai=Object(C.a)(Gs)(zi),Mi=(Ti={background:{background:"#292E38",minHeight:"8rem",borderTop:"1px solid #DD163B",padding:"2rem 0","& p":{color:H,padding:0,margin:0,display:"block",position:"relative",top:"50%"}},container:Object(h.a)(Object(h.a)({},G),{},{width:"100%",minHeight:"8rem"}),brand:{fontSize:"1.2rem",color:H,paddingTop:"1rem"},highlight:{color:"#DD163B"},right:{display:"flex",justifyContent:"flex-start",flexDirection:"column",textAlign:"right","& ul":{listStyleType:"none"}},left:{fontSize:".9rem",display:"flex",justifyContent:"flex-start",color:H,"& ul":{listStyleType:"none","& li":{padding:".3rem 0",transition:".2s","&:hover":{color:"#DD163B"}}},"& a":{color:H,textDecoration:"none",transition:".1s","&:hover":{color:"#DD163B"}}},contactBtn:{background:"transparent",outline:"none",border:"none",color:H,padding:0,margin:0,fontSize:".9rem",transition:".2s","&:hover":{color:"#DD163B",cursor:"pointer"}}},Object(or.a)(Ti,"right",{display:"flex",justifyContent:"flex-end",flexDirection:"row",fontSize:".8rem",opacity:".5","& p":{padding:0,margin:0,height:"0"}}),Object(or.a)(Ti,"icon",{display:"inline-flex",verticalAlign:"middle",paddingRight:".2rem",paddingLeft:".2rem",fontSize:".8rem"}),Ti),Ui=a(498),_i=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).addMessageButton=function(){},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.background,id:"contact"},r.a.createElement(v.a,{container:!0,className:e.container},r.a.createElement(v.a,{item:!0,sm:6,className:e.left},r.a.createElement("div",{className:e.brand},"Covid",r.a.createElement("span",{className:e.highlight},"Forum")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://www.facebook.com/Covid-Forum-107153144353828/",target:"_blank"},"Fanpage")),r.a.createElement("li",null,"Email: khoanv.me@gmail.com"),r.a.createElement("li",null,r.a.createElement("button",{onClick:this.addMessageButton,className:e.contactBtn},"Chat with admins")))),r.a.createElement(v.a,{item:!0,sm:6,className:e.right},r.a.createElement("p",{className:e.copyright},"Site logo / design",r.a.createElement(Ui.a,{className:e.icon}),"2020 by PKQ Team"))))}}]),a}(n.Component),Hi=Object(C.a)(Mi)(_i),Yi=(a(358),Object(C.a)({root:{background:"#DD163B",color:"rgba(255,255,255,.8)",fontSize:"1rem",padding:"1rem 2.5rem","&:hover":{background:"#B9163B"}}})(w.a)),Gi=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={404:"the page you're looking for can't be found!",401:"you don't allow to access this page!"},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.errorCode;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"wartermark"},401==e?401:404),r.a.createElement("div",{className:"content"},r.a.createElement("h1",{className:"t1"},"Ooops!"),r.a.createElement("p",{className:"t2"},"We're sorry, "," ",e?this.state[e]:this.state[404]),r.a.createElement("div",{className:"btn"},r.a.createElement(Yi,{onClick:function(){return c.push("/")}},"Go back")))))}}]),a}(n.Component);l.a.render(r.a.createElement(s.c,{history:c},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:ba}),r.a.createElement(s.b,{path:"/discussion",exact:!0,component:Oa}),r.a.createElement(s.b,{path:"/room/:name",exact:!0,component:tr}),r.a.createElement(s.b,{path:"/room/:name/news",exact:!0,component:Ao}),r.a.createElement(s.b,{path:"/room/:name/news/create",exact:!0,component:cl}),r.a.createElement(s.b,{path:"/news/:id/update",exact:!0,component:gl}),r.a.createElement(s.b,{path:"/news",exact:!0,component:el}),r.a.createElement(s.b,{path:"/news/:id",exact:!0,component:To}),r.a.createElement(s.b,{path:"/posts/:id",exact:!0,component:Ys}),r.a.createElement(s.b,{path:"/wall/",render:function(e){return r.a.createElement(Zr,e)}}),r.a.createElement(s.b,{path:"/profile/",render:function(e){return sessionStorage.user?r.a.createElement(Ai,e):r.a.createElement(s.a,{to:"/"})}}),r.a.createElement(s.a,{from:"/admin",to:"/admin/dashboard",exact:!0}),r.a.createElement(s.b,{path:"/admin/dashboard",exact:!0,component:es}),r.a.createElement(s.b,{path:"/admin/rooms-manager",exact:!0,component:ws}),r.a.createElement(s.b,{path:"/admin/users-manager",exact:!0,component:Fs}),r.a.createElement(s.b,{path:"/admin/reports-manager",exact:!0,component:Us}),r.a.createElement(s.b,{path:"/404",render:function(e){return r.a.createElement(Gi,Object.assign({},e,{errorCode:404}))}}),r.a.createElement(s.b,{path:"/401",render:function(e){return r.a.createElement(Gi,Object.assign({},e,{errorCode:401}))}}),r.a.createElement(s.a,{from:"*",to:"/404"})),r.a.createElement(Hi,null)),document.getElementById("root"))},73:function(e,t,a){e.exports=a.p+"static/media/windows.34337b30.jpg"},74:function(e,t,a){e.exports=a.p+"static/media/macos.8e545ce8.jpg"},75:function(e,t,a){e.exports=a.p+"static/media/ios.8ee45683.jpg"},76:function(e,t,a){e.exports=a.p+"static/media/android.8d186cb4.jpg"}},[[214,1,2]]]);
//# sourceMappingURL=main.97a0f755.chunk.js.map